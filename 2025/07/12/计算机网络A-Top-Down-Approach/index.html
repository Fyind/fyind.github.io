<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络A Top Down Approach | Fyind's Blog</title><meta name="author" content="Fyind"><meta name="copyright" content="Fyind"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="计算机网络与因特网 1.1 因特网是什么？ 1.1.1 组成结构描述  因特网连接了全球数十亿计算设备，包括传统计算机、服务器、智能手机、平板电脑和物联网设备。 所有设备统称为“主机”或“终端系统”，2017年约有180亿设备接入，预计2022年达到285亿。 网络通过通信链路和分组交换机将终端系统互联。 数据传输时被分割为数据包，并添加头部信息。 分组交换机主要包括路由器和链路层交换机，分别用于">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络A Top Down Approach">
<meta property="og:url" content="http://fyind.de/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/index.html">
<meta property="og:site_name" content="Fyind&#39;s Blog">
<meta property="og:description" content="计算机网络与因特网 1.1 因特网是什么？ 1.1.1 组成结构描述  因特网连接了全球数十亿计算设备，包括传统计算机、服务器、智能手机、平板电脑和物联网设备。 所有设备统称为“主机”或“终端系统”，2017年约有180亿设备接入，预计2022年达到285亿。 网络通过通信链路和分组交换机将终端系统互联。 数据传输时被分割为数据包，并添加头部信息。 分组交换机主要包括路由器和链路层交换机，分别用于">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://fyind.de/img/pic1.PNG">
<meta property="article:published_time" content="2025-07-12T22:02:58.000Z">
<meta property="article:modified_time" content="2025-07-18T10:49:53.883Z">
<meta property="article:author" content="Fyind">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://fyind.de/img/pic1.PNG"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "计算机网络A Top Down Approach",
  "url": "http://fyind.de/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/",
  "image": "http://fyind.de/img/pic1.PNG",
  "datePublished": "2025-07-12T22:02:58.000Z",
  "dateModified": "2025-07-18T10:49:53.883Z",
  "author": [
    {
      "@type": "Person",
      "name": "Fyind",
      "url": "http://fyind.de"
    }
  ]
}</script><link rel="shortcut icon" href="/img/pic1.PNG"><link rel="canonical" href="http://fyind.de/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络A Top Down Approach',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(https://fyindex.work/PicGo/liuyin.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/pic1.PNG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">85</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">83</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/categories/TUM%E7%AC%94%E8%AE%B0"><i class="fa-fw fas fa-folder-open"></i><span> TUM笔记</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/yae.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Fyind's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">计算机网络A Top Down Approach</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/categories/TUM%E7%AC%94%E8%AE%B0"><i class="fa-fw fas fa-folder-open"></i><span> TUM笔记</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络A Top Down Approach</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-07-12T22:02:58.000Z" title="Created 2025-07-12 22:02:58">2025-07-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-07-18T10:49:53.883Z" title="Updated 2025-07-18 10:49:53">2025-07-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="计算机网络与因特网">计算机网络与因特网</h1>
<h2 id="因特网是什么">1.1 因特网是什么？</h2>
<h3 id="组成结构描述">1.1.1 组成结构描述</h3>
<ul>
<li>因特网连接了全球数十亿计算设备，包括传统计算机、服务器、智能手机、平板电脑和物联网设备。</li>
<li>所有设备统称为“主机”或“终端系统”，2017年约有180亿设备接入，预计2022年达到285亿。</li>
<li>网络通过通信链路和分组交换机将终端系统互联。</li>
<li>数据传输时被分割为数据包，并添加头部信息。</li>
<li>分组交换机主要包括路由器和链路层交换机，分别用于核心网络和接入网络。</li>
<li>数据包在网络中经过的路径称为路由或路径。</li>
<li>Cisco预测到2022年全球IP流量将达到每年近5泽字节（Zettabytes）。</li>
<li>网络服务提供商（ISP）提供多种接入方式，如宽带、局域网、移动无线等。</li>
<li>ISP之间通过国家和国际层级的上层ISP互连。</li>
<li>因特网运行协议控制信息发送和接收，其中TCP和IP是最重要的两个协议。</li>
<li>因特网标准由IETF制定，文档称为RFC（请求评论），定义了TCP、IP、HTTP、SMTP等协议。</li>
<li>IEEE 802委员会制定了以太网和WiFi等链路标准。</li>
</ul>
<h3 id="服务视角描述">1.1.2 服务视角描述</h3>
<ul>
<li>因特网可看作一个为分布式应用提供服务的基础设施。</li>
<li>常见应用包括电子邮件、网页浏览、移动应用、实时交通地图、音乐/视频流、社交媒体、视频会议、多人游戏、基于位置的推荐系统等。</li>
<li>应用程序运行在终端系统上，而非网络核心的分组交换机中。</li>
<li>程序间的数据交换依赖于网络提供的服务接口——套接字（Socket）接口。</li>
<li>类比邮政服务：程序需遵循特定规则（如封装数据、指定目标地址）才能让因特网正确传输数据。</li>
<li>因特网提供多种服务供不同应用选择。</li>
</ul>
<h3 id="协议是什么">1.1.3 协议是什么？</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712220647112.png"
alt="image-20250712220647112" />
<figcaption aria-hidden="true">image-20250712220647112</figcaption>
</figure>
<ul>
<li>协议定义了多个实体之间消息的格式、顺序及发送/接收消息时采取的动作。</li>
<li>类比人类交流中的礼仪：问候语→回应→进一步沟通。</li>
<li>如果通信双方使用不同协议，则无法正常交互。</li>
<li>网络协议由硬件或软件组件实现，例如：
<ul>
<li>物理链路上的比特流控制协议；</li>
<li>拥塞控制协议；</li>
<li>路由器中的路径选择协议。</li>
</ul></li>
<li>示例：访问Web服务器时的协议流程：
<ul>
<li>客户端发送连接请求；</li>
<li>服务器响应连接；</li>
<li>客户端发送GET请求获取页面；</li>
<li>服务器返回页面内容。</li>
</ul></li>
<li>协议的核心要素：消息格式、顺序、处理动作。</li>
</ul>
<h2 id="网络边缘">1.2 网络边缘</h2>
<h3 id="接入网络">1.2.1 接入网络</h3>
<h4 id="家庭接入方式">家庭接入方式</h4>
<ul>
<li><strong>DSL</strong>：
<ul>
<li>使用电话线进行数据传输；</li>
<li>下行速率可达52 Mbps，上行16 Mbps；</li>
<li>采用频分复用技术分离语音和数据信号；</li>
<li>受距离限制，通常不超过5~10英里。</li>
</ul></li>
<li><strong>电缆接入（Cable）</strong>：
<ul>
<li>利用有线电视网络基础设施；</li>
<li>采用混合光纤同轴（HFC）架构；</li>
<li>下行速率可达1.2 Gbps，上行100 Mbps；</li>
<li>是共享广播介质，用户并发下载会影响实际速率；</li>
<li>需要多路访问协议协调上传数据传输。</li>
</ul></li>
<li><strong>光纤到户（FTTH）</strong>：
<ul>
<li>提供高达Gbps级别的接入速度；</li>
<li>包括主动光网络（AON）和被动光网络（PON）两种架构；</li>
<li>PON示例：Verizon FiOS；</li>
<li>使用ONT（光网络终端）和OLT（光线路终端）完成光电转换。</li>
</ul></li>
<li><strong>5G固定无线接入</strong>：
<ul>
<li>不需要铺设物理线路；</li>
<li>使用波束成形技术从基站向家庭发送数据；</li>
<li>提供高速住宅接入；</li>
<li>与WiFi路由器集成使用。</li>
</ul></li>
</ul>
<h4 id="企业与家庭lan接入">企业与家庭LAN接入</h4>
<ul>
<li><strong>以太网</strong>：
<ul>
<li>最常见的局域网技术；</li>
<li>用户通过双绞铜线连接至以太网交换机；</li>
<li>传输速率可达100 Mbps至10 Gbps。</li>
</ul></li>
<li><strong>WiFi（IEEE 802.11）</strong>：
<ul>
<li>无线局域网技术；</li>
<li>支持高达100 Mbps以上的共享传输速率；</li>
<li>广泛应用于大学、办公室、咖啡馆、家庭等场景；</li>
<li>用户需靠近接入点（通常几十米范围内）。</li>
</ul></li>
</ul>
<h4 id="移动广域无线接入">移动广域无线接入</h4>
<ul>
<li><strong>3G / 4G LTE / 5G</strong>：
<ul>
<li>用于移动设备的数据通信；</li>
<li>支持消息、照片分享、移动支付、视频流等功能；</li>
<li>覆盖范围远大于WiFi（可达数十公里）；</li>
<li>5G提供更高带宽和更低延迟；</li>
<li>第4代（4G）下载速率最高可达60 Mbps；</li>
<li>第5代（5G）正在部署中，支持更高速率和大规模物联网接入。</li>
</ul></li>
</ul>
<h3 id="物理媒体">1.2.2 物理媒体</h3>
<h4 id="引导型介质">引导型介质</h4>
<ul>
<li><strong>双绞线铜缆（Twisted Pair）</strong>：
<ul>
<li>成本最低、最常用的引导型传输介质；</li>
<li>用于电话网络和以太网接入；</li>
<li>支持10 Mbps至10 Gbps速率（取决于线径和距离）；</li>
<li>Cat6a类电缆可在百米内实现10 Gbps。</li>
</ul></li>
<li><strong>同轴电缆（Coaxial Cable）</strong>：
<ul>
<li>用于有线电视系统和互联网接入；</li>
<li>支持高数据传输速率；</li>
<li>可作为共享介质，多个终端系统共用一条电缆；</li>
<li>DOCSIS标准支持下行1.2 Gbps、上行100 Mbps。</li>
</ul></li>
<li><strong>光纤（Fiber Optics）</strong>：
<ul>
<li>传输光脉冲表示比特；</li>
<li>支持数十甚至数百Gbps的传输速率；</li>
<li>抗电磁干扰、低信号衰减（可达100 km）；</li>
<li>适合长距离传输，广泛用于长途电话网和因特网骨干；</li>
<li>OC标准速率从51.8 Mbps至39.8 Gbps（OC-1至OC-768）；</li>
<li>成本较高，主要用于骨干网络和数据中心。</li>
</ul></li>
</ul>
<h4 id="非引导型介质无线">非引导型介质（无线）</h4>
<ul>
<li><strong>地面无线电频道</strong>：
<ul>
<li>无需物理布线；</li>
<li>可穿透墙壁、支持移动接入；</li>
<li>根据覆盖范围分为短距（几米）、局域（十至几百米）、广域（数十公里）；</li>
<li>存在路径损耗、阴影衰落、多径衰落和干扰问题；</li>
<li>应用于蓝牙、WiFi、蜂窝网络等。</li>
</ul></li>
<li><strong>卫星无线电频道</strong>：
<ul>
<li>通信卫星连接地球站；</li>
<li>接收信号后通过转发器再生并重新发射；</li>
<li>两类卫星：
<ul>
<li>地球同步卫星（Geostationary）：位于36,000 km高空，存在约280
ms传播延迟；</li>
<li>低轨卫星（LEO）：轨道高度较低，绕地运行，需多颗卫星实现连续覆盖；</li>
</ul></li>
<li>卫星链路常用于无DSL或有线接入的偏远地区；</li>
<li>LEO卫星未来可能用于互联网接入。## 1.3 网络核心</li>
</ul></li>
</ul>
<h3 id="分组交换packet-switching">1.3.1 分组交换Packet Switching</h3>
<p>路由器
<strong>必须接收到整个数据包之后</strong>，才能开始将它发送到下一个链路。也就是说，不能“边收边发”。</p>
<h4 id="存储转发传输">存储转发传输</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712221524803.png"
alt="image-20250712221524803" />
<figcaption aria-hidden="true">image-20250712221524803</figcaption>
</figure>
<ul>
<li>数据包在发送前必须被完整接收。</li>
<li>发送时间计算公式为 L/R（L 为数据包大小，R 为链路速率）。</li>
<li>示例：源发送 3 个数据包时，总延迟为 4L/R。</li>
</ul>
<details>
<summary>
解释
</summary>
<p>源主机有 3 个数据包，每个数据包大小为 <strong>L bits</strong></p>
<p>每条链路的传输速率为 <strong>R bps (bits per second)</strong></p>
<p>不考虑传播延迟（propagation delay）或排队、处理时间</p>
<p>使用<strong>存储转发（store-and-forward）</strong>方式进行传输</p>
<ol type="1">
<li><strong>源开始发送</strong>数据包 1（大小为 L 位）</li>
<li>经过时间 <code>L/R</code>
秒后，源完成发送，<strong>路由器完全收到</strong>整个数据包</li>
<li>路由器这时才开始发送数据包 1</li>
<li>再经过 <code>L/R</code> 秒，目的主机收到这个数据包</li>
</ol>
<p>👉 所以，总延迟为： <span class="math display">\[
\text{总延迟} = \frac{L}{R} + \frac{L}{R} = \frac{2L}{R}
\]</span></p>
<hr />
<p>📦 多个数据包的流水传输（以 3 个为例）</p>
<ul>
<li>第 1 个数据包到达目的地的时间是 <code>2L/R</code></li>
<li>第 2 个数据包到达目的地的时间是 <code>3L/R</code></li>
<li>第 3 个数据包到达目的地的时间是 <code>4L/R</code></li>
</ul>
<blockquote>
<p>为什么不是每个都
2L/R？因为数据包之间是<strong>流水线式重叠发送</strong>。</p>
</blockquote>
<ul>
<li>当路由器转发第 1 个数据包时，源可以开始发送第 2 个</li>
<li>这种<strong>流水线效应</strong>减少了整体延迟</li>
</ul>
✅ <strong>全部传完的时间</strong> = <code>4L/R</code>
</details>
<h4 id="排队延迟与丢包">排队延迟与丢包</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712222003115.png"
alt="image-20250712222003115" />
<figcaption aria-hidden="true">image-20250712222003115</figcaption>
</figure>
<ul>
<li><p><strong>输出缓冲区</strong>存储等待传输的数据包。</p></li>
<li><p>延迟取决于网络拥塞程度。分组在缓冲区中等着被发送，这个等待时间是<strong>不确定且可变的</strong>，取决于网络的<strong>拥塞程度</strong>。</p></li>
<li><p>缓冲区满时会导致数据包丢失。</p></li>
<li><p>类比银行排队或收费站等待。排队等候服务的顾客就像<strong>在缓冲区中的分组</strong></p>
<p>如果银行空间满了，<strong>新来的人就只能被拒绝</strong>（丢包）</p></li>
</ul>
<h4 id="转发表与路由协议">转发表与路由协议</h4>
<p>当一个 <strong>分组（packet）</strong>
到达路由器时，它并不知道接下来应该去哪个方向。这就像人在路口迷路一样，不知道该往哪个出口走。</p>
<blockquote>
<p>🧠 <strong>解决办法：每个路由器都有一张“转发表（forwarding
table）”来查路！</strong></p>
</blockquote>
<ul>
<li>每个终端系统有 IP 地址，路由器根据地址查找转发表。</li>
<li>转发表映射目的地址到输出链路。是一个查找表，记录着：目标地址（或部分地址）
→ 哪条出链路（outbound link）</li>
<li>问题：转发表是怎么设置的？路由器通过路由协议自动设置转发表。</li>
<li>路由协议的作用是：
<ul>
<li><strong>交换网络中的路由信息</strong></li>
<li><strong>计算从每个路由器到每个目的地的最佳路径</strong></li>
<li>然后自动设置好各个路由器的转发表</li>
</ul></li>
<li>路由协议决定最短路径并配置转发表。</li>
</ul>
<h3 id="电路交换">1.3.2 电路交换</h3>
<p>在网络中，有两种主要方式来传输数据：</p>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>方式</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>电路交换（Circuit Switching）</strong></td>
<td>在通信开始前<strong>建立连接并预留资源</strong></td>
</tr>
<tr class="even">
<td><strong>分组交换（Packet Switching）</strong></td>
<td>按需使用资源，<strong>无需事先预留</strong></td>
</tr>
</tbody>
</table>
<h4 id="基本概念">基本概念</h4>
<ul>
<li><p>在通信会话期间预留资源（缓存、链路带宽）。</p></li>
<li><p>区别于分组交换，资源不按需使用。</p></li>
<li><p>类比餐厅预订：提前预留桌位 vs 到达后可能需要等待。</p>
<ul>
<li><table>
<colgroup>
<col style="width: 26%" />
<col style="width: 20%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="header">
<th>餐厅类型</th>
<th>类比什么网络？</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>需要提前预订的餐厅</td>
<td>电路交换</td>
<td>虽然要提前打电话预约，但到了直接入座</td>
</tr>
<tr class="even">
<td>不需要预约的餐厅</td>
<td>分组交换</td>
<td>省事，但可能到了现场要排队等位</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
<h4 id="多路复用技术">多路复用技术</h4>
<ul>
<li><strong>频分多路复用 (FDM)</strong>：
<ul>
<li>频率谱划分为多个频段。</li>
<li>每个连接独占一个频段。</li>
</ul></li>
<li><strong>时分多路复用 (TDM)</strong>：
<ul>
<li>时间划分为帧，每帧包含多个时隙。</li>
<li>每个连接占用固定时隙。</li>
<li>传输速率为帧率 × 每时隙比特数。</li>
</ul></li>
</ul>
<h4 id="分组交换-vs-电路交换">分组交换 vs 电路交换</h4>
<ul>
<li><strong>分组交换优势</strong>：
<ul>
<li>更高效共享传输容量。</li>
<li>实现更简单、成本更低。</li>
<li>支持突发流量。</li>
</ul></li>
<li><strong>电路交换优势</strong>：
<ul>
<li>提供可预测的端到端延迟。</li>
<li>适合实时服务（如电话、视频会议）。</li>
</ul></li>
<li>示例分析表明分组交换在统计上优于电路交换。</li>
</ul>
<h3 id="网络的网络结构">1.3.3 网络的网络结构</h3>
<h4 id="网络结构演进">网络结构演进</h4>
<ul>
<li><strong>结构 1</strong>：所有接入 ISP 连接单一全球骨干 ISP。</li>
<li><strong>结构 2</strong>：多个全球骨干 ISP 竞争。</li>
<li><strong>结构 3</strong>：引入区域 ISP 和 Tier-1 ISP。</li>
<li><strong>结构 4</strong>：增加 PoP、多宿主、对等互联和 IXP。</li>
<li><strong>结构 5</strong>：加入内容提供商网络（如 Google）。</li>
</ul>
<h4 id="对等互联与-ixps">对等互联与 IXPs</h4>
<ul>
<li>同级 ISP 可直接对等互联以减少费用。</li>
<li>对等通常免结算费用。</li>
<li>第三方建立 IXP 提供多个 ISP 的对等平台。</li>
<li>全球已有超过 600 个 IXP。</li>
</ul>
<h4 id="内容提供商网络">内容提供商网络</h4>
<ul>
<li>如 Google 自建私有网络，连接至较低层级 ISP。</li>
<li>减少向高层 ISP 支付费用。</li>
<li>更好控制服务交付质量。</li>
<li>仍需连接至 Tier-1 ISP 以覆盖更多用户。</li>
</ul>
<h2 id="分组交换网络中的延迟丢包与吞吐量">1.4
分组交换网络中的延迟、丢包与吞吐量</h2>
<h3 id="分组交换网络中的延迟概述">1.4.1 分组交换网络中的延迟概述</h3>
<h4 id="延迟类型">延迟类型</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712223426654.png"
alt="image-20250712223426654" />
<figcaption aria-hidden="true">image-20250712223426654</figcaption>
</figure>
<ul>
<li><strong>处理延迟 (dproc)</strong>：
<ul>
<li>检查数据包头部、错误检测。</li>
<li>高速路由器中通常为微秒级。</li>
</ul></li>
<li><strong>排队延迟 (dqueue)</strong>：
<ul>
<li>等待传输的时间。</li>
<li>依赖流量强度和到达模式。</li>
</ul></li>
<li><strong>传输延迟 (dtrans)</strong>：
<ul>
<li>将数据包推入链路所需时间。</li>
<li>计算公式为 L/R。</li>
</ul></li>
<li><strong>传播延迟 (dprop)</strong>：
<ul>
<li>比特从一个路由器传播到下一个的时间。</li>
<li>与距离成正比，速度约为光速的 2/3。</li>
</ul></li>
</ul>
<h4 id="总节点延迟公式">总节点延迟公式</h4>
<ul>
<li>dnodal = dproc + dqueue + dtrans + dprop</li>
</ul>
<h4 id="类比理解">类比理解</h4>
<ul>
<li>高速公路类比：
<ul>
<li>路程 = 传播延迟。</li>
<li>收费站处理 = 传输延迟。</li>
<li>车辆车队 = 数据包序列。</li>
</ul></li>
</ul>
<h3 id="排队延迟与丢包-1">1.4.2 排队延迟与丢包</h3>
<h4 id="排队延迟特性">排队延迟特性</h4>
<ul>
<li>随流量强度 La/R 变化。</li>
<li>当 La/R &gt; 1 时，队列无限增长，延迟趋近无穷。</li>
<li>平均排队延迟随流量强度接近 1 而迅速上升。</li>
</ul>
<h4 id="丢包机制">丢包机制</h4>
<ul>
<li>队列容量有限，满时丢弃新到达的数据包。</li>
<li>用户视角表现为数据包进入网络但未到达目的地。</li>
<li>丢包概率随流量强度增加而上升。</li>
</ul>
<h3 id="端到端延迟">1.4.3 端到端延迟</h3>
<h4 id="总延迟计算">总延迟计算</h4>
<ul>
<li>dend-end = N × (dproc + dtrans + dprop)</li>
<li>扩展公式考虑异构延迟和平均排队延迟。</li>
</ul>
<h4 id="traceroute-工具">Traceroute 工具</h4>
<ul>
<li>测量路径及各跳延迟。</li>
<li>示例输出显示 14 个中间路由器及其往返延迟。</li>
<li>可观察跨大西洋光纤链路带来的显著传播延迟。</li>
</ul>
<h3 id="网络吞吐量">1.4.4 网络吞吐量</h3>
<h4 id="定义与计算">定义与计算</h4>
<ul>
<li><strong>瞬时吞吐量</strong>：接收端每秒接收比特数。</li>
<li><strong>平均吞吐量</strong>：文件大小 F / 总传输时间 T。</li>
<li>影响因素包括瓶颈链路速率、并发流量等。</li>
</ul>
<h4 id="示例分析">示例分析</h4>
<ul>
<li><strong>两链路网络</strong>：吞吐量 = min{Rs, Rc}</li>
<li><strong>N 条链路网络</strong>：吞吐量 = min{R1, R2, …, RN}</li>
<li><strong>核心网过载</strong>：若共享链路 R 为瓶颈，吞吐量 = R /
下载数量。</li>
</ul>
<h4 id="现实网络影响因素">现实网络影响因素</h4>
<ul>
<li>核心网通常高带宽，瓶颈常在接入网。</li>
<li>多用户下载时共享链路可能导致吞吐下降。## 1.5
协议层次及其服务模型</li>
</ul>
<h3 id="分层架构">1.5.1 分层架构</h3>
<h4 id="航空系统的类比">航空系统的类比</h4>
<ul>
<li>将航空系统功能划分为多个层级，如购票、行李托运、登机口、起飞降落、航线调度等。</li>
<li>每一层通过本层操作和下层服务实现特定功能，例如登机层使用跑道到跑道的运输服务完成乘客上下飞机。</li>
</ul>
<h4 id="网络协议的分层">网络协议的分层</h4>
<ul>
<li>网络协议也采用分层结构，每层提供特定服务并依赖下层服务。</li>
<li>分层优势：模块化设计便于更新与维护；改变某层实现不影响其他部分。</li>
<li>缺点：可能重复实现底层功能（如链路层与端到端错误恢复）；跨层信息需求破坏分层隔离。</li>
</ul>
<h3 id="因特网协议栈">1.5.2 因特网协议栈</h3>
<h4 id="五层模型">五层模型</h4>
<ul>
<li><strong>应用层</strong>：
<ul>
<li>包含HTTP、SMTP、FTP等协议；</li>
<li>提供Web请求、电子邮件、文件传输等功能；</li>
<li>DNS用于域名解析为IP地址。</li>
</ul></li>
<li><strong>传输层</strong>：
<ul>
<li>使用TCP或UDP协议；</li>
<li>TCP提供可靠连接、流量控制、拥塞控制；</li>
<li>UDP提供无连接、不可靠传输。</li>
</ul></li>
<li><strong>网络层（IP层）</strong>：
<ul>
<li>负责将数据报从源主机传送到目的主机；</li>
<li>IP协议定义数据报格式及路由器处理方式；</li>
<li>包含多种路由协议决定路径。</li>
</ul></li>
<li><strong>链路层</strong> Link Layer：
<ul>
<li>在相邻节点间传输帧；</li>
<li>支持以太网、WiFi、DOCSIS等协议；</li>
<li>不同链路可能使用不同链路层协议。</li>
</ul></li>
<li><strong>物理层</strong>：
<ul>
<li>传输比特流；</li>
<li>依赖具体传输介质（双绞线、光纤等）；</li>
<li>Ethernet有多种物理层标准适配不同介质。</li>
</ul></li>
</ul>
<h3 id="封装过程">1.5.3 封装过程</h3>
<ul>
<li>数据在发送端逐层封装，添加各层头部信息。</li>
<li>应用层消息 → 传输层添加Ht生成段 → 网络层添加Hn生成数据报 →
链路层添加Hl生成帧。</li>
<li>接收端逐层剥离头部，还原原始数据。</li>
<li>类比：公司内部备忘录通过多层信封封装邮寄，接收方逐步拆封。</li>
</ul>
<h2 id="网络攻击">1.6 网络攻击</h2>
<h3 id="常见安全威胁">常见安全威胁</h3>
<h4 id="恶意软件感染">恶意软件感染</h4>
<ul>
<li>网络上传输的数据可能包含病毒、蠕虫、木马等恶意程序；</li>
<li>感染后可能导致文件删除、隐私窃取、加入僵尸网络；</li>
<li>自我复制机制使传播速度呈指数级增长。</li>
</ul>
<h4 id="拒绝服务攻击dosddos">拒绝服务攻击（DoS/DDoS）</h4>
<ul>
<li><strong>漏洞攻击</strong>：向目标发送精心构造的数据包导致崩溃。</li>
<li><strong>带宽洪水攻击</strong>：发送大量数据包阻塞目标访问链路。</li>
<li><strong>连接洪水攻击</strong>：建立大量虚假TCP连接耗尽资源。</li>
<li>DDoS利用僵尸网络发起分布式攻击，更难检测与防御。</li>
</ul>
<h4 id="数据包嗅探">数据包嗅探</h4>
<ul>
<li>在无线或广播环境中被动监听所有传输数据；</li>
<li>Wireshark等工具可轻松捕获敏感信息；</li>
<li>加密是主要防御手段。</li>
</ul>
<h4 id="欺骗攻击">欺骗攻击</h4>
<ul>
<li>构造虚假源地址的数据包进行伪装；</li>
<li>可能误导路由器修改转发表；</li>
<li>需要端到端身份验证机制防范。</li>
</ul>
<h2 id="计算机网络与因特网的发展历史">1.7
计算机网络与因特网的发展历史</h2>
<h3 id="分组交换技术的诞生19611972">1.7.1
分组交换技术的诞生（1961–1972）</h3>
<ul>
<li>Leonard Kleinrock提出排队理论支持分组交换；</li>
<li>Paul Baran（Rand Institute）与Donald
Davies（NPL）独立研究分组交换；</li>
<li>ARPAnet于1969年部署首个节点，成为因特网前身；</li>
<li>1972年推出首个主机间通信协议NCP；</li>
<li>Ray Tomlinson发明电子邮件系统。</li>
</ul>
<h3 id="专用网络与互联网络19721980">1.7.2
专用网络与互联网络（1972–1980）</h3>
<ul>
<li>出现ALOHANet、Telenet、Cyclades等私有网络；</li>
<li>Cerf与Kahn提出互联网架构，开发TCP/IP协议；</li>
<li>TCP早期版本整合可靠传输与转发功能；</li>
<li>后期分离出IP与UDP协议；</li>
<li>ALOHA协议启发以太网发展；</li>
<li>Metcalfe与Boggs开发以太网奠定局域网基础。</li>
</ul>
<h3 id="网络大爆发19801990">1.7.3 网络大爆发（1980–1990）</h3>
<ul>
<li>ARPAnet连接约200台主机，1990年全球因特网主机达10万；</li>
<li>BITNET、CSNET、NSFNET推动大学互联；</li>
<li>NSFNET主干速率从56kbps提升至1.5Mbps；</li>
<li>1983年ARPAnet全面切换至TCP/IP；</li>
<li>Jacobson提出基于主机的拥塞控制机制；</li>
<li>DNS系统研发成功，实现域名到IP的映射；</li>
<li>法国Minitel项目推广家庭数据网络，早于互联网普及。</li>
</ul>
<h3 id="因特网爆炸性发展1990年代">1.7.4
因特网爆炸性发展（1990年代）</h3>
<ul>
<li>NSFNET解除商业用途限制，商业化进程开启；</li>
<li>WWW由Tim
Berners-Lee在CERN发明，结合HTML、HTTP、浏览器、服务器四大要素；</li>
<li>Mosaic/Netscape浏览器推动Web普及；</li>
<li>微软加入引发浏览器大战；</li>
<li>电子商务、即时通讯、P2P文件共享成为“杀手级应用”；</li>
<li>互联网泡沫破裂后，Google、Amazon、eBay等企业崛起。</li>
</ul>
<h3 id="新世纪的发展2000年至今">1.7.5 新世纪的发展（2000年至今）</h3>
<ul>
<li>宽带接入普及（DSL、FTTH、5G固定无线）；</li>
<li>视频流媒体（YouTube、Netflix）、视频会议（Skype、FaceTime）兴起；</li>
<li>无线设备数量超过有线设备，智能手机推动移动互联网；</li>
<li>社交网络（Facebook、Twitter、微信）构建人与人之间的大规模连接；</li>
<li>大型云服务商（Google、Microsoft、阿里云）建设私有骨干网优化性能；</li>
<li>云计算平台（AWS、Azure）提供弹性计算与存储服务。## 1.8 小结</li>
</ul>
<h3 id="网络组成与结构">网络组成与结构</h3>
<ul>
<li>因特网是由硬件和软件组成的复杂网络系统。</li>
<li>从网络边缘开始，介绍了终端系统（主机）、应用程序以及传输层提供的服务。</li>
<li>接入网络中常见的链路层技术和物理媒体被详细探讨。</li>
<li>深入到网络核心，分析了分组交换与电路交换两种基本数据传输方式，并比较了它们的优缺点。</li>
<li>因特网是“网络的网络”，其层级结构由不同级别的ISP构成，这种结构支持因特网扩展至数千个网络。</li>
</ul>
<h3 id="核心网络概念">核心网络概念</h3>
<ul>
<li>分析了分组交换网络中的延迟、吞吐量和丢包原因。</li>
<li>建立了传输延迟、传播延迟、排队延迟及吞吐量的定量模型。</li>
<li>协议分层和服务模型是网络架构的关键原则。</li>
<li>调查了当前因特网中普遍的安全攻击问题。</li>
<li>简要回顾了计算机网络的发展历史。</li>
</ul>
<h3 id="学习路径与章节安排">学习路径与章节安排</h3>
<h4 id="本书路线图">本书路线图</h4>
<ul>
<li>第2章至第6章为核心内容，围绕五层因特网协议栈的上四层展开：
<ul>
<li>第2章：应用层</li>
<li>第3章：传输层</li>
<li>第4章：网络层（数据平面）</li>
<li>第5章：网络层（控制平面）</li>
<li>第6章：链路层与局域网</li>
</ul></li>
<li>第7章和第8章聚焦现代网络中的两个重要主题：
<ul>
<li>第7章：无线与移动网络（包括WiFi、蓝牙、蜂窝网络等）</li>
<li>第8章：网络安全（加密基础与安全应用）</li>
</ul></li>
</ul>
<h4 id="教学方法说明">教学方法说明</h4>
<ul>
<li>采用自顶向下的教学方式，先学习应用层以理解所需网络服务，再向下探索其实现方式。</li>
<li>提前讲解应用层有助于激发后续学习的兴趣与动机。</li>
</ul>
<h2 id="思维导图节点补充">思维导图节点补充</h2>
<h3 id="作业与练习题概览">作业与练习题概览</h3>
<h4 id="第1.1节">第1.1节</h4>
<ul>
<li>主机与终端系统的定义与区别</li>
<li>协议在外交关系中的类比解释</li>
<li>协议标准化的重要性</li>
</ul>
<h4 id="第1.2节">第1.2节</h4>
<ul>
<li>四种接入技术及其分类（家庭、企业、广域无线）</li>
<li>HFC的共享特性与冲突可能性</li>
<li>不同地区的住宅接入技术比较</li>
</ul>
<h4 id="第1.3节">第1.3节</h4>
<ul>
<li>分组交换网络中的端到端延迟计算</li>
<li>电路交换与分组交换的优劣对比</li>
<li>ISP对等与IXP盈利机制</li>
<li>内容提供商自建网络的原因（如Google）</li>
</ul>
<h4 id="第1.4节">第1.4节</h4>
<ul>
<li>延迟组件分析（传输、传播、处理、排队）</li>
<li>数据包传播时间与传输速率的关系</li>
<li>吞吐量计算与文件传输时间估算</li>
</ul>
<h4 id="第1.5节">第1.5节</h4>
<ul>
<li>协议分层任务分配与职责划分</li>
<li>分层中可能存在的重复功能</li>
<li>路由器、链路层交换机和主机处理的层次</li>
</ul>
<h4 id="第1.6节">第1.6节</h4>
<ul>
<li>自我复制型恶意软件的概念</li>
<li>僵尸网络构建与DDoS攻击原理</li>
<li>中间人攻击（Trudy）可能造成的危害</li>
</ul>
<h2 id="问题与练习摘要">问题与练习摘要</h2>
<h3 id="应用层协议设计">应用层协议设计</h3>
<ul>
<li>设计ATM与银行主机之间的协议流程，包括验证、查询余额和取款操作。</li>
</ul>
<h3 id="延迟与吞吐量分析">延迟与吞吐量分析</h3>
<ul>
<li>计算多个链路下的端到端延迟</li>
<li>分析数据包在不同链路条件下的传播与传输行为</li>
<li>探索实时语音传输（VoIP）的时间延迟因素</li>
</ul>
<h3 id="分组交换与电路交换比较">分组交换与电路交换比较</h3>
<ul>
<li>用户共享链路时的并发使用概率计算</li>
<li>使用二项分布模型分析同时传输用户数的概率分布</li>
</ul>
<h3 id="网络性能评估">网络性能评估</h3>
<ul>
<li>利用Little公式计算平均数据包到达率</li>
<li>Traceroute实验分析路由路径与延迟变化</li>
<li>Metcalfe定律验证：网络价值与用户数量平方关系</li>
</ul>
<h3 id="数据传输方式选择">数据传输方式选择</h3>
<ul>
<li>大文件传输场景下，比较通过高速链路传输与使用快递服务（如FedEx）的效率</li>
</ul>
<h3 id="卫星通信与带宽延迟积">卫星通信与带宽延迟积</h3>
<ul>
<li>计算地球同步卫星链路的传播延迟与带宽延迟积</li>
<li>探讨连续传输所需的最小图像大小</li>
</ul>
<h3 id="消息分段与网络性能优化">消息分段与网络性能优化</h3>
<ul>
<li>比较有无消息分段时的数据传输时间</li>
<li>分析消息分段的优势与潜在缺点</li>
<li>寻找最优分段大小以最小化传输延迟</li>
</ul>
<h3 id="实际应用案例">实际应用案例</h3>
<ul>
<li>Skype如何实现PC到普通电话的通话（结合因特网与电话网络）### Wireshark
实验</li>
</ul>
<h4 id="网络协议观察工具">网络协议观察工具</h4>
<ul>
<li><strong>Wireshark 是一种免费的网络封包嗅探器</strong>，可在
Windows、Linux/Unix 和 Mac 系统上运行。</li>
<li>它可以捕获和显示计算机发送和接收的消息内容，包括各协议字段的详细信息。</li>
<li>用户可通过图形界面查看捕获的数据包列表、选中数据包的头部细节以及其十六进制和
ASCII 内容。</li>
</ul>
<h4 id="实验目的与方法">实验目的与方法</h4>
<ul>
<li>通过实际操作加深对网络协议的理解。</li>
<li>观察两个协议实体之间交换消息的顺序，深入研究协议运作机制。</li>
<li>在真实网络环境中（如因特网）运行应用程序并分析其使用的网络协议。</li>
<li>学生将作为实验的一部分，亲自参与协议行为的触发与观察。</li>
</ul>
<h4 id="实验内容示例">实验内容示例</h4>
<ul>
<li>下载并安装 Wireshark 工具。</li>
<li>使用浏览器访问网站并捕获浏览器与服务器之间的通信过程。</li>
<li>深入了解 HTTP 协议交互流程。</li>
</ul>
<hr />
<h3 id="访谈leonard-kleinrock-的互联网愿景">访谈：Leonard Kleinrock
的互联网愿景</h3>
<h4 id="职业背景">职业背景</h4>
<ul>
<li>Leonard Kleinrock
是加州大学洛杉矶分校（UCLA）的计算机科学教授。</li>
<li>1961 年提出分组交换数学理论，成为互联网核心技术基础。</li>
<li>1969 年 UCLA 的计算机成为首个互联网节点。</li>
</ul>
<h4 id="对互联网诞生的回忆">对互联网诞生的回忆</h4>
<ul>
<li>第一条主机间消息为“Log”，但“g”导致斯坦福主机崩溃，最终消息变为“Lo!”。</li>
<li>当时未意识到这一事件的历史意义，仅用于远程登录测试。</li>
<li>早前曾预言未来可通过家庭或办公室设备轻松接入计算资源，如今已实现。</li>
</ul>
<h4 id="未来网络愿景">未来网络愿景</h4>
<ul>
<li><strong>基础设施方面</strong>：
<ul>
<li>无线和移动设备将在智能空间中广泛应用，形成“隐形互联网”。</li>
<li>环境中的各种物体（桌椅、墙壁、穿戴设备等）将具备感知、处理和通信能力。</li>
<li>房间能识别用户进入，环境可自然响应语音、手势甚至脑机接口指令。</li>
</ul></li>
<li><strong>技术组件方面</strong>：
<ul>
<li>部署定制化智能软件代理，动态挖掘和处理数据。</li>
<li>区块链技术提供不可篡改的分布式账本和信誉系统。</li>
<li>自组织系统管理高速网络流量。</li>
</ul></li>
<li><strong>应用与服务方面</strong>：
<ul>
<li>应用往往出人意料地快速涌现，如电子邮件、社交网络、短视频分享等。</li>
<li>未来仍将持续出现“突如其来”的创新服务。</li>
</ul></li>
</ul>
<h4 id="对学生的建议">对学生的建议</h4>
<ul>
<li>互联网是一个充满挑战与机遇的新领域。</li>
<li>不要被现有技术所限制，应大胆想象并推动技术进步。</li>
</ul>
<h1 id="应用层">应用层</h1>
<h2 id="网络应用原理">2.1 网络应用原理</h2>
<h3 id="网络应用架构">2.1.1 网络应用架构</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712230335689.png"
alt="image-20250712230335689" />
<figcaption aria-hidden="true">image-20250712230335689</figcaption>
</figure>
<h4 id="客户端-服务器架构">客户端-服务器架构</h4>
<ul>
<li>服务器始终在线，为多个客户端提供服务。</li>
<li>客户端不直接通信，通过服务器中转。</li>
<li>服务器具有固定、已知的IP地址。</li>
<li>常见应用：Web、FTP、Telnet、电子邮件。</li>
</ul>
<h4 id="对等网络p2p架构">对等网络（P2P）架构</h4>
<p>每个节点既可以作为客户端，也可以作为服务器.
<strong>也可以在一个通信会话中明确谁是 client、谁是
server</strong>：谁发起连接就是 client。</p>
<ul>
<li>最少或无依赖中心服务器。</li>
<li>直接在对等主机之间通信。</li>
<li>用户设备作为节点，自行上传和下载数据。</li>
<li>自扩展性强，资源利用率高。</li>
<li>成本低但面临安全与稳定性挑战。</li>
<li>示例：BitTorrent 文件共享。</li>
</ul>
<h3 id="进程通信">2.1.2 进程通信</h3>
<p>在网络中运行的其实不是“程序”，而是“<strong>进程（process）</strong>”在相互通信：</p>
<ul>
<li><strong>进程</strong>：在一个终端系统中运行的程序的实例（运行态的程序）。</li>
</ul>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="header">
<th>情况</th>
<th>通信方式</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>两个进程在<strong>同一个主机上</strong></td>
<td>使用
<strong>操作系统提供的进程间通信机制（如管道、消息队列、共享内存等）</strong></td>
</tr>
<tr class="even">
<td>两个进程在<strong>不同主机上</strong></td>
<td>必须通过
<strong>计算机网络进行通信</strong>，也就是我们重点要学习的内容</td>
</tr>
</tbody>
</table>
<h4 id="进程与套接字">进程与套接字</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250712230825414.png"
alt="image-20250712230825414" />
<figcaption aria-hidden="true">image-20250712230825414</figcaption>
</figure>
<ul>
<li>套接字就像进程用来<strong>收发消息的“门”</strong>。每个进程通过
socket 和网络打交道：
<ul>
<li>要发消息：<strong>把消息通过 socket 发出去</strong></li>
<li>要收消息：<strong>通过 socket 接收</strong></li>
</ul></li>
<li>网络应用由多台终端上的进程组成。</li>
<li>进程间通过交换消息通信。</li>
<li>消息通过“套接字”进出网络。在五层协议栈中，socket
位于<strong>应用层和传输层之间</strong></li>
<li>类比房屋与门：进程是房屋，套接字是门。</li>
</ul>
<h4 id="客户端与服务器进程定义">客户端与服务器进程定义</h4>
<ul>
<li>发起通信的进程为客户端。</li>
<li>等待连接的进程为服务器。</li>
<li>在特定会话中，一个进程可以同时是客户端和服务器。</li>
</ul>
<h4 id="地址标识">地址标识</h4>
<ul>
<li>主机通过IP地址唯一标识。</li>
<li>进程通过端口号识别。</li>
<li>常见端口：
<ul>
<li>Web服务器：80；</li>
<li>邮件服务器（SMTP）：25；</li>
<li>列表可在 <a target="_blank" rel="noopener" href="https://www.iana.org">iana.org</a> 查看。</li>
</ul></li>
</ul>
<h3 id="应用可获得的传输服务">2.1.3 应用可获得的传输服务</h3>
<h4 id="可靠数据传输">可靠数据传输</h4>
<ul>
<li>数据包可能在网络中丢失或损坏。</li>
<li>重要应用（如邮件、文件传输）需要可靠传输。</li>
<li>TCP 提供可靠数据传输服务。</li>
<li>多媒体应用容忍一定数据丢失。</li>
</ul>
<h4 id="吞吐量">吞吐量</h4>
<ul>
<li>吞吐量指发送方到接收方的数据传输速率。</li>
<li>传输协议可提供保证吞吐量的服务。</li>
<li>实时语音/视频应用需最低吞吐量保障。</li>
<li>弹性应用（如邮件）适应不同吞吐量。</li>
</ul>
<h4 id="时间延迟">时间延迟</h4>
<ul>
<li>传输延迟影响实时应用体验。</li>
<li>实时通信、多人游戏等要求严格时间控制。</li>
<li>非实时应用偏好低延迟但无硬性限制。</li>
</ul>
<h4 id="安全性">安全性</h4>
<ul>
<li>传输层可提供加密、完整性验证、身份认证。</li>
<li>TLS 是 TCP 的增强版，提供加密与安全服务。</li>
<li>UDP 不提供安全性，需上层实现。</li>
</ul>
<h3 id="internet-提供的传输服务">2.1.4 Internet 提供的传输服务</h3>
<h4 id="tcp-特性">TCP 特性</h4>
<ul>
<li>面向连接：握手建立连接，全双工通信。</li>
<li>可靠传输：确保数据完整有序到达。</li>
<li>流量控制：防止接收方缓冲区溢出。</li>
<li>拥塞控制：调节发送速率以避免网络拥塞。</li>
</ul>
<h4 id="udp-特性">UDP 特性</h4>
<ul>
<li>无连接：无需握手，直接发送数据。</li>
<li>不可靠传输：不保证数据送达或顺序。</li>
<li>适用于实时应用（如语音通话、游戏）。</li>
<li>缺乏拥塞控制，可能导致网络拥堵。</li>
</ul>
<h4 id="不提供的服务">不提供的服务</h4>
<ul>
<li>不保证吞吐量与时延。</li>
<li>实时应用需自身设计机制应对不确定性。</li>
</ul>
<h3 id="应用层协议">2.1.5 应用层协议</h3>
<ul>
<li>定义进程间消息格式、语义、交互规则。</li>
<li>公共协议如 HTTP、SMTP、FTP。</li>
<li>私有协议如 Skype 使用自有协议。</li>
<li>协议是网络应用的重要组成部分，但非全部。</li>
</ul>
<h3 id="本书涵盖的应用">2.1.6 本书涵盖的应用</h3>
<ul>
<li><strong>Web</strong>：HTTP 协议为核心。</li>
<li><strong>电子邮件</strong>：使用 SMTP、POP、IMAP。</li>
<li><strong>DNS</strong>：域名解析服务。</li>
<li><strong>视频流</strong>：基于 DASH 或其他协议。</li>
<li><strong>P2P 文件共享</strong>：如 BitTorrent。</li>
</ul>
<h2 id="web-与-http">2.2 Web 与 HTTP</h2>
<h3 id="http-概述">2.2.1 HTTP 概述</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716183657680.png"
alt="image-20250716183657680" />
<figcaption aria-hidden="true">image-20250716183657680</figcaption>
</figure>
<ul>
<li>HTTP 是 Web 的应用层协议。</li>
<li>客户端（浏览器）与服务器交互获取网页。</li>
<li>使用 TCP 作为传输协议。</li>
<li>无状态协议：每次请求独立处理。</li>
</ul>
<h3 id="http-请求方法">2.2.2 HTTP 请求方法</h3>
<ul>
<li>GET：请求文档。</li>
<li>POST：提交数据。</li>
<li>HEAD、PUT、DELETE 等用于其他用途。</li>
</ul>
<h3 id="http-响应状态码">2.2.3 HTTP 响应状态码</h3>
<ul>
<li>2xx：成功（如 200 OK）。</li>
<li>3xx：重定向。</li>
<li>4xx：客户端错误（如 404 Not Found）。</li>
<li>5xx：服务器错误（如 500 Internal Server Error）。</li>
</ul>
<h3 id="非持续与持续连接">2.2.4 非持续与持续连接</h3>
<ul>
<li><p>非持续连接：每个请求单独建立 TCP 连接。</p>
<p>HTTP1.0</p></li>
<li><p>持续连接：复用单个 TCP 连接发送多个请求。</p>
<p>HTTP1.1</p>
<ul>
<li><p><strong>同一个TCP连接可以重复使用</strong>，传输多个对象。</p>
<p>比如：HTML文件 +
多张图片可以通过<strong>同一个TCP连接</strong>发送，不需要重复建立连接。</p></li>
</ul></li>
</ul>
<h3 id="cookie">2.2.5 Cookie</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716183747165.png"
alt="image-20250716183747165" />
<figcaption aria-hidden="true">image-20250716183747165</figcaption>
</figure>
<ul>
<li>服务器通过 Set-Cookie 头设置 Cookie。</li>
<li>客户端在后续请求中携带 Cookie。</li>
<li>用于用户跟踪、个性化内容等。</li>
</ul>
<h3 id="web-缓存代理服务器">2.2.6 Web 缓存（代理服务器）</h3>
<ul>
<li>缓存服务器保存副本，减少原始服务器负载。是一个网络实体，<strong>代替原始Web服务器处理HTTP请求</strong>。一旦配置了Web缓存，用户的所有HTTP请求会<strong>先发送到缓存服务器</strong>，而不是直接发送给原始服务器（Origin
Server）。</li>
<li>减少响应时间，节省带宽。</li>
<li>使用 If-Modified-Since 验证缓存有效性。</li>
</ul>
<h3 id="内容分发网络cdn">内容分发网络（CDN）</h3>
<ul>
<li>CDN公司（如
Akamai、Limelight、Google、Netflix）在全球部署缓存节点；</li>
<li>通过<strong>地理分布式缓存</strong>，把内容推送到离用户最近的缓存服务器；</li>
<li>缓解源站压力、提高访问速度、降低延迟和成本。</li>
</ul>
<h3 id="条件-get">2.2.7 条件 GET</h3>
<ul>
<li>如果资源未修改，则返回 304 Not Modified。</li>
<li>减少不必要的数据传输。## 2.2 Web 与 HTTP</li>
</ul>
<h4 id="条件-get-流程">条件 GET 流程</h4>
<ul>
<li>缓存向服务器发送带 If-Modified-Since 的 GET 请求；</li>
<li>若对象未修改，服务器返回 304 Not Modified；</li>
<li>缓存继续使用本地副本；</li>
<li>若对象已修改，服务器返回新对象。</li>
</ul>
<h3 id="http2">2.2.7 HTTP/2</h3>
<p>HTTP1.1使用<strong>持久连接</strong>（即一个 TCP
连接可以传输多个请求/响应）。</p>
<p>但会遇到 <strong>队头阻塞（Head-of-Line Blocking）</strong>
问题。</p>
<blockquote>
<p>假设一个网页包含：</p>
<ul>
<li>HTML 页面；</li>
<li>一个大型视频；</li>
<li>多个小图片。</li>
</ul>
<p>如果使用一个 TCP
连接，视频会因为文件大而<strong>阻塞后面的小文件</strong>，导致页面渲染变慢。</p>
</blockquote>
<p><strong>HTTP/1.1 的方式：</strong></p>
<ul>
<li>一条高速公路（TCP连接）一次只能运送一个包裹（请求/响应）；</li>
<li>下一个包裹必须等前一个完全送完；</li>
<li>解决办法是修建多条平行的高速公路（多个 TCP 连接）来并发运送。</li>
</ul>
<p><strong>HTTP/2 的多路复用方式：</strong></p>
<ul>
<li>在<strong>一条高速公路上划分多条车道</strong>；</li>
<li>每条车道运送不同的包裹（请求/响应），彼此不干扰；</li>
<li>包裹可以拆成小块，分时轮流走路段，然后在终点重新组合。</li>
</ul>
<h4 id="http2-的目标">HTTP/2 的目标</h4>
<ul>
<li>减少感知延迟；</li>
<li>支持请求/响应多路复用；在<strong>一个通信通道（比如一条 TCP
连接）中</strong>，<strong>同时传输多个独立的数据流</strong>的一种技术。</li>
<li>提供请求优先级和服务器推送；</li>
<li>高效压缩头部字段。</li>
</ul>
<h4 id="http2-的核心技术">HTTP/2 的核心技术</h4>
<ul>
<li><strong>帧化（Framing）</strong>：<strong>核心思想</strong>：每条
HTTP 消息被切分成
<strong>多个小的帧（frame）</strong>，可以交错传输，不再按顺序排队。接收端重组帧后，恢复原始
HTTP 消息。</li>
<li><strong>优先级（Prioritization）</strong>：按权重优先传输重要对象；每个请求可以被赋予一个
<strong>权重（1~256）</strong>；客户端还可以设置请求之间的
<strong>依赖关系</strong>；服务器根据这些信息，决定哪个响应优先发送。</li>
<li><strong>服务器推送（Server
Push）</strong>：提前推送后续所需对象；服务器可在收到请求后<strong>主动推送其他资源</strong>服务器分析
HTML，提前将
JS、CSS、图片等资源发送过去；<strong>节省了等待客户端额外发起请求的时间</strong>，提高加载效率。</li>
<li><strong>二进制编码</strong>：提升解析效率，减少帧大小。</li>
</ul>
<h4 id="http2-的优势">HTTP/2 的优势</h4>
<ul>
<li>减少 TCP 连接数量；</li>
<li>避免 Head-of-Line（HOL）阻塞；</li>
<li>支持多路复用；</li>
<li>提升网页加载速度。</li>
</ul>
<h3 id="http3">2.2.8 HTTP/3</h3>
<h4 id="http3-的基础">HTTP/3 的基础</h4>
<ul>
<li>HTTP/3 是基于 QUIC 协议的新一代 HTTP 协议，它比 HTTP/2
更快、更稳定，尤其在弱网或移动环境下表现更好。</li>
<li>提供多路复用、流控、快速连接建立等特性。</li>
</ul>
<h4 id="http3-的特点">HTTP/3 的特点</h4>
<ul>
<li>许多 HTTP/2 功能由 QUIC 实现；</li>
<li>设计更简洁高效；</li>
<li>正在标准化中（截至 2020 年）。## 2.3 因特网中的电子邮件</li>
</ul>
<h3 id="smtp">2.3.1 SMTP</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716185149041.png"
alt="image-20250716185149041" />
<figcaption aria-hidden="true">image-20250716185149041</figcaption>
</figure>
<ul>
<li>SMTP
是因特网电子邮件的核心协议，用于从发送方邮件服务器向接收方邮件服务器传输邮件。</li>
<li>使用 TCP 提供的可靠数据传输服务。</li>
<li>邮件内容限制为 7 位 ASCII 编码，需对多媒体内容进行编码。</li>
<li>SMTP 客户端与服务器在发送邮件时直接通信，不使用中间邮件服务器。</li>
<li>示例流程：
<ul>
<li>Alice 使用用户代理编写邮件并发送；</li>
<li>邮件进入 Alice 邮件服务器的队列；</li>
<li>SMTP 客户端连接 Bob 邮件服务器并发送邮件；</li>
<li>Bob 邮件服务器接收邮件并存入其邮箱；</li>
<li>Bob 使用用户代理读取邮件。</li>
</ul>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716185217457.png"
alt="image-20250716185217457" />
<figcaption aria-hidden="true">image-20250716185217457</figcaption>
</figure></li>
<li>SMTP 会话示例包含命令：HELO、MAIL FROM、RCPT TO、DATA、QUIT。</li>
<li>SMTP 使用持久连接，可复用 TCP 连接发送多个邮件。</li>
</ul>
<h3 id="邮件消息格式">2.3.2 邮件消息格式</h3>
<ul>
<li>邮件消息由头部和正文组成，RFC 5322 定义了邮件格式。</li>
<li>头部信息包括：
<ul>
<li>From: 发件人地址；</li>
<li>To: 收件人地址；</li>
<li>Subject: 邮件主题；</li>
</ul></li>
<li>头部与正文之间以空行分隔（CRLF.CRLF）。</li>
<li>头部字段为可读文本格式，关键字后跟冒号和值。</li>
<li>邮件正文为 ASCII 文本。</li>
</ul>
<h3 id="邮件访问协议">2.3.3 邮件访问协议</h3>
<ul>
<li>SMTP 用于邮件从发送方服务器到接收方服务器的传输。</li>
<li>接收方使用 IMAP 或 HTTP 从邮件服务器获取邮件。</li>
<li>用户代理无法使用 SMTP 拉取邮件，因为 SMTP 是推送协议。</li>
<li>Web 邮件或移动应用使用 HTTP 获取邮件。</li>
<li>邮件客户端（如 Outlook）使用 IMAP 协议（RFC 3501）访问邮件。</li>
<li>IMAP
允许用户管理服务器上的邮件夹，支持移动、删除、标记等操作。<strong>IMAP /
HTTP：</strong> 收邮件用（“拉”邮件）；</li>
</ul>
<h2 id="dns-因特网的目录服务">2.4 DNS — 因特网的目录服务</h2>
<h3 id="dns-提供的服务">2.4.1 DNS 提供的服务</h3>
<ul>
<li>主要任务：将主机名解析为 IP 地址。</li>
<li>DNS 是一个分布式数据库，采用客户端-服务器架构。</li>
<li>DNS 协议运行在 UDP 上，使用端口 53。</li>
<li>应用层协议如 HTTP、SMTP 依赖 DNS 进行域名解析。</li>
<li>其他服务包括：
<ul>
<li>主机别名：提供更易记的主机名；</li>
<li>邮件服务器别名：使邮件地址更易记；</li>
<li>负载均衡：通过 DNS 轮换 IP 地址实现服务器负载分担。</li>
</ul></li>
</ul>
<h3 id="dns-工作原理概述">2.4.2 DNS 工作原理概述</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716185754478.png"
alt="image-20250716185754478" />
<figcaption aria-hidden="true">image-20250716185754478</figcaption>
</figure>
<ul>
<li><p>DNS 采用分布式、分层数据库结构。</p></li>
<li><p>包括三类服务器：</p>
<ul>
<li>根 DNS 服务器：全球分布的 13 组服务器；</li>
<li>顶级域（TLD）服务器：如 .com、.org、.edu；</li>
<li>权威 DNS 服务器：为特定域名提供解析；</li>
</ul></li>
<li><p>本地 DNS 服务器（Local DNS Server）：</p>
<ul>
<li>不属于 DNS 层级结构，但对 DNS 架构至关重要；</li>
<li>通常由 ISP 提供；</li>
<li>执行 DNS 查询代理功能；</li>
</ul></li>
<li><p>DNS 查询流程示例：</p>
<ul>
<li>查询 www.amazon.com：
<ul>
<li>它通过系统调用（如 <code>gethostbyname()</code>）请求 DNS。</li>
<li>你的电脑把请求交给本地的 <strong>本地 DNS
服务器</strong>（通常由你的运营商或学校提供）。</li>
<li>本地 DNS 服务器如果不知道答案，就会向互联网上其他 <strong>DNS
服务器组成的层级结构</strong>发出查询。</li>
</ul></li>
</ul>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716185915812.png"
alt="image-20250716185915812" />
<figcaption aria-hidden="true">image-20250716185915812</figcaption>
</figure></li>
</ul>
<p>用户主机 <code>cse.nyu.edu</code> 向其本地 DNS 服务器（如
<code>dns.nyu.edu</code>）发出请求；</p>
<p>本地服务器不知道，就向 <strong>根服务器</strong> 查询
<code>.edu</code>；</p>
<p>根服务器返回：你去找 <code>edu</code> 的 <strong>TLD
服务器</strong>；</p>
<p>TLD 服务器说：你去找 <code>umass.edu</code> 的
<strong>权威服务器</strong>（如 <code>dns.umass.edu</code>）；</p>
<p>权威服务器再告诉你 <code>gaia.cs.umass.edu</code> 的 IP 地址。</p>
<h3 id="dns-缓存">2.4.3 DNS 缓存</h3>
<p>DNS 服务器在收到一个查询的结果（即某个域名的 IP
地址）后，会临时把这个结果保存在本地内存中，以便下次快速回答同样的请求。</p>
<ul>
<li>DNS 缓存用于提升性能、减少网络流量。</li>
<li>DNS 服务器缓存查询结果，设定 TTL（生存时间）后删除。</li>
<li>本地 DNS 服务器缓存 TLD 地址后可跳过根服务器。</li>
<li>大多数 DNS 查询通过缓存完成，根服务器仅处理极小部分请求。</li>
</ul>
<h3 id="dns-记录与消息">2.4.4 DNS 记录与消息</h3>
<h4 id="dns-记录类型">DNS 记录类型</h4>
<ul>
<li>A 记录：主机名到 IPv4 地址映射；</li>
<li>AAAA 记录：主机名到 IPv6 地址映射；</li>
<li>NS 记录：域名到权威 DNS 服务器主机名；</li>
<li>CNAME 记录：别名主机名到规范主机名；</li>
<li>MX 记录：邮件服务器别名到规范主机名；</li>
<li>示例：
<ul>
<li>(relay1.bar.foo.com, 145.37.93.126, A)</li>
<li>(foo.com, dns.foo.com, NS)</li>
<li>(foo.com, relay1.bar.foo.com, CNAME)</li>
<li>(foo.com, mail.bar.foo.com, MX)</li>
</ul></li>
</ul>
<h4 id="dns-消息格式">DNS 消息格式</h4>
<ul>
<li>DNS 查询与响应消息格式相同：
<ul>
<li><strong>头部（12 字节）</strong>：
<ul>
<li>标识符（16 位）：匹配请求与响应；</li>
<li>标志位：查询/响应、权威、递归请求等；</li>
<li>四个数量字段：问题数、答案记录数、授权记录数、附加信息数；</li>
</ul></li>
<li><strong>问题部分</strong>：
<ul>
<li>查询名称与类型（如 A、MX）；</li>
</ul></li>
<li><strong>答案部分</strong>：
<ul>
<li>返回的资源记录（如 A、NS、CNAME、MX）；</li>
</ul></li>
<li><strong>授权部分</strong>：
<ul>
<li>其他权威服务器记录；</li>
</ul></li>
<li><strong>附加信息部分</strong>：
<ul>
<li>辅助信息（如 MX 响应中包含邮件服务器的 A 记录）；</li>
</ul></li>
</ul></li>
</ul>
<h3 id="向-dns-数据库插入记录">2.4.5 向 DNS 数据库插入记录</h3>
<ul>
<li>域名注册时需提供权威 DNS 服务器名称与 IP 地址；</li>
<li>注册商将 NS 与 A 记录插入 TLD 服务器；</li>
<li>示例：
<ul>
<li>注册 networkutopia.com；</li>
<li>插入 NS 记录：(networkutopia.com, dns1.networkutopia.com, NS)；</li>
<li>插入 A 记录：(dns1.networkutopia.com, 212.212.212.1, A)；</li>
</ul></li>
<li>需在权威 DNS 服务器中配置 Web
服务器（A）与邮件服务器（MX）记录；</li>
<li>DNS 动态更新协议（RFC 2136、RFC 3007）允许动态修改 DNS 记录。</li>
</ul>
<h3 id="dns-安全漏洞">2.4.6 DNS 安全漏洞</h3>
<ul>
<li>DDoS 攻击：如 2002 年攻击根服务器、2016 年攻击 Dyn；</li>
<li>中间人攻击：伪造 DNS 响应；</li>
<li>DNS 缓存投毒：欺骗 DNS 服务器缓存虚假记录；</li>
<li>DNSSEC：提供安全扩展，防止伪造与篡改；</li>
<li>DNSSEC 正在逐步部署，提升 DNS 安全性。## 2.5 对等文件分发</li>
</ul>
<h3 id="p2p-架构的可扩展性">P2P 架构的可扩展性</h3>
<h4 id="客户端-服务器架构与-p2p-架构对比">客户端-服务器架构与 P2P
架构对比</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716190513241.png"
alt="image-20250716190513241" />
<figcaption aria-hidden="true">image-20250716190513241</figcaption>
</figure>
<ul>
<li><strong>客户端-服务器架构的分布时间</strong>：
<ul>
<li>服务器需为每个对等方传输一个文件副本，总传输量为
<code>N × F</code>。</li>
<li>分布时间下限：<code>Dcs = max(NF/us, F/dmin)</code>。</li>
<li>随着对等方数量增加，分布时间线性增长。服务器压力越来越大，<strong>扩展性差</strong>。</li>
</ul></li>
<li><strong>P2P 架构的分布时间</strong>：
<ul>
<li>每个对等方可重新分配已接收的数据。不仅服务器上传，<strong>用户之间也互相上传和分发</strong>。</li>
<li>下限公式：<code>DP2P = max(F/us, F/dmin, NF/(us + u1 + ... + uN))</code>。</li>
<li>网络整体上传能力提升，分布时间更短。</li>
<li>自我扩展性强，适合大规模文件分发。</li>
</ul></li>
</ul>
<h4 id="bittorrent-协议">BitTorrent 协议</h4>
<ul>
<li><strong>基本机制</strong>：
<ul>
<li>文件被分割为 256KB 的块。</li>
<li>用户加入“种子”后逐步下载并上传数据块。</li>
<li>可选择继续共享或离开网络。</li>
</ul></li>
<li><strong>追踪器（Tracker）的作用</strong>：
<ul>
<li>维护当前参与的对等方列表。</li>
<li>新用户加入时随机选取部分对等方提供连接信息。</li>
</ul></li>
<li><strong>邻居节点管理</strong>：
<ul>
<li>建立 TCP 连接后定期更新可用数据块信息。</li>
<li>使用“稀有优先”策略请求数据块，提高整体传播效率。</li>
</ul></li>
<li><strong>流量激励机制（Tit-for-Tat）</strong>：
<ul>
<li>优先向上传速率高的邻居发送数据。</li>
<li>每 30 秒随机选择新节点进行测试，促进公平交换。</li>
</ul></li>
</ul>
<hr />
<h2 id="视频流与内容分发网络">2.6 视频流与内容分发网络</h2>
<h3 id="互联网视频基础">互联网视频基础</h3>
<ul>
<li><strong>视频特性</strong>：
<ul>
<li>数据率高，压缩后仍可达 100kbps 至 4Mbps。</li>
<li>多版本编码支持不同带宽环境。</li>
</ul></li>
<li><strong>性能指标</strong>：
<ul>
<li>平均端到端吞吐量是关键。</li>
<li>必须满足视频码率需求以保证流畅播放。</li>
</ul></li>
</ul>
<h3 id="http-流媒体与-dash">HTTP 流媒体与 DASH</h3>
<p>在最初的 HTTP 视频流传输中：</p>
<ol type="1">
<li>视频文件就像普通网页资源一样，被存储在服务器上，拥有一个固定的
URL。</li>
<li>用户想要观看视频时：
<ul>
<li>客户端通过 <strong>TCP 建立连接</strong>，向该 URL 发送一个
<strong>HTTP GET 请求</strong>。</li>
<li>服务器会把整个视频文件作为响应内容返回。</li>
</ul></li>
<li>客户端接收数据后，会将字节缓存在 <strong>应用缓冲区</strong>
中。</li>
<li>一旦缓冲区里的数据超过某个<strong>播放阈值</strong>，客户端开始播放视频：
<ul>
<li>视频播放器定期从缓冲区中提取帧（frame），解码并显示。</li>
<li>这使得<strong>边接收边播放</strong>成为可能。</li>
</ul></li>
</ol>
<ul>
<li><p><strong>HTTP 流媒体问题</strong>：</p>
<ul>
<li>所有客户端接收相同编码，无法适应带宽变化。</li>
</ul></li>
<li><p><strong>DASH（动态自适应流媒体）</strong>：</p>
<p>将视频编码成多个<strong>不同版本</strong>：</p>
<ul>
<li>每个版本对应一个不同的<strong>比特率</strong>（低画质、中画质、高画质）。</li>
<li>每个版本的视频被<strong>切分成多个小段（chunk）</strong>，每段持续几秒钟。</li>
</ul>
<p>客户端不再一次性请求整个视频，而是：</p>
<ul>
<li>先获取一个 <strong>manifest 文件</strong>（描述不同版本的 URL
和码率信息）。</li>
<li>然后<strong>一个 chunk 一个 chunk 地用 HTTP GET
请求</strong>下载。</li>
</ul>
<p>客户端在每次请求 chunk
时，<strong>根据当前带宽和缓冲状态</strong>来决定选择哪个版本（高码率 or
低码率）。</p></li>
</ul>
<h3 id="内容分发网络cdn-1">内容分发网络（CDN）</h3>
<ul>
<li><strong>传统单数据中心方案的问题</strong>：
<ul>
<li>跨洲际链路可能成为瓶颈。</li>
<li>同一内容重复传输浪费带宽。</li>
<li>单点故障风险高。</li>
</ul></li>
<li><strong>CDN 设计理念</strong>：
<ul>
<li>全球部署多个服务器集群。</li>
<li>缓存热门内容减少回源压力。</li>
<li>根据地理位置和网络状况选择最佳 CDN 节点。</li>
</ul></li>
<li><strong>两种部署策略</strong>：
<ul>
<li><strong>Enter Deep</strong>（深入接入网）：
<ul>
<li>Akamai 方案，在 ISP 内部部署大量小型集群。</li>
<li>更接近终端用户，降低延迟。</li>
<li>管理复杂度高。</li>
</ul></li>
<li><strong>Bring Home</strong>（集中式）：
<ul>
<li>Limelight 方案，在少量 IXP 地点部署大型集群。</li>
<li>管理成本低但可能牺牲部分性能。</li>
</ul></li>
</ul></li>
<li><strong>CDN 内容复制机制</strong>：
<ul>
<li>不强制推送所有内容。</li>
<li>使用拉取策略，按需缓存热门内容。</li>
<li>存储满时淘汰不常访问的内容。</li>
</ul></li>
</ul>
<hr />
<h2 id="套接字编程创建网络应用">2.7 套接字编程：创建网络应用</h2>
<h3 id="udp-套接字编程">UDP 套接字编程</h3>
<ul>
<li><strong>客户端流程</strong>：
<ul>
<li>创建 UDP 套接字。</li>
<li>输入文本并发送至服务器。</li>
<li>接收处理后的响应并显示。</li>
<li>关闭套接字。</li>
</ul></li>
<li><strong>服务器流程</strong>：
<ul>
<li>创建绑定端口的 UDP 套接字。</li>
<li>接收客户端请求。</li>
<li>将文本转为大写后返回。</li>
<li>循环等待下一个请求。</li>
</ul></li>
<li><strong>代码示例</strong>：
<ul>
<li><code>UDPClient.py</code>：发送请求、接收响应。</li>
<li><code>UDPServer.py</code>：监听端口、处理请求。</li>
</ul></li>
</ul>
<h3 id="tcp-套接字编程">TCP 套接字编程</h3>
<ul>
<li><strong>TCP 特性</strong>：
<ul>
<li>面向连接，确保数据有序可靠传输。</li>
<li>客户端主动发起连接（三次握手）。</li>
<li>服务器使用欢迎套接字接受连接，并创建专用连接套接字。</li>
</ul></li>
<li><strong>客户端流程</strong>：
<ul>
<li>创建 TCP 套接字并连接服务器。</li>
<li>发送文本请求。</li>
<li>接收响应并关闭连接。</li>
</ul></li>
<li><strong>服务器流程</strong>：
<ul>
<li>创建监听套接字并绑定端口。</li>
<li>接受连接并创建专用套接字。</li>
<li>处理请求后关闭连接套接字。</li>
</ul></li>
<li><strong>代码示例</strong>：
<ul>
<li><code>TCPClient.py</code>：建立连接、发送/接收数据。</li>
<li><code>TCPServer.py</code>：监听、接受连接、处理请求。</li>
</ul></li>
</ul>
<hr />
<h2 id="总结">2.8 总结</h2>
<ul>
<li><strong>P2P 架构优势</strong>：
<ul>
<li>自我扩展性强，适合大规模文件分发。</li>
<li>BitTorrent 采用稀有优先与 Tit-for-Tat 机制实现高效协作。</li>
</ul></li>
<li><strong>视频流技术发展</strong>：
<ul>
<li>DASH 支持自适应码率切换，提升用户体验。</li>
<li>CDN 通过全球部署优化内容分发效率。</li>
</ul></li>
<li><strong>套接字编程基础</strong>：
<ul>
<li>UDP 提供无连接通信，适用于实时场景。</li>
<li>TCP 提供可靠连接，适用于需要数据完整性的应用。</li>
<li>Python 示例展示了基本的客户端-服务器交互模型。## 2.8 总结与回顾</li>
</ul></li>
</ul>
<h3 id="本章核心内容回顾">本章核心内容回顾</h3>
<h4 id="网络应用架构-1">网络应用架构</h4>
<ul>
<li><strong>客户端-服务器架构</strong>：
<ul>
<li>被多数互联网应用采用。</li>
<li>服务器始终在线，拥有固定IP地址。</li>
<li>应用于HTTP、SMTP、DNS等协议。</li>
</ul></li>
<li><strong>P2P架构</strong>：
<ul>
<li>减少对中心服务器的依赖。</li>
<li>对等节点之间直接通信。</li>
<li>高扩展性，但存在安全和稳定性挑战。</li>
<li>示例：BitTorrent 文件共享。</li>
</ul></li>
</ul>
<h4 id="应用层协议-1">应用层协议</h4>
<ul>
<li><strong>HTTP</strong>：
<ul>
<li>Web的核心协议。</li>
<li>使用TCP传输，无状态。</li>
<li>支持GET、POST等请求方法及缓存机制（如条件GET）。</li>
</ul></li>
<li><strong>SMTP/POP/IMAP</strong>：
<ul>
<li>电子邮件相关协议。</li>
<li>SMTP用于邮件发送，POP/IMAP用于接收。</li>
</ul></li>
<li><strong>DNS</strong>：
<ul>
<li>域名解析服务。</li>
<li>将域名转换为IP地址。</li>
</ul></li>
<li><strong>CDN与视频流</strong>：
<ul>
<li>CDN提升视频分发效率。</li>
<li>DASH支持自适应码率流媒体。</li>
</ul></li>
</ul>
<h4 id="socket编程">Socket编程</h4>
<ul>
<li><strong>TCP套接字</strong>：
<ul>
<li>面向连接，可靠数据传输。</li>
<li>服务器需监听并接受连接，每个连接使用独立套接字。</li>
</ul></li>
<li><strong>UDP套接字</strong>：
<ul>
<li>无连接，不保证可靠性。</li>
<li>更低延迟，适用于实时应用。</li>
</ul></li>
</ul>
<h3 id="协议理解深化">协议理解深化</h3>
<ul>
<li>协议不仅定义消息格式和顺序，还包括行为逻辑。</li>
<li>TCP提供可靠传输、流量控制和拥塞控制。</li>
<li>UDP简单高效，适合对时延敏感的应用。</li>
<li>TLS在TCP基础上提供加密和安全性。</li>
</ul>
<h3 id="后续章节展望">后续章节展望</h3>
<ul>
<li>下一章将深入研究传输层协议（TCP/UDP）的工作原理。</li>
<li>探讨如何实现可靠传输、流量控制和拥塞控制等机制。### Socket
编程实验</li>
</ul>
<h4 id="实验一web-服务器">实验一：Web 服务器</h4>
<ul>
<li>开发一个简单的 Web 服务器，能处理单个 HTTP 请求。</li>
<li>创建连接套接字、接收请求、解析文件名、获取文件内容。</li>
<li>构建 HTTP 响应并发送给客户端。</li>
<li>若文件不存在，返回“404 Not Found”。</li>
<li>提供骨架代码，需自行完成并测试。</li>
</ul>
<h4 id="实验二udp-pinger">实验二：UDP Pinger</h4>
<ul>
<li>编写 UDP 客户端，向服务器发送 10 次 ping 请求。</li>
<li>计算往返时延 RTT。</li>
<li>设置超时为 1 秒，若未收到响应则认为丢失。</li>
<li>服务器代码已提供，需编写客户端代码。</li>
</ul>
<h4 id="实验三邮件客户端">实验三：邮件客户端</h4>
<ul>
<li>使用 SMTP 协议与邮件服务器建立 TCP 连接。</li>
<li>发送电子邮件，并关闭连接。</li>
<li>提供骨架代码，需自行完成并测试（如使用 Google
或学校邮箱服务器）。</li>
</ul>
<h4 id="实验四web-代理">实验四：Web 代理</h4>
<ul>
<li>开发支持缓存的 Web 代理服务器。</li>
<li>接收浏览器请求，向原始服务器转发。</li>
<li>获取响应后返回给客户端。</li>
<li>提供骨架代码，需完成并测试。</li>
</ul>
<hr />
<h3 id="wireshark-实验">Wireshark 实验</h3>
<h4 id="wireshark-lab-http">Wireshark Lab: HTTP</h4>
<ul>
<li>分析 HTTP GET/响应交互过程。</li>
<li>观察消息格式、大文件传输、嵌入 URL 文件下载。</li>
<li>研究持续连接与非持续连接差异。</li>
<li>包含身份验证和安全性相关内容。</li>
<li>完整实验说明请访问 www.pearsonhighered.com/cs-resources。</li>
</ul>
<h4 id="wireshark-lab-dns">Wireshark Lab: DNS</h4>
<ul>
<li>观察 DNS 客户端行为。</li>
<li>发送域名查询请求，接收 IP 地址响应。</li>
<li>理解 DNS 层级结构背后的递归与迭代查询机制。</li>
<li>客户端仅与本地 DNS 服务器交互。</li>
<li>完整实验说明请访问 www.pearsonhighered.com/cs-resources。</li>
</ul>
<hr />
<h3 id="人物访谈tim-berners-lee">人物访谈：Tim Berners-Lee</h3>
<h4 id="背景介绍">背景介绍</h4>
<ul>
<li>万维网发明者，提出 HTTP 协议原型。</li>
<li>2016 年图灵奖获得者。</li>
<li>现任牛津大学和 MIT 教授。</li>
</ul>
<h4 id="网络与物理的关系">网络与物理的关系</h4>
<ul>
<li>类似于从微观规则推导宏观世界，网络设计也是构建规则以实现大规模系统目标。</li>
<li>一个是分析，一个是设计，但思维方式相似。</li>
</ul>
<h4 id="为何选择网络方向">为何选择网络方向</h4>
<ul>
<li>微处理器兴起时期，通信行业正转向基于微处理器的系统。</li>
<li>电信领域充满创新机会。</li>
</ul>
<h4 id="工作中的挑战">工作中的挑战</h4>
<ul>
<li>在不同意见之间找到共识，推动标准统一。</li>
<li>需要深入理解各方立场，消除误解。</li>
</ul>
<h4 id="启发他的人">启发他的人</h4>
<ul>
<li>父母早期参与计算机工作，激发兴趣。</li>
<li>CERN 的 Mike Sendall 和 Peggie Rimmer 给予指导和支持。</li>
<li>受 Vanevar Bush、Doug Englebart、Ted Nelson 思想启发。</li>
</ul>
<h1 id="传输层">传输层</h1>
<h2 id="引言与传输层服务">3.1 引言与传输层服务</h2>
<h3 id="传输层与网络层的关系">3.1.1 传输层与网络层的关系</h3>
<ul>
<li>传输层位于网络层之上，提供进程间的逻辑通信。</li>
<li>网络层负责主机之间的逻辑通信。</li>
<li>类比邮政系统：网络层负责房屋间通信，传输层负责屋内人员之间的信件传递。</li>
<li>传输协议运行在终端系统中，不涉及中间路由器。</li>
<li>多个传输协议可共存，如TCP和UDP。</li>
</ul>
<h3 id="internet中的传输层概述">3.1.2 Internet中的传输层概述</h3>
<ul>
<li>Internet提供两种传输协议：UDP（不可靠、无连接）和TCP（可靠、面向连接）。</li>
<li>UDP适用于实时应用（如语音通话），TCP适用于需可靠传输的应用（如网页浏览）。</li>
<li>TCP通过流量控制、序列号、确认应答等机制实现可靠传输。</li>
<li>UDP仅提供基本的多路复用/解复用和错误检测功能。</li>
<li>IP是网络层协议，提供尽力而为的服务，不保证数据完整性或顺序。</li>
<li>TCP/IP模型中，传输层扩展IP服务至进程级通信。</li>
</ul>
<h2 id="多路复用与解复用">3.2 多路复用与解复用</h2>
<p>传输层不会直接把数据给进程，而是先给一个中介“套接字”（socket）。</p>
<p>一台主机上可能有多个套接字，且每个套接字有唯一标识。</p>
<p>这个标识就是<strong>端口号（port
number）</strong>，用来区分不同的套接字。</p>
<h3 id="基本概念-1">3.2.1 基本概念</h3>
<ul>
<li>多路复用：将来自不同套接字的数据封装成段，并添加头部信息。</li>
<li>解复用：接收端根据段头字段将数据交付给正确的套接字。</li>
<li>每个套接字由端口号唯一标识。</li>
<li>UDP和TCP使用源端口和目的端口字段进行解复用。</li>
</ul>
<h3 id="udp多路复用与解复用">3.2.2 UDP多路复用与解复用</h3>
<ul>
<li>UDP套接字由二元组（目标IP地址 + 目标端口号）标识。</li>
<li>不同源IP或端口但相同目标端口的UDP段被交付同一套接字。</li>
<li>源端口用于返回响应时作为目标端口。</li>
</ul>
<h3 id="tcp多路复用与解复用">3.2.3 TCP多路复用与解复用</h3>
<ul>
<li>TCP套接字由四元组（源IP、源端口、目标IP、目标端口）标识。</li>
<li>不同连接即使目标端口相同，也会分配不同套接字。</li>
<li>服务器创建“欢迎套接字”监听连接请求，接受后生成新套接字处理每个连接。</li>
</ul>
<h3 id="安全相关端口扫描">3.2.4 安全相关：端口扫描</h3>
<ul>
<li>攻击者利用端口扫描探测开放端口以定位潜在漏洞。</li>
<li>工具nmap可用于TCP和UDP端口扫描。</li>
<li>典型案例：SQL
Server在端口1434存在缓冲区溢出漏洞，Slammer蠕虫曾借此攻击。</li>
</ul>
<h2 id="无连接传输udp">3.3 无连接传输：UDP</h2>
<h3 id="udp段结构">3.3.1 UDP段结构</h3>
<ul>
<li>包含四个字段：源端口、目标端口、长度、校验和。</li>
<li>长度字段表示整个UDP段（包括头部）的字节数。</li>
<li>校验和用于错误检测。</li>
</ul>
<h3 id="udp校验和">3.3.2 UDP校验和</h3>
<ul>
<li>发送方计算所有16位字的反码和，并放入校验和字段。</li>
<li>接收方重新计算并验证是否全为1，若否，则说明有误。</li>
<li>即使链路层已做错误检测，UDP仍需校验和确保端到端可靠性。</li>
</ul>
<h3 id="使用udp的原因">3.3.3 使用UDP的原因</h3>
<ul>
<li>更细粒度的控制：应用可直接决定何时发送数据。</li>
<li>无需建立连接：避免延迟，适合DNS、流媒体等。</li>
<li>无连接状态：服务器可支持更多客户端。</li>
<li>小头部开销（8字节 vs TCP的20字节）。</li>
</ul>
<h3 id="应用场景">3.3.4 应用场景</h3>
<ul>
<li>DNS、SNMP、多媒体应用常使用UDP。</li>
<li>QUIC基于UDP实现可靠性，在应用层实现拥塞控制等特性。</li>
<li>缺乏拥塞控制可能导致网络拥堵，需应用层自行实现。</li>
</ul>
<h2 id="可靠数据传输原理rdt">3.4 可靠数据传输原理（RDT）</h2>
<h3 id="rdt基础">3.4.1 RDT基础</h3>
<ul>
<li>数据可能丢失、损坏或乱序，需设计可靠传输机制。</li>
<li>核心技术：确认应答（ACK）、重传、定时器、序列号。</li>
</ul>
<h3 id="逐步构建rdt方案">3.4.2 逐步构建RDT方案</h3>
<h4 id="版本rdt1.0">版本rdt1.0</h4>
<ul>
<li>假设底层通信信道完全可靠（不会丢包、不丢比特、不乱序），协议非常简单。</li>
</ul>
<h4 id="版本rdt2.0">版本rdt2.0</h4>
<ul>
<li>现实中信道会有比特错误，传输的包可能被破坏.需要加入<strong>错误检测机制</strong>（例如校验和
checksum）来检测包是否被破坏</li>
<li>使用停等协议（Stop-and-Wait），接收方发送ACK或NAK。需要<strong>接收方反馈</strong>给发送方：
<ul>
<li><strong>ACK（肯定确认）</strong>表示包收到了且没错。</li>
<li><strong>NAK（否定确认）</strong>表示包出错，请求重传。</li>
</ul></li>
<li>若NAK，发送方重传当前数据包。</li>
</ul>
<h4 id="版本rdt2.1">版本rdt2.1</h4>
<ul>
<li>改进版本，使用ACK+序列号应对重复包问题。</li>
<li>发送方维护当前数据包副本，等待ACK后释放。</li>
<li>接收方通过序列号判断是否为重复包。</li>
</ul>
<h4 id="版本rdt2.2">版本rdt2.2</h4>
<ul>
<li>仅使用ACK，用ACK携带期望下一次收到的序列号。当接收方收到损坏包或重复包时，不发送NAK，而是重发上一个正确包的ACK（也叫重复ACK）。</li>
<li>减少NAK的使用，提高效率。这种机制简化了协议设计。</li>
</ul>
<h4 id="版本rdt3.0">版本rdt3.0</h4>
<ul>
<li>考虑丢包问题，引入超时重传机制。</li>
<li>发送方设置定时器，超时则重传未确认的数据包。</li>
<li>通过序列号识别重复包并丢弃。</li>
</ul>
<h2 id="面向连接的传输tcp">3.5 面向连接的传输：TCP</h2>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716192622297.png"
alt="image-20250716192622297" />
<figcaption aria-hidden="true">image-20250716192622297</figcaption>
</figure>
<h3 id="tcp概述">3.5.1 TCP概述</h3>
<ul>
<li>提供可靠数据传输、流量控制、拥塞控制。</li>
<li>面向字节流，而非消息流。</li>
<li>每个TCP连接由四元组唯一标识。</li>
</ul>
<h3 id="tcp段结构">3.5.2 TCP段结构</h3>
<ul>
<li>包含源端口、目标端口、序列号、确认号、首部长度、标志位、窗口大小、校验和、选项等字段。</li>
<li>序列号标识数据字节，而非段本身。</li>
<li>确认号表示期望收到的下一个字节编号。</li>
</ul>
<h3 id="rtt估计与超时">3.5.3 RTT估计与超时</h3>
<ul>
<li>使用指数加权移动平均估算往返时间（RTT）。</li>
<li>超时时间 = EstimatedRTT + 4 * DevRTT。</li>
</ul>
<h3 id="可靠数据传输-1">3.5.4 可靠数据传输</h3>
<ul>
<li><p>问题： TCP连接的两端都会为连接预留一块接收缓冲区（receive
buffer）。接收端接收到的数据正确且顺序到达后，会先存放到这个缓冲区中，等待应用程序读取。但应用程序读取数据的速度可能慢于数据到达的速度，导致缓冲区被写满，进而可能发生溢出。TCP通过流量控制机制防止发送方发送过快，导致接收方缓冲区溢出。换句话说，流量控制是一种速度匹配机制，使发送方的发送速度与接收方应用程序的读取速度相匹配。</p></li>
<li><p>流量控制的工作流程</p>
<ol type="1">
<li><p><strong>接收方 Host B</strong> 会在它发送给发送方 Host A
的每个TCP段中，填入当前的 <code>rwnd</code>
值，告知发送方缓冲区还剩多少空间。</p></li>
<li><p><strong>发送方 Host A</strong> 维护两个变量：</p>
<ul>
<li><code>LastByteSent</code>：发送的最后一个字节序号</li>
<li><code>LastByteAcked</code>：已被确认（ACK）的最后一个字节序号</li>
</ul></li>
<li><p>发送方控制未被确认的数据量不超过接收窗口大小： <span
class="math display">\[
\text{LastByteSent} - \text{LastByteAcked} \leq \text{rwnd}
\]</span>
这样确保发送的数据不会超过接收方缓冲区剩余空间，避免溢出。</p></li>
</ol></li>
</ul>
<h4 id="特殊情况接收窗口为零">特殊情况：接收窗口为零</h4>
<ul>
<li>当接收方缓冲区满了，<code>rwnd = 0</code>，它会告诉发送方当前没有空间了。</li>
<li>如果接收方此时没有数据要发送给发送方，它也不会主动发送带有新的窗口大小的TCP段。</li>
<li>结果就是发送方一直阻塞，无法知道缓冲区何时腾出空间。</li>
<li><strong>解决办法</strong>：
TCP规定，发送方在接收到<code>rwnd = 0</code>后，仍应发送带有1字节数据的探测段（称为“窗口探测”），接收方确认后才会更新窗口大小，告诉发送方缓冲区已经有空间了。</li>
</ul>
<h3 id="连接管理">3.5.6 连接管理</h3>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716193130180.png"
alt="image-20250716193130180" />
<figcaption aria-hidden="true">image-20250716193130180</figcaption>
</figure>
<h4 id="三次握手">三次握手</h4>
<ul>
<li>客户端发送SYN段发起连接。</li>
<li>服务器回应SYN-ACK。</li>
<li>客户端发送ACK完成连接。</li>
</ul>
<h4 id="四次挥手">四次挥手</h4>
<figure>
<img src="https://fyindex.work/PicGo/image-20250716193200952.png"
alt="image-20250716193200952" />
<figcaption aria-hidden="true">image-20250716193200952</figcaption>
</figure>
<ul>
<li>客户端发送FIN段关闭连接。</li>
<li>服务器回应ACK。</li>
<li>服务器发送FIN段关闭连接。</li>
<li>客户端回应ACK，进入TIME_WAIT状态。</li>
</ul>
<h2 id="拥塞控制原理">3.6 拥塞控制原理</h2>
<h3 id="拥塞原因与影响">3.6.1 拥塞原因与影响</h3>
<ul>
<li>当发送速率超过网络承载能力时，导致队列溢出、丢包、延迟增加。</li>
<li>无控制的UDP流量可能加剧拥塞。</li>
</ul>
<h3 id="拥塞控制方法">3.6.2 拥塞控制方法</h3>
<ul>
<li><p>端到端控制：依赖发送方调节速率（如TCP）。</p>
<ul>
<li>在这种方法中，<strong>网络层不会向传输层提供任何有关拥塞状态的直接反馈信息</strong>。</li>
<li>端系统（即发送方和接收方）必须通过观测网络行为（如：丢包、延迟增加）<strong>间接判断</strong>是否发生了拥塞。</li>
<li>TCP
就是采用这种方法。比如，如果发送方发现数据包丢失（比如发生超时或收到 3
个重复
ACK），就认为是网络发生了拥塞，会相应地降低发送速率（通过减小窗口）。</li>
</ul></li>
<li><p>网络辅助控制：路由器反馈拥塞信号（如ECN）。</p>
<ul>
<li><p>在这种方法中，<strong>路由器或网络设备会提供明确的拥塞反馈信息</strong>给发送方和/或接收方。</p>
<p>反馈方式可能是：</p>
<ul>
<li><strong>直接反馈</strong>：路由器发送一个阻塞包（choke
packet）告知发送方“我这边拥塞了”。</li>
<li><strong>间接反馈</strong>：路由器在数据包中标记拥塞信息，这个包到达接收方后，由接收方再通知发送方。</li>
</ul></li>
<li><p>例如，在 ATM 网络中的 ABR（Available Bit
Rate）机制，路由器会告诉主机它可以支持的最大发送速率。</p></li>
<li><p>虽然 IP 和 TCP
默认采用端到端控制方式，但也可以在一些新机制中使用网络辅助控制。</p></li>
</ul></li>
</ul>
<h2 id="tcp拥塞控制">3.7 TCP拥塞控制</h2>
<h3 id="控制机制">3.7.1 控制机制</h3>
<ul>
<li><p>TCP 使用一个变量 <strong>cwnd（congestion
window，拥塞窗口）</strong>
来限制发送方的发送速率。发送方未被确认的数据量必须小于
cwnd（忽略接收端窗口限制 rwnd 时）。</p>
<ul>
<li><strong>发生丢包事件</strong>（loss event）表示可能发生了拥塞：
<ul>
<li><strong>超时重传</strong>；</li>
<li><strong>收到三个重复的 ACK</strong>（即 fast retransmit）。</li>
</ul></li>
</ul>
<p>TCP 把这类事件作为网络拥塞的指示，适当降低 cwnd</p></li>
<li><p>初始慢启动阶段，cwnd呈指数增长。</p></li>
<li><p>达到阈值后进入拥塞避免阶段，线性增长。</p></li>
<li><p>收到3个重复ACK触发快速重传和快速恢复。</p></li>
</ul>
<h3 id="性能优化">3.7.2 性能优化</h3>
<ul>
<li>TCP Tahoe：超时后cwnd重置为1。
<ul>
<li>初始时 cwnd 设置为 1 MSS，发送一个分段等待 ACK。每收到一个 ACK，cwnd
增加 1 MSS。每个 RTT 内，发送速率
<strong>呈指数增长</strong>（1、2、4、8……）。</li>
</ul></li>
<li>TCP Reno：区分超时和重复ACK，提升性能。</li>
</ul>
<h2 id="quic协议简介">3.8 QUIC协议简介</h2>
<ul>
<li>基于UDP实现可靠传输、拥塞控制和安全加密。</li>
<li>在应用层实现，减少连接建立延迟。</li>
<li>支持多路复用、前向纠错等功能。</li>
<li>广泛应用于现代Web浏览器（如Google Chrome）。## 3.4
可靠数据传输原理</li>
</ul>
<h3 id="构建可靠数据传输协议">3.4.1 构建可靠数据传输协议</h3>
<h4 id="可靠通道上的数据传输rdt1.0">可靠通道上的数据传输：rdt1.0</h4>
<ul>
<li>协议假设底层信道完全可靠。</li>
<li>发送方接收上层数据并创建包含数据的包。</li>
<li>接收方接收包，提取数据并传递给上层。</li>
<li>没有差错检测或反馈机制。</li>
</ul>
<h4 id="带比特错误的通道rdt2.0">带比特错误的通道：rdt2.0</h4>
<ul>
<li>数据包可能被损坏，引入差错检测（校验和）。</li>
<li>使用确认（ACK）和否定确认（NAK）进行反馈。</li>
<li>出现错误时重传数据包。</li>
<li>存在ACK/NAK损坏问题，需要进一步改进。</li>
</ul>
<h4 id="序列号与重复包处理rdt2.1">序列号与重复包处理：rdt2.1</h4>
<ul>
<li>引入序列号解决重复包问题。</li>
<li>发送方维护当前发送的数据包副本。</li>
<li>接收方通过序列号判断是否为重复包。</li>
<li>改进版本使用ACK携带期望的下一个序列号（rdt2.2）。</li>
</ul>
<h4 id="丢包通道rdt3.0">丢包通道：rdt3.0</h4>
<ul>
<li>考虑数据包丢失问题，引入超时重传机制。</li>
<li>发送方设置定时器，超时则重传未确认数据包。</li>
<li>通过序列号识别并丢弃重复包。</li>
<li>称为“交替位协议”，序列号在0和1之间切换。</li>
</ul>
<h3 id="流水线式可靠数据传输协议">3.4.2 流水线式可靠数据传输协议</h3>
<h4 id="性能问题">性能问题</h4>
<ul>
<li>rdt3.0是停等协议，利用率极低。</li>
<li>在高带宽、长延迟网络中性能差。</li>
<li>示例：1 Gbps链路上传输1000字节数据包，利用率仅0.027%。</li>
</ul>
<h4 id="解决方案流水线">解决方案：流水线</h4>
<ul>
<li>允许多个未确认包同时在管道中传输。</li>
<li>提高发送端利用率，提升吞吐量。</li>
<li>需要更大的序列号空间和缓冲区。</li>
</ul>
<h3 id="回退n步go-back-n-gbn">3.4.3 回退N步（Go-Back-N, GBN）</h3>
<h4 id="协议机制">协议机制</h4>
<ul>
<li>发送窗口大小为N，允许最多N个未确认包。</li>
<li>接收方只按序接收，丢弃乱序包。</li>
<li>累积确认机制，收到ACK表示之前所有包都已正确接收。</li>
<li>出现超时时，发送方重传所有未确认包。</li>
</ul>
<h4 id="发送方事件与动作">发送方事件与动作</h4>
<ul>
<li><strong>调用来自上层</strong>：检查窗口是否满，若不满则发送包并更新变量。</li>
<li><strong>收到ACK</strong>：视为累积确认，移动窗口基值。</li>
<li><strong>超时事件</strong>：重传所有未确认包，重启定时器。</li>
</ul>
<h4 id="接收方行为">接收方行为</h4>
<ul>
<li>正确按序接收：发送ACK并交付数据。</li>
<li>乱序接收：丢弃包并重新发送最近收到的ACK。</li>
</ul>
<h3 id="选择重传selective-repeat-sr">3.4.4 选择重传（Selective Repeat,
SR）</h3>
<h4 id="协议机制-1">协议机制</h4>
<ul>
<li>发送窗口和接收窗口大小均为N。</li>
<li>发送方只重传怀疑出错的包。</li>
<li>接收方缓存乱序包，直到缺失包到达后一并交付。</li>
</ul>
<h4 id="发送方事件与动作-1">发送方事件与动作</h4>
<ul>
<li><strong>上层数据到达</strong>：检查序列号是否在窗口内，若是则发送。</li>
<li><strong>超时</strong>：每个包都有独立定时器，超时重传特定包。</li>
<li><strong>收到ACK</strong>：标记该包已接收，若为窗口基值则前移窗口。</li>
</ul>
<h4 id="接收方事件与动作">接收方事件与动作</h4>
<ul>
<li><strong>正确接收且在窗口内</strong>：发送ACK，若为窗口基值则交付连续包。</li>
<li><strong>正确接收但超出窗口</strong>：忽略或重新发送ACK。</li>
<li><strong>其他情况</strong>：丢弃包。</li>
</ul>
<h4 id="序列号空间限制">序列号空间限制</h4>
<ul>
<li>若序列号范围过小，可能出现新旧包混淆。</li>
<li>窗口大小必须小于等于序列号空间的一半。## 3.5
面向连接的传输：TCP</li>
</ul>
<h3 id="tcp-连接">3.5.1 TCP 连接</h3>
<ul>
<li>TCP 是面向连接的协议，通信前需进行三次握手建立连接。</li>
<li>连接是逻辑连接，状态信息仅存在于两端系统中。</li>
<li>中间路由器不维护 TCP 连接状态。</li>
<li>提供全双工服务，支持点对点通信。</li>
<li>不支持多播（Multicast）。</li>
</ul>
<h3 id="tcp-段结构">3.5.2 TCP 段结构</h3>
<ul>
<li>包含源端口、目的端口、序列号、确认号、首部长度、标志位、窗口大小、校验和等字段。</li>
<li>序列号标识数据字节，而非段本身。</li>
<li>确认号表示期望收到的下一个字节编号。</li>
<li>标志位包括 ACK（确认）、SYN（同步）、FIN（结束）等。</li>
</ul>
<h3 id="rtt-估计与超时">3.5.3 RTT 估计与超时</h3>
<ul>
<li>使用指数加权移动平均估算往返时间（RTT）：
<ul>
<li>EstimatedRTT = 0.875 × EstimatedRTT + 0.125 × SampleRTT</li>
</ul></li>
<li>DevRTT 表示 RTT 波动：
<ul>
<li>DevRTT = 0.75 × DevRTT + 0.25 × |SampleRTT – EstimatedRTT|</li>
</ul></li>
<li>超时时间计算公式：
<ul>
<li>TimeoutInterval = EstimatedRTT + 4 × DevRTT</li>
</ul></li>
<li>初始超时时间为 1 秒，超时后翻倍以避免重复丢包。</li>
</ul>
<h3 id="可靠数据传输-2">3.5.4 可靠数据传输</h3>
<ul>
<li>基于 rdt
协议原理，使用确认应答、重传、定时器、序列号等机制实现可靠传输。</li>
<li>发送方事件包括：
<ul>
<li>数据接收自应用层；</li>
<li>定时器超时；</li>
<li>接收确认应答（ACK）。</li>
</ul></li>
<li>支持快速重传机制：收到三个重复 ACK 触发重传，无需等待超时。</li>
<li>TCP 实现了 GBN 和 SR 的混合机制。</li>
</ul>
<h3 id="流量控制">3.5.5 流量控制</h3>
<ul>
<li>接收方通过接收窗口（rwnd）告知发送方可接收的数据量。</li>
<li>控制发送速率以防止接收缓冲区溢出。</li>
<li>rwnd 动态更新：
<ul>
<li>rwnd = RcvBuffer – (LastByteRcvd – LastByteRead)</li>
</ul></li>
<li>若 rwnd = 0，发送方仍会发送小数据段以探测接收方缓冲区是否释放。</li>
</ul>
<h3 id="tcp-连接管理">3.5.6 TCP 连接管理</h3>
<h4 id="三次握手连接建立">三次握手（连接建立）</h4>
<ul>
<li>客户端发送 SYN 段（SYN=1，seq=x）；</li>
<li>服务器响应 SYN-ACK 段（SYN=1，seq=y，ack=x+1）；</li>
<li>客户端发送 ACK 段（SYN=0，seq=x+1，ack=y+1）。</li>
</ul>
<h4 id="四次挥手连接关闭">四次挥手（连接关闭）</h4>
<ul>
<li>客户端发送 FIN 段（FIN=1）；</li>
<li>服务器回应 ACK；</li>
<li>服务器发送 FIN 段；</li>
<li>客户端回应 ACK，进入 TIME_WAIT 状态；</li>
<li>TIME_WAIT 状态持续约 30 秒至 2 分钟，确保最后一个 ACK
正确送达。</li>
</ul>
<h4 id="安全相关syn-泛洪攻击">安全相关：SYN 泛洪攻击</h4>
<ul>
<li>攻击者发送大量 SYN 段而不完成握手，耗尽服务器资源。</li>
<li>防御方式：SYN Cookie
技术，使用哈希函数生成初始序列号，不分配资源直至收到 ACK。## 3.6
拥塞控制原理</li>
</ul>
<h3 id="拥塞的原因与代价">3.6.1 拥塞的原因与代价</h3>
<h4
id="场景1两个发送端无限缓冲的路由器">场景1：两个发送端，无限缓冲的路由器</h4>
<ul>
<li>主机A和B共享单跳链路。</li>
<li>当发送速率超过R/2时，吞吐量受限于链路容量。</li>
<li>接近链路容量时延迟显著增加。</li>
<li>虽然吞吐量高，但延迟大是拥塞的成本之一。</li>
</ul>
<h4
id="场景2两个发送端有限缓冲的路由器">场景2：两个发送端，有限缓冲的路由器</h4>
<ul>
<li>路由器缓冲区有限，数据包可能丢失。</li>
<li>发送方需重传丢失的数据包。</li>
<li>重传导致网络资源浪费。</li>
<li>过早超时重传会导致不必要的转发。</li>
</ul>
<h4
id="场景3四个发送端多跳路径有限缓冲">场景3：四个发送端，多跳路径，有限缓冲</h4>
<ul>
<li>多跳路径中，中间路由器缓冲溢出导致丢包。</li>
<li>数据包在第一跳被转发后若在第二跳丢弃，则第一跳资源浪费。</li>
<li>高流量下，吞吐量随负载增加反而下降。</li>
</ul>
<h3 id="拥塞控制方法-1">3.6.2 拥塞控制方法</h3>
<h4 id="端到端拥塞控制">端到端拥塞控制</h4>
<ul>
<li>网络层不提供反馈，传输层根据丢包或延迟推断拥塞。</li>
<li>TCP采用此方式，通过超时或重复ACK判断拥塞并调整窗口大小。</li>
</ul>
<h4 id="网络辅助拥塞控制">网络辅助拥塞控制</h4>
<ul>
<li>路由器向发送端显式反馈拥塞状态。</li>
<li>可通过“拥塞位”或标记字段通知发送端。</li>
<li>ATM ABR、DECnet等架构使用此方式。</li>
</ul>
<h2 id="tcp拥塞控制-1">3.7 TCP拥塞控制</h2>
<h3 id="经典tcp拥塞控制">3.7.1 经典TCP拥塞控制</h3>
<h4 id="拥塞窗口cwnd机制">拥塞窗口（cwnd）机制</h4>
<ul>
<li>发送速率受cwnd限制：<code>发送速率 ≈ cwnd / RTT</code>。</li>
<li>收到ACK表示网络正常，增加cwnd；发生丢包表示拥塞，减少cwnd。</li>
</ul>
<h4 id="慢启动slow-start">慢启动（Slow Start）</h4>
<ul>
<li>初始cwnd较小，每收到一个ACK增加1 MSS。</li>
<li>吞吐量呈指数增长。</li>
<li>在以下情况结束：
<ul>
<li>超时 → cwnd重置为1，ssthresh设为原cwnd的一半。</li>
<li>cwnd达到ssthresh → 进入拥塞避免阶段。</li>
<li>收到三个重复ACK → 进入快速恢复。</li>
</ul></li>
</ul>
<h4 id="拥塞避免congestion-avoidance">拥塞避免（Congestion
Avoidance）</h4>
<ul>
<li>增长更保守，每RTT线性增加1 MSS。</li>
<li>收到三个重复ACK时，cwnd减半，ssthresh更新。</li>
<li>超时处理与慢启动相同。</li>
</ul>
<h4 id="快速恢复fast-recovery">快速恢复（Fast Recovery）</h4>
<ul>
<li>收到三个重复ACK后进入。</li>
<li>每个重复ACK使cwnd增加1 MSS。</li>
<li>收到新ACK后进入拥塞避免。</li>
<li>若再次超时，则回到慢启动。</li>
</ul>
<h4 id="aimd行为与性能">AIMD行为与性能</h4>
<ul>
<li>TCP Reno采用“加性增、乘性减”策略。</li>
<li>形成锯齿状吞吐量变化。</li>
<li>平均吞吐量约为
<code>0.75 * W / RTT</code>，其中W为最大窗口大小。</li>
</ul>
<h3 id="网络辅助ecn与基于延迟的拥塞控制">3.7.2
网络辅助ECN与基于延迟的拥塞控制</h3>
<h4 id="显式拥塞通知ecn">显式拥塞通知（ECN）</h4>
<ul>
<li>IP头部设置两比特用于拥塞指示。</li>
<li>路由器检测拥塞并在IP头中标记ECN位。</li>
<li>接收方通过ECE标志通知发送方拥塞。</li>
<li>发送方响应：将cwnd减半，并设置CWR标志。</li>
</ul>
<h4 id="基于延迟的拥塞控制">基于延迟的拥塞控制</h4>
<h5 id="tcp-vegas">TCP Vegas</h5>
<ul>
<li>根据RTT测量判断是否拥塞。</li>
<li>如果实际吞吐率低于无拥塞理论值 → 减少发送速率。</li>
<li>目标：保持队列尽可能小以降低延迟。</li>
</ul>
<h5 id="bbr">BBR</h5>
<ul>
<li>基于带宽和延迟建模。</li>
<li>不依赖丢包作为拥塞信号。</li>
<li>Google部署于其内部网络和公共服务器。</li>
</ul>
<h2 id="公平性问题">3.7.3 公平性问题</h2>
<h3 id="tcp公平性">TCP公平性</h3>
<ul>
<li>K个TCP连接共享带宽R时，每个连接应获得R/K带宽。</li>
<li>AIMD机制收敛至公平分配。</li>
<li>RTT较短的连接更快抢占带宽。</li>
</ul>
<h3 id="udp与公平性">UDP与公平性</h3>
<ul>
<li>UDP应用不响应拥塞控制，可能导致不公平。</li>
<li>视频会议、VoIP常使用UDP以维持恒定速率。</li>
</ul>
<h3 id="并行tcp连接">并行TCP连接</h3>
<ul>
<li>使用多个TCP连接可获得更多带宽。</li>
<li>Web浏览器常开启多个连接提高下载速度。## 3.9 总结</li>
<li>传输层协议可以提供从无附加功能的多路复用/解复用到可靠数据传输、延迟和带宽保证等多种服务。</li>
<li>可靠数据传输可以通过确认、定时器、重传和序列号等机制实现，即使底层网络不可靠。</li>
<li>TCP是面向连接的可靠传输协议，包含流量控制、往返时间估计和连接管理等功能。</li>
<li>拥塞控制对网络性能至关重要，TCP通过端到端机制进行拥塞控制，使用加性增加和乘性减少策略。</li>
<li>QUIC协议在应用层实现了许多传输层功能，如可靠数据传输、拥塞控制和安全加密。</li>
</ul>
<h3 id="家庭作业问题与思考题">家庭作业问题与思考题</h3>
<h4 id="简答题-r1-r19">简答题 R1-R19</h4>
<ul>
<li><strong>R1</strong>：设计一个简单的传输层协议以将数据交付到目标进程；修改协议以提供返回地址。</li>
<li><strong>R2</strong>：类比邮政系统，描述一种协议以在家庭成员间传递信件。</li>
<li><strong>R3</strong>：TCP连接中，主机A发送至主机B的数据段源端口为x，目的端口为y，则反向通信中源端口为y，目的端口为x。</li>
<li><strong>R4</strong>：开发者选择UDP而非TCP的原因包括更低的开销、更细粒度的控制以及无需建立连接。</li>
<li><strong>R5</strong>：尽管UDP不提供拥塞控制，语音和视频仍常使用TCP，因其可避免因网络拥塞导致的丢包。</li>
<li><strong>R6</strong>：应用可在UDP之上自行实现可靠数据传输机制。</li>
<li><strong>R7</strong>：两个不同主机发送到同一UDP端口的数据会被导向同一个套接字，但可通过IP地址区分来源。</li>
<li><strong>R8</strong>：持久连接下，不同客户端请求会通过不同套接字处理，但所有套接字都绑定到端口80。</li>
<li><strong>R9</strong>：引入序列号是为了识别重复或乱序的数据段。</li>
<li><strong>R10</strong>：引入定时器是为了检测数据段丢失并触发重传。</li>
<li><strong>R11</strong>：即便往返延迟已知，仍需定时器以应对可能的数据段丢失。</li>
<li><strong>R12-R13</strong>：Go-Back-N与Selective
Repeat模拟实验，展示其在丢包场景下的行为差异。</li>
<li><strong>R14</strong>：判断关于TCP特性的多个陈述是否正确。</li>
<li><strong>R15</strong>：计算TCP段中的数据长度及确认号。</li>
<li><strong>R16</strong>：Telnet示例中，在用户输入后发送的段数及其序列号与确认字段内容。</li>
<li><strong>R17</strong>：两个TCP连接共享瓶颈链路时，TCP公平分配带宽，每条连接获得R/2速率。</li>
<li><strong>R18</strong>：当定时器超时，ssthresh设置为原值的一半。</li>
<li><strong>R19</strong>：TCP分割响应时间约为4×RTTFE + RTTBE +
处理时间。</li>
</ul>
<h4 id="练习题-p1-p58">练习题 P1-P58</h4>
<ul>
<li><strong>P1</strong>：Telnet会话中，不同客户端与服务器之间的段使用的可能端口号。</li>
<li><strong>P2</strong>：图3.5中服务器返回客户端的数据段端口号及IP地址。</li>
<li><strong>P3-P5</strong>：关于UDP校验和的计算与验证。</li>
<li><strong>P6-P13</strong>：可靠数据传输协议的设计与分析，包括rdt2.1和rdt3.0的死锁、ACK无序列号等问题。</li>
<li><strong>P14-P16</strong>：NAK-only协议的优劣分析及提高通道利用率的方法。</li>
<li><strong>P17-P19</strong>：有限状态机（FSM）设计用于交替数据传输。</li>
<li><strong>P20-P21</strong>：错误控制协议设计，确保可靠传输与有序交付。</li>
<li><strong>P22-P24</strong>：GBN与SR协议中序列号窗口与ACK字段分析。</li>
<li><strong>P25-P26</strong>：UDP相比TCP的优势在于对发送数据和时机的更多控制。</li>
<li><strong>P27-P30</strong>：TCP序列号、确认号、流量控制与SYN
Cookie机制分析。</li>
<li><strong>P31-P36</strong>：RTT估算、SampleRTT与EstimatedRTT的关系、TCP避免测量重传段的RTT原因。</li>
<li><strong>P37-P40</strong>：比较GBN、SR与TCP的行为，分析超时与快速重传机制。</li>
<li><strong>P41-P44</strong>：TCP拥塞控制算法（AIMD、AIAD）、窗口大小变化与吞吐量分析。</li>
<li><strong>P45-P58</strong>：TCP
Reno与CUBIC拥塞控制演化、缓冲区大小设定、连接同步化影响、改进TCP拥塞控制机制。###
编程实验</li>
</ul>
<h4 id="可靠传输协议实现">可靠传输协议实现</h4>
<ul>
<li>实现传输层的发送与接收代码。</li>
<li>两个版本：回退N步（GBN）和交替比特协议。</li>
<li>在模拟环境运行，接口接近UNIX系统调用。</li>
<li>包括定时器启动、中断处理等机制。</li>
</ul>
<h4 id="wireshark-实验探索-tcp">Wireshark 实验：探索 TCP</h4>
<ul>
<li>使用浏览器访问服务器并捕获数据包。</li>
<li>分析客户端与服务器端的 TCP 行为。</li>
<li>研究流量控制、拥塞控制、重传、往返时间（RTT）估计等内容。</li>
</ul>
<h4 id="wireshark-实验探索-udp">Wireshark 实验：探索 UDP</h4>
<ul>
<li>抓包分析使用 UDP 的应用（如 DNS 或 Skype）。</li>
<li>研究 UDP 段头部字段及校验和计算。</li>
</ul>
<h3 id="人物访谈van-jacobson">人物访谈：Van Jacobson</h3>
<h4 id="主要贡献">主要贡献</h4>
<ul>
<li>提出TCP拥塞控制机制，推动互联网扩展。</li>
<li>获得ACM SIGCOMM奖与IEEE Kobayashi奖。</li>
<li>当前任职于Google，曾任Packet
Design首席科学家、Cisco首席科学家等职。</li>
</ul>
<h4 id="关于挑战与问题定义">关于挑战与问题定义</h4>
<ul>
<li>强调“找到正确的问题”比寻找答案更重要。</li>
<li>在研究TCP拥塞问题时，通过提问“为何TCP能工作”找到了突破口。</li>
<li>发现了“确认时钟机制（ack clocking）”。</li>
</ul>
<h4 id="对网络未来的看法">对网络未来的看法</h4>
<ul>
<li>网络应从“主机间对话”转向“信息传播”的更大视角。</li>
<li>当前网络技术在广播媒体、移动设备数据交换等方面效率低下。</li>
<li>CDN和缓存是必要手段，但缺乏理论支持。</li>
<li>希望未来网络能融合Web背后的信息传播理念。</li>
</ul>
<h4 id="启发他的人-1">启发他的人</h4>
<ul>
<li>理查德·费曼（Richard Feynman）对其影响深远。</li>
<li>欣赏其将复杂理论简化的能力。</li>
</ul>
<h4 id="给学生的建议">给学生的建议</h4>
<ul>
<li>计算机与网络对社会影响巨大。</li>
<li>网络本质是连接，学习网络有助于理解多领域知识。</li>
<li>举例说明自然现象（如蚂蚁觅食、蜜蜂舞蹈）与协议设计的关系。</li>
<li>鼓励学生广泛涉猎、追求影响力。</li>
</ul>
<h1 id="网络层数据平面">网络层：数据平面</h1>
<h2 id="网络层概述">4.1 网络层概述</h2>
<h3 id="转发与路由数据平面与控制平面">4.1.1
转发与路由：数据平面与控制平面</h3>
<ul>
<li><strong>转发（Forwarding）</strong>
<ul>
<li>路由器将输入链路上的数据包转发到合适的输出链路。</li>
<li>数据平面功能，硬件实现，时间尺度为纳秒级。</li>
<li>示例：根据数据包头字段查找转发表决定出口接口。</li>
</ul></li>
<li><strong>路由（Routing）</strong>
<ul>
<li>决定数据包从源主机到目的主机的路径。</li>
<li>控制平面功能，软件实现，时间尺度为秒级。</li>
<li>示例：使用路由算法计算最优路径。</li>
</ul></li>
</ul>
<h4 id="转发表的作用">转发表的作用</h4>
<ul>
<li>根据数据包头部信息索引转发表，确定输出接口。</li>
<li>示例：头部值为0110的数据包被转发至接口2。</li>
</ul>
<h4 id="控制平面的传统方式">控制平面的传统方式</h4>
<ul>
<li>每个路由器内部运行路由协议，与其他路由器通信以生成转发表。</li>
<li>需要路由协议交换路由信息。</li>
</ul>
<h4 id="sdn方式下的控制平面">SDN方式下的控制平面</h4>
<ul>
<li>控制器远程计算并下发转发表至各路由器。</li>
<li>路由器仅负责转发，控制器负责全局路由决策。</li>
<li>支持开放、可编程网络管理。</li>
</ul>
<h3 id="网络服务模型">4.1.2 网络服务模型</h3>
<ul>
<li><strong>网络层服务定义</strong>
<ul>
<li>定义发送主机和接收主机之间的端到端数据包传输特性。</li>
</ul></li>
<li><strong>可能提供的服务</strong>
<ul>
<li>保证交付</li>
<li>有界延迟的交付</li>
<li>顺序交付</li>
<li>最小带宽保障</li>
<li>网络层加密安全服务</li>
</ul></li>
<li><strong>Internet的网络服务模型</strong>
<ul>
<li><strong>尽力而为服务（Best-effort service）</strong>
<ul>
<li>不保证交付顺序、不保证交付本身、无延迟或带宽保障。</li>
<li>实际中通过DASH等自适应协议和足够带宽满足多种应用需求。</li>
</ul></li>
</ul></li>
</ul>
<h2 id="路由器内部结构">4.2 路由器内部结构</h2>
<h3 id="输入端口处理">4.2.1 输入端口处理</h3>
<ul>
<li>执行物理层和链路层功能。</li>
<li>查找转发表决定输出接口。</li>
<li>使用高速互连总线进行数据包转发。</li>
</ul>
<h3 id="交换结构">4.2.2 交换结构</h3>
<ul>
<li><strong>三种常见交换机制</strong>
<ul>
<li>基于内存的交换</li>
<li>基于总线的交换</li>
<li>基于互联网络的交换（Crossbar Switch）</li>
</ul></li>
</ul>
<h3 id="输出端口处理">4.2.3 输出端口处理</h3>
<ul>
<li>缓存排队数据包。</li>
<li>调度机制决定转发顺序。</li>
<li>处理拥塞情况下的丢包策略。</li>
</ul>
<h3 id="分组调度">4.2.4 分组调度</h3>
<ul>
<li><strong>先进先出（FIFO）</strong></li>
<li><strong>优先级队列（Priority Queueing）</strong></li>
<li><strong>加权公平队列（WFQ）</strong></li>
</ul>
<h2 id="传统ip转发">4.3 传统IP转发</h2>
<h3 id="ip地址基础">4.3.1 IP地址基础</h3>
<ul>
<li>IPv4地址：32位标识符，通常用点分十进制表示。</li>
<li>IPv6地址：128位标识符，通常用冒号十六进制表示。</li>
</ul>
<h3 id="子网划分">4.3.2 子网划分</h3>
<ul>
<li>划分网络前缀和主机部分。</li>
<li>CIDR（无类别域间路由）支持灵活子网划分。</li>
</ul>
<h3 id="转发表构建">4.3.3 转发表构建</h3>
<ul>
<li>路由聚合减少表项数量。</li>
<li>使用最长匹配原则选择下一跳。</li>
</ul>
<h3 id="ipv4协议">4.3.4 IPv4协议</h3>
<ul>
<li>版本、首部长度、服务类型、总长度、标识、标志、片偏移、TTL、协议、首部校验和、源和目标IP地址等字段。</li>
</ul>
<h3 id="ipv6协议">4.3.5 IPv6协议</h3>
<ul>
<li>更大地址空间、简化首部结构、支持扩展首部。</li>
<li>移除了IPv4中的选项字段，采用扩展首部实现灵活性。</li>
</ul>
<h2 id="通用转发">4.4 通用转发</h2>
<h3 id="openflow简介">4.4.1 OpenFlow简介</h3>
<ul>
<li>SDN核心技术，允许远程控制器定义转发规则。</li>
<li>支持基于多字段的转发决策（如源/目的IP、端口号、协议等）。</li>
</ul>
<h3 id="流表flow-table">4.4.2 流表（Flow Table）</h3>
<ul>
<li>包含匹配字段、动作（转发、丢弃、修改）、计数器等。</li>
<li>数据包按流表规则进行处理。</li>
</ul>
<h3 id="转发行为扩展">4.4.3 转发行为扩展</h3>
<ul>
<li>支持数据包复制、重写、过滤等操作。</li>
<li>提高网络灵活性和安全性控制能力。</li>
</ul>
<h2 id="中间盒middleboxes">4.5 中间盒（Middleboxes）</h2>
<h3 id="功能分类">4.5.1 功能分类</h3>
<ul>
<li><strong>防火墙（Firewall）</strong>
<ul>
<li>过滤非法流量，保护网络安全。</li>
</ul></li>
<li><strong>NAT设备</strong>
<ul>
<li>地址转换，实现私有网络访问公网。</li>
</ul></li>
<li><strong>负载均衡器</strong>
<ul>
<li>将请求分配到多个服务器，提高可用性和性能。</li>
</ul></li>
<li><strong>入侵检测系统（IDS）</strong>
<ul>
<li>监测异常流量，识别潜在攻击。</li>
</ul></li>
</ul>
<h3 id="对网络架构的影响">4.5.2 对网络架构的影响</h3>
<ul>
<li>增强网络安全性与服务质量。</li>
<li>增加部署复杂性，需协调转发逻辑。</li>
</ul>
<h2 id="本章概览">本章概览</h2>
<ul>
<li>掌握网络层的基本组成：<strong>数据平面</strong>与<strong>控制平面</strong>。</li>
<li>理解<strong>转发</strong>与<strong>路由</strong>的区别与协作。</li>
<li>熟悉IPv4与IPv6协议结构及其地址分配机制。</li>
<li>了解SDN与OpenFlow如何改变传统网络控制方式。</li>
<li>理解中间盒在网络中的作用及影响。## 4.2 路由器内部结构</li>
</ul>
<h3 id="输入端口处理与基于目的的转发">4.2.1
输入端口处理与基于目的的转发</h3>
<ul>
<li>路由器输入端口负责物理层和链路层功能。</li>
<li>核心功能是查找转发表，决定数据包应转发到哪个输出端口。</li>
<li>转发表基于最长前缀匹配规则（Longest Prefix
Matching）选择输出接口。</li>
<li>IPv4地址通常使用32位表示，转发表通过前缀压缩减少条目数量。</li>
<li>TCAM（三态内容寻址存储器）常用于高速查找，实现恒定时间匹配。</li>
</ul>
<h3 id="交换结构-1">4.2.2 交换结构</h3>
<h4 id="三种主要交换方式">三种主要交换方式：</h4>
<ul>
<li><strong>基于内存的交换</strong>
<ul>
<li>最早的路由器使用CPU控制交换。</li>
<li>性能受限于内存带宽，无法并行转发多个数据包。</li>
</ul></li>
<li><strong>基于总线的交换</strong>
<ul>
<li>输入端口直接通过共享总线将数据包发送到输出端口。</li>
<li>每次只能传输一个数据包，存在瓶颈。</li>
</ul></li>
<li><strong>基于互连网络的交换</strong>
<ul>
<li>使用交叉开关（Crossbar Switch）连接输入和输出端口。</li>
<li>支持多数据包并行转发，非阻塞设计。</li>
<li>更复杂的互连网络支持多阶段交换，提升吞吐能力。</li>
</ul></li>
</ul>
<h3 id="输出端口处理-1">4.2.3 输出端口处理</h3>
<ul>
<li>输出端口负责从内存中取出数据包并通过链路层和物理层发送。</li>
<li>包括调度机制、队列管理、链路封装等功能。</li>
<li>队列调度策略影响服务质量和延迟。</li>
</ul>
<h3 id="缓存与排队现象">4.2.4 缓存与排队现象</h3>
<h4 id="排队发生在输入和输出端口">排队发生在输入和输出端口：</h4>
<ul>
<li><strong>输入端口排队（Input Queueing）</strong>
<ul>
<li>当交换结构速度低于输入链路速度时，数据包在输入端口排队。</li>
<li>存在头部阻塞（HOL Blocking），导致低效转发。</li>
</ul></li>
<li><strong>输出端口排队（Output Queueing）</strong>
<ul>
<li>多个输入端口同时向同一输出端口发送数据时，形成队列。</li>
<li>可能导致缓存耗尽，引发丢包。</li>
</ul></li>
<li><strong>缓冲区大小设计</strong>
<ul>
<li>传统建议：B = RTT × 带宽。</li>
<li>新研究认为：当TCP流数量大时，所需缓存减少。</li>
<li>过度缓存可能导致延迟增加，影响交互式应用体验（Bufferbloat问题）。</li>
</ul></li>
</ul>
<h3 id="数据包调度策略">4.2.5 数据包调度策略</h3>
<h4 id="常见调度机制">常见调度机制：</h4>
<ul>
<li><strong>先进先出（FIFO）</strong>
<ul>
<li>简单公平，但无法区分优先级。</li>
</ul></li>
<li><strong>优先级队列（Priority Queuing）</strong>
<ul>
<li>不同优先级的数据包按优先顺序转发。</li>
<li>可用于区分语音、视频、普通流量等。</li>
</ul></li>
<li><strong>轮询调度（Round Robin）</strong>
<ul>
<li>各类数据包轮流发送，确保公平性。</li>
</ul></li>
<li><strong>加权公平队列（WFQ）</strong>
<ul>
<li>为每个类别分配权重，保证最低带宽。</li>
<li>支持差异化服务，适用于QoS场景。### 4.3
IPv4协议：IP地址、NAT与IPv6</li>
</ul></li>
</ul>
<h4 id="ipv4地址配置">4.3.2 IPv4地址配置</h4>
<ul>
<li>每个接口必须具有唯一的IP地址（除NAT后设备）。</li>
<li>IP地址长度为32位，通常使用点分十进制表示（如193.32.216.9）。</li>
<li>子网划分基于共同的网络前缀（如223.1.1.xxx）。</li>
<li>CIDR（无类别域间路由）允许灵活子网划分（如/24表示前24位为网络部分）。</li>
<li>组织内的多个子网共享相同的网络前缀。</li>
</ul>
<h4 id="网络地址转换nat">4.3.3 网络地址转换（NAT）</h4>
<ul>
<li>NAT允许多个内部设备共享一个公网IP地址。</li>
<li>使用私有地址空间（如10.0.0.0/24），避免公网地址耗尽。</li>
<li>NAT路由器维护转换表，记录WAN和LAN侧的IP+端口映射。</li>
<li>实现方式：
<ul>
<li>内部设备发送数据包时，NAT替换源IP和端口。</li>
<li>外部响应返回时，NAT根据端口查找并还原目标地址。</li>
</ul></li>
<li>缺点：
<ul>
<li>端口用于主机而非进程寻址，影响P2P连接。</li>
<li>违反路由器应仅处理网络层的原则。</li>
</ul></li>
<li>防火墙与入侵检测系统（IDS）常与NAT结合使用增强安全。</li>
</ul>
<h4 id="ipv6协议-1">4.3.4 IPv6协议</h4>
<ul>
<li>地址长度从32位扩展至128位，解决IPv4地址枯竭问题。</li>
<li>支持单播、多播和任播地址类型。</li>
<li>报头结构简化，固定长度为40字节。</li>
<li>移除了IPv4中的以下字段：
<ul>
<li>分片与重组（仅由源和目的处理）。</li>
<li>首部校验和（由传输层和链路层保障）。</li>
<li>选项字段（作为扩展首部实现）。</li>
</ul></li>
<li>新增字段：
<ul>
<li>流标签（Flow Label）支持QoS或实时服务。</li>
<li>下一报头（Next Header）标识上层协议。</li>
</ul></li>
<li>IPv6过渡机制：
<ul>
<li><strong>隧道技术</strong>：将IPv6数据包封装在IPv4中穿越IPv4网络。</li>
<li>不同于“flag day”方式，逐步部署更现实可行。</li>
</ul></li>
<li>应用现状：
<ul>
<li>美国政府约三分之一二级域名已启用IPv6。</li>
<li>Google统计显示约25%用户通过IPv6访问其服务。</li>
<li>3GPP等标准组织已指定IPv6为移动网络标准。</li>
</ul></li>
</ul>
<h4 id="地址分配机制">地址分配机制</h4>
<ul>
<li>组织获取地址块：
<ul>
<li>通过ISP获得连续地址块（如200.23.16.0/20）。</li>
<li>ISP可进一步划分为多个子块分配给客户。</li>
</ul></li>
<li>全球地址管理：
<ul>
<li>由ICANN负责全球IP地址分配。</li>
<li>区域互联网注册机构（如ARIN、RIPE）执行区域管理。</li>
</ul></li>
</ul>
<h4 id="dhcp动态主机配置协议">DHCP动态主机配置协议</h4>
<ul>
<li>自动分配IP地址，支持静态分配或临时分配。</li>
<li>四步交互流程：
<ol type="1">
<li>DHCP发现（Discover）广播寻找服务器。</li>
<li>DHCP提供（Offer）服务器响应地址提议。</li>
<li>DHCP请求（Request）客户端选择并确认。</li>
<li>DHCP确认（ACK）服务器最终确认分配。</li>
</ol></li>
<li>支持即插即用（Plug-and-Play）功能，广泛用于企业、家庭及无线网络。##
4.4 通用转发与SDN</li>
</ul>
<h3 id="匹配match">4.4.1 匹配（Match）</h3>
<h4 id="openflow-1.0中的匹配字段">OpenFlow 1.0中的匹配字段</h4>
<ul>
<li>支持12种头部字段和入端口号的匹配。</li>
<li>涉及链路层、网络层和传输层字段，如：
<ul>
<li>源/目的MAC地址</li>
<li>源/目的IP地址</li>
<li>TCP/UDP源/目的端口</li>
<li>VLAN ID、TOS字段等</li>
</ul></li>
<li>支持通配符匹配（例如：<code>128.119.*.*</code>）。</li>
<li>多个匹配项时优先使用高优先级条目。</li>
</ul>
<h4 id="抽象设计原则">抽象设计原则</h4>
<ul>
<li>不支持对TTL或数据报长度字段进行匹配。</li>
<li>设计权衡：功能与复杂度之间的平衡。</li>
<li>接口应捕获抽象的最小本质，避免过度泛化。</li>
</ul>
<h3 id="动作action">4.4.2 动作（Action）</h3>
<h4 id="常见动作类型">常见动作类型</h4>
<ul>
<li><strong>转发</strong>：
<ul>
<li>发送到特定物理输出端口</li>
<li>广播或多播到多个端口</li>
<li>封装并发送给控制器</li>
</ul></li>
<li><strong>丢弃</strong>：
<ul>
<li>无动作表示丢弃匹配的数据包</li>
</ul></li>
<li><strong>修改字段</strong>：
<ul>
<li>可重写10个头部字段（除IP协议字段外）</li>
<li>包括链路层、网络层和传输层字段</li>
</ul></li>
</ul>
<h4 id="动作执行顺序">动作执行顺序</h4>
<ul>
<li>按照列表中指定的顺序执行多个动作。</li>
</ul>
<h3 id="openflow-实例应用">4.4.3 OpenFlow 实例应用</h3>
<h4 id="示例一简单转发">示例一：简单转发</h4>
<ul>
<li>数据包从h5/h6发往h3/h4，路径为s3→s1→s2，绕过s3与s2之间的链路。</li>
<li>s1流表条目：
<ul>
<li>入端口=1；源IP=10.3.<em>.</em>；目的IP=10.2.<em>.</em></li>
<li>动作：转发至端口4</li>
</ul></li>
<li>s3流表条目：
<ul>
<li>源IP=10.3.<em>.</em>；目的IP=10.2.<em>.</em></li>
<li>动作：转发至端口3</li>
</ul></li>
<li>s2流表条目：
<ul>
<li>入端口=2；目的IP=10.2.0.3 → 转发至端口3</li>
<li>入端口=2；目的IP=10.2.0.4 → 转发至端口4</li>
</ul></li>
</ul>
<h4 id="示例二负载均衡">示例二：负载均衡</h4>
<ul>
<li>h3发往10.1.<em>.</em>走s2→s1；h4发往10.1.<em>.</em>走s2→s3→s1。</li>
<li>s2流表条目：
<ul>
<li>入端口=3；目的IP=10.1.<em>.</em> → 转发至端口2</li>
<li>入端口=4；目的IP=10.1.<em>.</em> → 转发至端口1</li>
</ul></li>
</ul>
<h4 id="示例三防火墙">示例三：防火墙</h4>
<ul>
<li>s2仅接收来自s3连接主机的流量。</li>
<li>流表条目：
<ul>
<li>源IP=10.3.<em>.</em>；目的IP=10.2.0.3 → 转发至端口3</li>
<li>源IP=10.3.<em>.</em>；目的IP=10.2.0.4 → 转发至端口4</li>
</ul></li>
</ul>
<h4 id="灵活性与优势">灵活性与优势</h4>
<ul>
<li>支持虚拟网络、多租户隔离、QoS等功能。</li>
<li>可通过编程实现多种逻辑行为。</li>
</ul>
<h3 id="中间盒middleboxes-1">4.5 中间盒（Middleboxes）</h3>
<h4 id="中间盒分类">中间盒分类</h4>
<ul>
<li><strong>NAT转换</strong>
<ul>
<li>私有地址映射为公网地址</li>
<li>重写IP地址和端口号</li>
</ul></li>
<li><strong>安全服务</strong>
<ul>
<li>防火墙：基于头部字段过滤流量</li>
<li>IDS：检测异常模式并过滤数据包</li>
<li>应用层邮件过滤器：识别垃圾邮件、钓鱼攻击</li>
</ul></li>
<li><strong>性能增强</strong>
<ul>
<li>压缩、缓存内容、请求负载均衡（如HTTP请求分发到多个服务器）</li>
</ul></li>
</ul>
<h4 id="nfv与云外包">NFV与云外包</h4>
<ul>
<li><strong>网络功能虚拟化（NFV）</strong>
<ul>
<li>使用通用硬件+专用软件替代传统中间盒</li>
<li>类似于SDN架构</li>
</ul></li>
<li><strong>云外包</strong>
<ul>
<li>将中间盒功能迁移到云端处理</li>
</ul></li>
</ul>
<h4 id="架构争议">架构争议</h4>
<ul>
<li>违反“端到端原则” vs “满足实际需求”</li>
<li>RFC 1958指出网络核心应保持简单，智能放在边缘</li>
<li>但中间盒在现实网络中广泛存在且不可或缺</li>
</ul>
<h4 id="ip沙漏模型hourglass-model">IP沙漏模型（Hourglass Model）</h4>
<ul>
<li>网络层仅有IP协议，成为互联网架构的“窄腰”</li>
<li>所有设备必须实现IP协议</li>
<li>屏蔽底层差异，提供统一接口</li>
<li>促进互联网快速发展和异构网络互联</li>
</ul>
<h4 id="端到端论证end-to-end-argument">端到端论证（End-to-End
Argument）</h4>
<ul>
<li>关键功能应在端点而非网络中实现</li>
<li>举例：可靠数据传输需由TCP完成，而非依赖链路层错误控制</li>
<li>RFC 1958引用该原则作为互联网架构基础之一## 5.2 路由算法</li>
</ul>
<h3 id="链路状态ls路由算法">5.2.1 链路状态（LS）路由算法</h3>
<ul>
<li><strong>核心思想</strong>
<ul>
<li>基于Dijkstra算法，计算从源节点到所有其他节点的最短路径。</li>
<li>每个节点广播链路状态信息，构建完整的网络拓扑图。</li>
</ul></li>
<li><strong>关键步骤</strong>
<ul>
<li>初始化：设定初始距离和前驱节点。</li>
<li>迭代更新：每次选择最小距离节点加入已知集合，并更新其邻居的距离。</li>
</ul></li>
<li><strong>复杂度分析</strong>
<ul>
<li>时间复杂度为O(n²)，n为节点数量。</li>
<li>可通过堆优化降低时间复杂度。</li>
</ul></li>
<li><strong>潜在问题</strong>
<ul>
<li>当链路成本依赖流量时可能出现震荡现象。</li>
<li>解决方案包括避免动态链路成本、异步执行算法等。</li>
</ul></li>
</ul>
<h3 id="距离向量dv路由算法">5.2.2 距离向量（DV）路由算法</h3>
<ul>
<li><strong>基本原理</strong>
<ul>
<li>基于Bellman-Ford方程，每个节点维护到所有目标的距离向量。</li>
<li>异步、分布式迭代更新机制。</li>
</ul></li>
<li><strong>运行流程</strong>
<ul>
<li>每个节点定期或根据变化发送距离向量给邻居。</li>
<li>接收新向量后更新自身距离表，并传播变化。</li>
</ul></li>
<li><strong>收敛性</strong>
<ul>
<li>在所有节点持续交换信息的前提下，最终会收敛到实际最短路径。</li>
</ul></li>
<li><strong>应用场景</strong>
<ul>
<li>广泛用于RIP、BGP等协议。</li>
</ul></li>
<li><strong>问题与改进</strong>
<ul>
<li>计数到无穷问题（Count-to-Infinity）可能导致环路。</li>
<li>使用<strong>毒性逆转（Poisoned
Reverse）</strong>缓解局部环路问题。</li>
</ul></li>
</ul>
<h3 id="ls与dv算法对比">LS与DV算法对比</h3>
<ul>
<li><strong>消息复杂度</strong>
<ul>
<li>LS需O(|N|×|E|)消息量，DV依赖邻居间多次交换。</li>
</ul></li>
<li><strong>收敛速度</strong>
<ul>
<li>LS较快且确定，DV可能慢且存在环路风险。</li>
</ul></li>
<li><strong>鲁棒性</strong>
<ul>
<li>LS局部错误影响有限；DV错误可能扩散至全网。</li>
</ul></li>
</ul>
<hr />
<h2 id="internet内部as路由ospf">5.3 Internet内部AS路由：OSPF</h2>
<h3 id="ospf概述">OSPF概述</h3>
<ul>
<li><strong>协议特点</strong>
<ul>
<li>开放标准（RFC 2328），基于链路状态。</li>
<li>使用Dijkstra算法计算最短路径树。</li>
</ul></li>
<li><strong>链路权重设置</strong>
<ul>
<li>管理员可配置，支持最小跳数或按带宽调整。</li>
<li>权重影响流量工程策略，如最小化最大链路利用率。</li>
</ul></li>
</ul>
<h3 id="核心功能">核心功能</h3>
<ul>
<li><strong>链路状态广播</strong>
<ul>
<li>定期更新（每30分钟）+ 实时通知链路变化。</li>
<li>OSPF报文直接封装在IP中（协议号89）。</li>
</ul></li>
<li><strong>邻居发现</strong>
<ul>
<li>HELLO协议检测链路可达性。</li>
<li>同步链路状态数据库。</li>
</ul></li>
</ul>
<h3 id="安全与扩展性">安全与扩展性</h3>
<ul>
<li><strong>认证机制</strong>
<ul>
<li>支持简单密码与MD5哈希认证，防止伪造路由信息。</li>
</ul></li>
<li><strong>多路径支持</strong>
<ul>
<li>支持等价多路径（ECMP）负载均衡。</li>
</ul></li>
<li><strong>组播支持</strong>
<ul>
<li>MOSPF扩展支持组播路由。</li>
</ul></li>
<li><strong>区域划分</strong>
<ul>
<li>分层结构：骨干区域（Backbone Area）连接各子区域。</li>
<li>区域边界路由器（Area Border Router）负责跨区通信。</li>
</ul></li>
</ul>
<h3 id="应用场景-1">应用场景</h3>
<ul>
<li>适用于大规模自治系统内部路由。</li>
<li>支持灵活的网络分层管理。## 5.4 ISP之间的路由：BGP</li>
</ul>
<h3 id="bgp的作用">5.4.1 BGP的作用</h3>
<ul>
<li><strong>提供前缀可达性信息</strong>
<ul>
<li>每个子网通过BGP广播其存在，确保全网路由器知晓。</li>
<li>若无BGP，各子网将成为孤立“岛屿”。</li>
</ul></li>
<li><strong>确定最佳路径</strong>
<ul>
<li>路由器可能学习到多个路径，需选择最优路径。</li>
<li>路径选择基于策略和可达性信息。</li>
</ul></li>
</ul>
<h3 id="bgp路由信息发布">5.4.2 BGP路由信息发布</h3>
<h4 id="示例网络结构">示例网络结构</h4>
<ul>
<li>包含三个自治系统（AS）：AS1、AS2、AS3。</li>
<li>AS3包含前缀x的子网。</li>
<li>网络中每个路由器为<strong>网关路由器</strong>或<strong>内部路由器</strong>。</li>
</ul>
<h4 id="bgp连接类型">BGP连接类型</h4>
<ul>
<li><strong>外部BGP（eBGP）</strong>：跨AS的路由器之间建立的TCP连接（端口179）。</li>
<li><strong>内部BGP（iBGP）</strong>：同一AS内路由器之间的TCP连接。</li>
</ul>
<h4 id="路由传播过程">路由传播过程</h4>
<ul>
<li>AS3通过eBGP向AS2发送路由信息（如“AS3 x”）。</li>
<li>AS2通过iBGP将该信息转发给AS2内其他路由器。</li>
<li>AS2再通过eBGP向AS1发送更新路径（如“AS2 AS3 x”）。</li>
<li>最终所有AS1和AS2路由器都了解前缀x及其路径。</li>
</ul>
<h3 id="最佳路径选择">5.4.3 最佳路径选择</h3>
<h4 id="bgp属性与路由定义">BGP属性与路由定义</h4>
<ul>
<li><strong>AS-PATH</strong>：记录路径经过的AS序列。</li>
<li><strong>NEXT-HOP</strong>：下一跳接口的IP地址。</li>
<li>路由 = (NEXT-HOP, AS-PATH, 目标前缀)</li>
</ul>
<h4 id="路由选择算法">路由选择算法</h4>
<ol type="1">
<li><strong>本地偏好值（Local Preference）</strong>
<ul>
<li>值越高优先级越高，由本AS管理员设定。</li>
</ul></li>
<li><strong>最短AS路径</strong>
<ul>
<li>类似距离向量算法，使用AS跳数作为度量。</li>
</ul></li>
<li><strong>热土豆路由（Hot Potato Routing）</strong>
<ul>
<li>选择最近的下一跳路由器。</li>
</ul></li>
<li><strong>路由器标识符</strong>
<ul>
<li>若仍有多个路径，则使用路由器ID决定。</li>
</ul></li>
</ol>
<h4 id="示例分析-1">示例分析</h4>
<ul>
<li>在图5.10中，AS1到x有两条路径：“AS2 AS3 x”和“AS3 x”。</li>
<li>根据规则2，优先选择较短路径“AS3 x”。</li>
</ul>
<h3 id="ip任播ip-anycast">5.4.4 IP任播（IP-Anycast）</h3>
<ul>
<li><strong>实现方式</strong>
<ul>
<li>CDN服务器配置相同IP地址。</li>
<li>通过BGP广播该IP，不同服务器发布相同前缀。</li>
</ul></li>
<li><strong>效果</strong>
<ul>
<li>用户访问时自动被导向“最近”的服务器。</li>
</ul></li>
<li><strong>应用场景</strong>
<ul>
<li>DNS根服务器广泛使用IP Anycast。</li>
</ul></li>
</ul>
<h3 id="路由策略">5.4.5 路由策略</h3>
<ul>
<li><strong>策略优先于技术指标</strong>
<ul>
<li>如拒绝某些AS路径，即使路径更短。</li>
</ul></li>
<li><strong>客户-提供商关系</strong>
<ul>
<li>提供商仅转发源/目的在客户网络中的流量。</li>
</ul></li>
<li><strong>对等连接（Peering）</strong>
<ul>
<li>两个骨干ISP间直接连接，不承担第三方流量。</li>
</ul></li>
</ul>
<h3 id="构建互联网接入">5.4.6 构建互联网接入</h3>
<ul>
<li><strong>获取互联网接入</strong>
<ul>
<li>与本地ISP签约，获得IP地址段（如/24）。</li>
</ul></li>
<li><strong>域名注册</strong>
<ul>
<li>与域名注册商签约，注册域名（如xanadu.com）。</li>
</ul></li>
<li><strong>DNS部署</strong>
<ul>
<li>配置DNS服务器并将其IP注册至顶级域服务器。</li>
</ul></li>
<li><strong>BGP广播</strong>
<ul>
<li>ISP通过BGP广播你的前缀，使全球路由器识别你的网络。</li>
</ul></li>
</ul>
<hr />
<h2 id="sdn控制平面">5.5 SDN控制平面</h2>
<h3 id="sdn控制平面组成">5.5.1 SDN控制平面组成</h3>
<h4 id="sdn控制器架构">SDN控制器架构</h4>
<ul>
<li><strong>通信层</strong>
<ul>
<li>南向接口（Southbound API）：控制器与交换机通信（如OpenFlow）。</li>
</ul></li>
<li><strong>状态管理层</strong>
<ul>
<li>维护网络拓扑、链路状态、主机信息、流表等全局状态。</li>
</ul></li>
<li><strong>北向接口</strong>
<ul>
<li>提供RESTful API供应用调用，支持同步查询与异步事件通知。</li>
</ul></li>
</ul>
<h4 id="sdn网络控制应用">SDN网络控制应用</h4>
<ul>
<li><strong>路由应用</strong>
<ul>
<li>实现Dijkstra算法计算最短路径。</li>
</ul></li>
<li><strong>访问控制</strong>
<ul>
<li>控制哪些数据包应被丢弃。</li>
</ul></li>
<li><strong>负载均衡</strong>
<ul>
<li>控制多路径转发以实现服务器负载分担。</li>
</ul></li>
</ul>
<h3 id="openflow协议">5.5.2 OpenFlow协议</h3>
<ul>
<li><strong>控制器到交换机消息</strong>
<ul>
<li><strong>配置（Configuration）</strong>：设置交换机参数。</li>
<li><strong>修改状态（Modify-State）</strong>：添加/删除/修改流表项。</li>
<li><strong>读取状态（Read-State）</strong>：获取统计信息。</li>
<li><strong>发送数据包（Send-Packet）</strong>：控制器主动发送数据包。</li>
</ul></li>
<li><strong>交换机到控制器消息</strong>
<ul>
<li><strong>流表移除（Flow-Removed）</strong>：流表项超时或被删除。</li>
<li><strong>端口状态（Port-Status）</strong>：端口变化通知。</li>
<li><strong>数据包入（Packet-in）</strong>：未匹配流表的数据包上报控制器。</li>
</ul></li>
</ul>
<h3 id="数据与控制平面交互示例">5.5.3 数据与控制平面交互示例</h3>
<h4 id="场景链路状态变更">场景：链路状态变更</h4>
<ol type="1">
<li><strong>s1检测到链路故障</strong>
<ul>
<li>发送Port-Status消息通知控制器。</li>
</ul></li>
<li><strong>控制器更新链路状态数据库</strong>
<ul>
<li>通知链路状态管理模块。</li>
</ul></li>
<li><strong>路由应用收到链路状态变更通知</strong>
<ul>
<li>注册监听事件后触发。</li>
</ul></li>
<li><strong>应用重新计算最短路径</strong>
<ul>
<li>使用Dijkstra算法。</li>
</ul></li>
<li><strong>应用请求更新流表</strong>
<ul>
<li>流表管理模块生成更新指令。</li>
</ul></li>
<li><strong>控制器下发流表更新</strong>
<ul>
<li>通过OpenFlow协议更新s1、s4等受影响交换机。</li>
</ul></li>
</ol>
<h3 id="sdn的发展历程与未来">5.5.4 SDN的发展历程与未来</h3>
<ul>
<li><strong>起源</strong>
<ul>
<li>2004年提出控制与数据平面分离理念。</li>
<li>Ethane项目演化为OpenFlow。</li>
</ul></li>
<li><strong>未来方向</strong>
<ul>
<li>向大规模广域网扩展（如Google B4网络）。</li>
<li>与NFV融合，替代专用中间盒设备。</li>
<li>推动跨AS的SDN架构发展。</li>
</ul></li>
</ul>
<hr />
<h2 id="icmp互联网控制报文协议">5.6 ICMP：互联网控制报文协议</h2>
<h3 id="icmp作用">5.6.1 ICMP作用</h3>
<ul>
<li><strong>错误报告机制</strong>
<ul>
<li>报告不可达、超时、参数问题等网络异常。</li>
</ul></li>
<li><strong>网络诊断工具支持</strong>
<ul>
<li>Ping 和 Traceroute 基于ICMP实现。</li>
</ul></li>
</ul>
<h3 id="icmp报文格式">5.6.2 ICMP报文格式</h3>
<ul>
<li><strong>类型字段（Type）</strong>
<ul>
<li>标识报文类型（如回显请求、目标不可达）。</li>
</ul></li>
<li><strong>代码字段（Code）</strong>
<ul>
<li>进一步细化错误原因（如网络不可达、端口不可达）。</li>
</ul></li>
<li><strong>校验和字段</strong>
<ul>
<li>用于完整性校验。</li>
</ul></li>
</ul>
<h3 id="icmp常见应用">5.6.3 ICMP常见应用</h3>
<ul>
<li><strong>Ping命令</strong>
<ul>
<li>发送ICMP Echo Request，接收Echo Reply验证连通性。</li>
</ul></li>
<li><strong>Traceroute命令</strong>
<ul>
<li>利用TTL递减和ICMP Time Exceeded报文探测路径。</li>
</ul></li>
</ul>
<hr />
<h2 id="网络管理snmp">5.7 网络管理：SNMP</h2>
<h3 id="snmp概述">5.7.1 SNMP概述</h3>
<ul>
<li><strong>网络管理模型</strong>
<ul>
<li>管理站（Manager）与代理（Agent）协作。</li>
<li>管理信息库（MIB）存储被管对象数据。</li>
</ul></li>
</ul>
<h3 id="snmp操作">5.7.2 SNMP操作</h3>
<ul>
<li><strong>GetRequest</strong>
<ul>
<li>获取一个或多个变量值。</li>
</ul></li>
<li><strong>SetRequest</strong>
<ul>
<li>设置变量值。</li>
</ul></li>
<li><strong>GetNextRequest</strong>
<ul>
<li>获取下一个变量值，用于遍历MIB树。</li>
</ul></li>
<li><strong>Trap</strong>
<ul>
<li>代理主动上报事件（如接口down）。</li>
</ul></li>
<li><strong>InformRequest</strong>
<ul>
<li>可靠的Trap通知，要求确认响应。</li>
</ul></li>
</ul>
<h3 id="mib结构">5.7.3 MIB结构</h3>
<ul>
<li><strong>对象标识符（OID）</strong>
<ul>
<li>分层命名结构，唯一标识每个可管理对象。</li>
</ul></li>
<li><strong>标准MIB</strong>
<ul>
<li>system、interfaces、ip、tcp、udp等标准组别。</li>
</ul></li>
</ul>
<h3 id="snmp版本演进">5.7.4 SNMP版本演进</h3>
<ul>
<li><strong>SNMPv1</strong>
<ul>
<li>基础功能，安全性差。</li>
</ul></li>
<li><strong>SNMPv2c</strong>
<ul>
<li>支持批量操作，仍使用明文社区字符串。</li>
</ul></li>
<li><strong>SNMPv3</strong>
<ul>
<li>引入认证与加密，提升安全性。## 5.6 ICMP：互联网控制报文协议</li>
</ul></li>
</ul>
<h3 id="icmp的基本功能">5.6.1 ICMP的基本功能</h3>
<ul>
<li>ICMP用于主机和路由器之间在网络层交换控制信息。</li>
<li>主要用途是<strong>错误报告</strong>，例如“目标网络不可达”。</li>
<li>ICMP消息封装在IP数据报中作为载荷传输。</li>
<li>ICMP消息包含<strong>类型字段</strong>和<strong>代码字段</strong>，并附带引发错误的原始IP数据报头部及前8字节内容。</li>
</ul>
<h3 id="常见icmp消息类型">5.6.2 常见ICMP消息类型</h3>
<ul>
<li><strong>Echo Reply（类型0，代码0）</strong>：响应Ping请求。</li>
<li><strong>目标网络不可达（类型3，代码0）</strong></li>
<li><strong>目标主机不可达（类型3，代码1）</strong></li>
<li><strong>目标协议不可达（类型3，代码2）</strong></li>
<li><strong>目标端口不可达（类型3，代码3）</strong></li>
<li><strong>TTL超时（类型11，代码0）</strong></li>
<li><strong>IP头部错误（类型12，代码0）</strong></li>
<li><strong>Echo Request（类型8，代码0）</strong>：用于Ping程序。</li>
</ul>
<h3 id="ping与traceroute的实现">5.6.3 Ping与Traceroute的实现</h3>
<ul>
<li><strong>Ping</strong>：发送ICMP Echo
Request（类型8，代码0），接收方返回Echo Reply（类型0，代码0）。</li>
<li><strong>Traceroute</strong>：
<ul>
<li>发送一系列UDP数据报，TTL依次递增（1, 2, 3…）。</li>
<li>每个路由器在TTL减至0时发送ICMP TTL超时消息（类型11，代码0）。</li>
<li>最终目标主机返回“端口不可达”ICMP消息（类型3，代码3），表示路径探测完成。</li>
</ul></li>
</ul>
<h3 id="ipv6中的icmpv6">5.6.4 IPv6中的ICMPv6</h3>
<ul>
<li>ICMPv6为IPv6重新定义了消息类型。</li>
<li>新增类型包括：
<ul>
<li><strong>Packet Too Big（类型2）</strong></li>
<li><strong>Unrecognized IPv6 Options（类型4）</strong></li>
</ul></li>
</ul>
<h2 id="网络管理与snmpnetconfyang">5.7 网络管理与SNMP、NETCONF/YANG</h2>
<h3 id="网络管理框架概述">5.7.1 网络管理框架概述</h3>
<ul>
<li><strong>管理服务器（Managing Server）</strong>
<ul>
<li>网络管理中心，负责数据收集、分析与命令下发。</li>
</ul></li>
<li><strong>被管理设备（Managed Device）</strong>
<ul>
<li>包括主机、路由器、交换机等，设备具有可配置参数和运行状态。</li>
</ul></li>
<li><strong>设备数据（Device Data）</strong>
<ul>
<li>包括<strong>配置数据</strong>（如IP地址）、<strong>运行数据</strong>（如邻居列表）、<strong>统计信息</strong>（如丢包数）。</li>
</ul></li>
<li><strong>网络管理代理（Agent）</strong>
<ul>
<li>运行在被管理设备上的软件，与管理服务器通信并执行命令。</li>
</ul></li>
<li><strong>网络管理协议</strong>
<ul>
<li>提供管理服务器与代理之间的通信机制，用于查询状态、控制设备、接收异常通知。</li>
</ul></li>
</ul>
<h3 id="简单网络管理协议snmp与管理信息库mib">5.7.2
简单网络管理协议（SNMP）与管理信息库（MIB）</h3>
<h4 id="snmpv3协议概述">SNMPv3协议概述</h4>
<ul>
<li>应用层协议，用于管理服务器与代理之间交换控制与状态信息。</li>
<li>采用<strong>请求-响应模式</strong>：
<ul>
<li><strong>GetRequest</strong>：获取一个或多个MIB对象值。</li>
<li><strong>GetNextRequest</strong>：获取MIB对象列表中的下一个值。</li>
<li><strong>GetBulkRequest</strong>：一次性获取大量数据。</li>
<li><strong>SetRequest</strong>：设置MIB对象值。</li>
<li><strong>Response</strong>：对请求的响应。</li>
<li><strong>Trap</strong>：代理主动发送的异常事件通知。</li>
</ul></li>
<li>通常通过UDP传输，无可靠保证，需管理服务器自行处理重传。</li>
</ul>
<h4 id="管理信息库mib">管理信息库（MIB）</h4>
<ul>
<li>MIB对象表示设备的配置与运行状态。</li>
<li>示例：<code>ipSystemStatsInDelivers</code>表示成功交付给上层协议的IP数据报数量。</li>
<li>RFC定义了标准MIB模块，厂商也可定义私有MIB。</li>
<li>常见MIB模块：
<ul>
<li>[RFC 4293]：IP与ICMP管理对象。</li>
<li>[RFC 4022]：TCP管理对象。</li>
<li>[RFC 4113]：UDP管理对象。</li>
</ul></li>
</ul>
<h3 id="网络配置协议netconf与yang">5.7.3
网络配置协议（NETCONF）与YANG</h3>
<h4 id="netconf协议功能">NETCONF协议功能</h4>
<ul>
<li>提供对设备配置的<strong>获取、修改、锁定、解锁</strong>等操作。</li>
<li>支持订阅设备事件通知。</li>
<li>使用XML格式的<strong>远程过程调用（RPC）</strong>进行通信。</li>
<li>基于安全连接（如TLS over TCP）。</li>
</ul>
<h4 id="netconf操作示例">NETCONF操作示例</h4>
<ul>
<li><strong><code>&lt;get&gt;</code></strong>：获取设备的运行与配置数据。</li>
<li><strong><code>&lt;get-config&gt;</code></strong>：获取指定配置（如运行配置）。</li>
<li><strong><code>&lt;edit-config&gt;</code></strong>：修改设备配置，如设置接口MTU。</li>
<li><strong><code>&lt;lock&gt; / &lt;unlock&gt;</code></strong>：锁定配置数据库，防止并发修改。</li>
<li><strong><code>&lt;create-subscription&gt;</code></strong>：订阅设备事件通知。</li>
</ul>
<h4 id="yang数据建模语言">YANG数据建模语言</h4>
<ul>
<li>用于定义NETCONF使用的配置与状态数据结构。</li>
<li>支持内置数据类型与用户定义约束，确保配置一致性。</li>
<li>可生成描述设备能力的XML文档。</li>
<li>与SMI在SNMP中作用类似，但更强大灵活。</li>
</ul>
<h3 id="网络管理方式比较">5.7.4 网络管理方式比较</h3>
<ul>
<li><strong>CLI命令行接口</strong>
<ul>
<li>直接操作设备，但易出错，难以自动化与大规模部署。</li>
</ul></li>
<li><strong>SNMP/MIB</strong>
<ul>
<li>用于监控设备状态与统计信息，SetRequest用于配置但使用较少。</li>
<li>安全性不足，曾主要用于监控而非控制。</li>
</ul></li>
<li><strong>NETCONF/YANG</strong>
<ul>
<li>强调<strong>配置管理</strong>，支持多设备原子操作。</li>
<li>更适合大规模、自动化网络管理。</li>
<li>是当前主流网络管理发展方向。## 5.8 总结</li>
</ul></li>
<li>控制平面的两种构建方式：
<ul>
<li><strong>基于每台路由器的控制</strong>
<ul>
<li>每个路由器独立运行路由算法。</li>
<li>路由器之间相互通信以交换路由信息。</li>
</ul></li>
<li><strong>基于逻辑集中式控制的SDN</strong>
<ul>
<li>控制器集中计算并分发转发表。</li>
<li>路由器仅负责数据转发。</li>
</ul></li>
</ul></li>
<li><strong>路由算法基础</strong>
<ul>
<li>两种核心算法：
<ul>
<li><strong>链路状态路由（Link-State）</strong>
<ul>
<li>每个节点掌握全网拓扑信息。</li>
<li>使用Dijkstra算法计算最短路径。</li>
</ul></li>
<li><strong>距离向量路由（Distance-Vector）</strong>
<ul>
<li>每个节点维护到其他节点的距离向量。</li>
<li>通过邻居交换信息逐步更新路径。</li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>实际应用</strong>
<ul>
<li>OSPF：基于链路状态的内部网关协议。</li>
<li>BGP：基于距离向量的外部网关协议，用于自治系统间通信。</li>
</ul></li>
<li><strong>SDN控制平面</strong>
<ul>
<li>SDN控制器三层结构：
<ul>
<li>通信层：与设备通信。</li>
<li>网络状态管理层：维护网络状态。</li>
<li>网络控制应用层：实现策略与转发规则。</li>
</ul></li>
<li>OpenFlow协议：
<ul>
<li>定义控制器与设备之间的通信。</li>
<li>支持流表管理与数据包转发。</li>
</ul></li>
</ul></li>
<li><strong>网络管理</strong>
<ul>
<li>ICMP协议：
<ul>
<li>用于网络诊断与错误报告。</li>
<li>如ping和traceroute。</li>
</ul></li>
<li>SNMP协议：
<ul>
<li>用于网络设备管理。</li>
<li>支持GetRequest、SetRequest和Trap消息。</li>
</ul></li>
<li>NETCONF/YANG：
<ul>
<li>提供更现代的配置管理接口。</li>
</ul></li>
</ul></li>
<li><strong>后续章节展望</strong>
<ul>
<li>下一章将进入链路层，研究如何在本地网络中传输数据包。</li>
<li>链路层任务虽然局部，但涉及多个关键技术如差错控制、介质访问控制等。</li>
</ul></li>
</ul>
<h2 id="作业与思考题">作业与思考题</h2>
<h3 id="复习题">复习题</h3>
<h4 id="节">5.1 节</h4>
<ul>
<li><strong>R1</strong>：基于每台路由器的控制平面是什么意思？“单体实现”指什么？</li>
<li><strong>R2</strong>：基于逻辑集中式控制的控制平面是什么意思？控制平面与数据平面是否在同一个设备中？</li>
</ul>
<h4 id="节-1">5.2 节</h4>
<ul>
<li><strong>R3</strong>：比较集中式与分布式路由算法，举例说明。</li>
<li><strong>R4</strong>：比较链路状态与距离向量路由算法。</li>
<li><strong>R5</strong>：距离向量路由中的“计数到无穷大”问题是什么？</li>
<li><strong>R6</strong>：是否每个自治系统都必须使用相同的内部路由算法？为什么？</li>
</ul>
<h4 id="节-2">5.3–5.4 节</h4>
<ul>
<li><strong>R7</strong>：为何Internet使用不同的内部和外部路由协议？</li>
<li><strong>R8</strong>：OSPF发送链路状态信息是否只发送给直接邻居？</li>
<li><strong>R9</strong>：OSPF中“区域”的概念及引入原因。</li>
<li><strong>R10</strong>：比较子网、前缀和BGP路由。</li>
<li><strong>R11</strong>：BGP中NEXT-HOP和AS-PATH属性的作用。</li>
<li><strong>R12</strong>：ISP如何通过BGP配置实现策略控制。</li>
<li><strong>R13</strong>：BGP接收路径后是否必须添加自身标识？</li>
</ul>
<h4 id="节-3">5.5 节</h4>
<ul>
<li><strong>R14</strong>：SDN控制器的通信层、状态管理层、应用层各自作用。</li>
<li><strong>R15</strong>：在SDN中实现新路由协议应在哪一层？</li>
<li><strong>R16</strong>：SDN控制器的北向和南向API传输哪些消息？</li>
<li><strong>R17</strong>：OpenFlow消息的类型及其作用（如Packet-In、Flow-Removed等）。</li>
<li><strong>R18</strong>：OpenDaylight中服务抽象层的作用。</li>
</ul>
<h4 id="节-4">5.6–5.7 节</h4>
<ul>
<li><strong>R19</strong>：四种ICMP消息类型。</li>
<li><strong>R20</strong>：Traceroute使用的两种ICMP消息。</li>
<li><strong>R21</strong>：SNMP中的管理服务器、被管设备、代理、MIB定义。</li>
<li><strong>R22</strong>：GetRequest和SetRequest消息的作用。</li>
<li><strong>R23</strong>：Trap消息的作用。</li>
</ul>
<h2 id="编程实验">编程实验</h2>
<h3 id="icmp-ping-实验">ICMP Ping 实验</h3>
<ul>
<li>编写一个基于ICMP的Ping程序。
<ul>
<li>发送ICMP Echo Request，接收Echo Response。</li>
<li>计算RTT、丢包率、统计延迟（最小、平均、最大、标准差）。</li>
<li>使用Python实现，仅需编写客户端。</li>
</ul></li>
</ul>
<h3 id="路由协议模拟实验">路由协议模拟实验</h3>
<ul>
<li>实现一个异步分布式距离向量路由协议。
<ul>
<li>每个节点维护距离表。</li>
<li>初始化函数rtinitX()设置初始距离。</li>
<li>更新函数rtupdateX()接收邻居信息并更新距离表。</li>
<li>当路径变化时，向邻居发送更新信息。</li>
<li>使用模拟环境调用tolayer2()发送路由更新包。</li>
</ul></li>
</ul>
<h2 id="wireshark-实验icmp">Wireshark 实验：ICMP</h2>
<ul>
<li>使用Wireshark抓包分析ICMP协议行为。
<ul>
<li>观察ICMP Echo Request/Reply。</li>
<li>分析Traceroute过程中的TTL超时和端口不可达消息。</li>
<li>理解ICMP报文结构和网络诊断机制。### Wireshark 实验：ICMP</li>
</ul></li>
<li>实验内容涉及使用Wireshark分析ICMP协议在<code>ping</code>和<code>traceroute</code>命令中的应用。</li>
<li>实验资源可在教材官网获取：www.pearsonhighered.com/cs-resources。</li>
</ul>
<h3 id="人物访谈jennifer-rexford">人物访谈：Jennifer Rexford</h3>
<h4 id="职业背景-1">职业背景</h4>
<ul>
<li>普林斯顿大学计算机科学系教授。</li>
<li>1996–2004年任职于AT&amp;T实验室，研究网络测量、流量工程与路由器配置。</li>
<li>曾获ACM Grace Murray Hopper奖、ACM
Athena讲座奖、IEEE互联网奖等多项荣誉。</li>
<li>美国国家工程院院士（2014年入选）。</li>
</ul>
<h4 id="代表项目与挑战">代表项目与挑战</h4>
<ul>
<li>设计了<strong>路由控制平台（RCP）</strong>，实现对ISP骨干网的集中式路由管理。</li>
<li>在单台普通计算机上计算全网路由，并兼容传统路由器。</li>
<li>该项目为后续SDN技术的发展奠定了基础。</li>
</ul>
<h4 id="对sdn未来的看法">对SDN未来的看法</h4>
<ul>
<li>SDN应提供更好的编程抽象，支持多个独立应用协同工作。</li>
<li>应简化底层细节（如流表项、包头格式等）。</li>
<li>分布式设备更新需有良好的抽象机制，便于管理员理解更新过程中数据包的行为变化。</li>
<li>强调跨学科研究：网络、分布式系统与编程语言的结合具有重要实践价值。</li>
</ul>
<h4 id="对网络与互联网未来的展望">对网络与互联网未来的展望</h4>
<ul>
<li>网络技术持续演进，受智能手机、云计算、物联网等驱动。</li>
<li>未来网络应“隐形”地支持创新，不成为性能与部署的瓶颈。</li>
<li>需要从更高层次抽象网络设备与协议，关注用户整体目标。</li>
</ul>
<h4 id="受启发的人物">受启发的人物</h4>
<ul>
<li>Sally Floyd：国际计算机科学研究所研究员。</li>
<li>致力于解决互联网关键问题，推动研究成果进入标准与设备。</li>
<li>开发了广泛使用的网络模拟器ns-2与ns-3。</li>
<li>积极参与社区服务，影响深远。</li>
</ul>
<h4 id="给学生的建议-1">给学生的建议</h4>
<ul>
<li>网络领域高度跨学科，涉及排队论、博弈论、控制理论、机器学习等多个方向。</li>
<li>建议学生掌握相关领域的知识或与专家合作，夯实网络研究基础。</li>
<li>注重系统设计与构建能力，通过操作系统、计算机体系结构等课程提升实践水平。</li>
</ul>
<h1 id="链路层与局域网">链路层与局域网</h1>
<h2 id="链路层概述">6.1 链路层概述</h2>
<h3 id="链路层的基本服务">6.1.1 链路层的基本服务</h3>
<ul>
<li><strong>链路层功能</strong>
<ul>
<li>在两个相邻节点之间传输数据报。</li>
<li>数据封装为<strong>帧（Frame）</strong>，包含头部和数据部分。</li>
<li>支持多种链路协议，如以太网、WiFi、PPP等。</li>
</ul></li>
<li><strong>多路访问问题</strong>
<ul>
<li>多个节点共享广播信道时如何协调帧的发送？</li>
</ul></li>
<li><strong>链路层地址</strong>
<ul>
<li>MAC地址用于标识本地网络中的设备。</li>
</ul></li>
</ul>
<h3 id="链路层实现位置">6.1.2 链路层实现位置</h3>
<ul>
<li><strong>硬件实现</strong>
<ul>
<li>网络适配器（NIC）负责帧封装、错误检测等。</li>
</ul></li>
<li><strong>软件实现</strong>
<ul>
<li>主机操作系统处理链路层配置、地址解析等。</li>
</ul></li>
</ul>
<h2 id="错误检测与纠正技术">6.2 错误检测与纠正技术</h2>
<h3 id="奇偶校验">6.2.1 奇偶校验</h3>
<ul>
<li><strong>单比特奇偶校验</strong>
<ul>
<li>添加一个比特使总“1”数为偶数或奇数。</li>
<li>只能检测奇数个错误，不能纠错。</li>
</ul></li>
<li><strong>二维奇偶校验</strong>
<ul>
<li>检测并纠正单比特错误。</li>
<li>支持双比特错误检测。</li>
</ul></li>
</ul>
<h3 id="校验和方法">6.2.2 校验和方法</h3>
<ul>
<li><strong>Internet 校验和</strong>
<ul>
<li>将数据视为16位整数求和，取反码作为校验和。</li>
<li>TCP/UDP中使用，适用于低出错率链路。</li>
</ul></li>
</ul>
<h3 id="循环冗余校验crc">6.2.3 循环冗余校验（CRC）</h3>
<ul>
<li><strong>基本原理</strong>
<ul>
<li>使用生成多项式G(x)，计算余数R作为冗余位。</li>
<li>接收方通过除法判断是否出错。</li>
</ul></li>
<li><strong>特点</strong>
<ul>
<li>可检测所有长度小于r+1的突发错误。</li>
<li>广泛用于链路层，如Ethernet、PPP。</li>
</ul></li>
</ul>
<h2 id="多路访问链路与协议">6.3 多路访问链路与协议</h2>
<h3 id="信道划分协议">6.3.1 信道划分协议</h3>
<h4 id="时间划分tdm">时间划分（TDM）</h4>
<ul>
<li>每个节点分配固定时间槽。</li>
<li>无冲突，但效率低，无法动态适应流量变化。</li>
</ul>
<h4 id="频率划分fdm">频率划分（FDM）</h4>
<ul>
<li>将带宽划分为多个子频段。</li>
<li>类似TDM，资源固定分配。</li>
</ul>
<h4 id="码分多址cdma">码分多址（CDMA）</h4>
<ul>
<li>每个节点使用唯一编码传输。</li>
<li>支持同时传输，抗干扰能力强。</li>
<li>广泛用于无线通信。</li>
</ul>
<h3 id="随机访问协议">6.3.2 随机访问协议</h3>
<h4 id="aloha-协议">ALOHA 协议</h4>
<ul>
<li><strong>纯ALOHA</strong>
<ul>
<li>节点随时发送，碰撞后随机延迟重传。</li>
<li>最大效率：1/(2e) ≈ 18%。</li>
</ul></li>
<li><strong>时隙ALOHA</strong>
<ul>
<li>所有节点同步发送，效率更高。</li>
<li>最大效率：1/e ≈ 37%。</li>
</ul></li>
</ul>
<h4 id="csma载波侦听多路访问">CSMA（载波侦听多路访问）</h4>
<ul>
<li><strong>CSMA</strong>
<ul>
<li>发送前侦听信道是否空闲。</li>
</ul></li>
<li><strong>CSMA/CD</strong>
<ul>
<li>检测到冲突立即停止发送。</li>
<li>用于以太网，效率随传播延迟增加而下降。</li>
</ul></li>
<li><strong>退避算法</strong>
<ul>
<li>使用二进制指数退避选择K值，避免持续冲突。</li>
</ul></li>
</ul>
<h3 id="轮流协议">6.3.3 轮流协议</h3>
<h4 id="轮询协议">轮询协议</h4>
<ul>
<li>由主节点轮询各节点。</li>
<li>无冲突，但存在轮询延迟。</li>
<li>若主节点失效，整个系统瘫痪。</li>
</ul>
<h4 id="令牌传递协议">令牌传递协议</h4>
<ul>
<li>令牌在节点间循环。</li>
<li>无需主节点，但节点故障可能中断系统。</li>
<li>实例：IEEE 802.5 Token Ring。</li>
</ul>
<h3 id="docsis协议有线网络链路层">6.3.4
DOCSIS协议（有线网络链路层）</h3>
<ul>
<li><strong>下行与上行信道</strong>
<ul>
<li>使用FDM划分频率。</li>
<li>下行单一源（CMTS），无冲突。</li>
<li>上行多节点共享，需冲突控制。</li>
</ul></li>
<li><strong>MAP帧与Mini-slot</strong>
<ul>
<li>CMTS通过MAP消息分配发送时段。</li>
<li>请求帧采用随机接入方式，可能冲突。</li>
</ul></li>
<li><strong>冲突处理</strong>
<ul>
<li>未收到响应则认为冲突发生。</li>
<li>使用二进制指数退避机制重传。</li>
</ul></li>
</ul>
<h2 id="交换式局域网">6.4 交换式局域网</h2>
<h3 id="局域网寻址与arp">6.4.1 局域网寻址与ARP</h3>
<ul>
<li><strong>MAC地址</strong>
<ul>
<li>48位全球唯一地址，用于局域网内通信。</li>
</ul></li>
<li><strong>地址解析协议（ARP）</strong>
<ul>
<li>将IP地址映射为MAC地址。</li>
<li>ARP缓存维护IP-MAC对应关系。</li>
</ul></li>
</ul>
<h3 id="以太网技术">6.4.2 以太网技术</h3>
<ul>
<li><strong>帧格式</strong>
<ul>
<li>包含目标MAC、源MAC、类型、数据、CRC。</li>
</ul></li>
<li><strong>CSMA/CD机制</strong>
<ul>
<li>早期以太网使用，现代全双工环境下不再需要。</li>
</ul></li>
<li><strong>速率发展</strong>
<ul>
<li>从10Mbps → 100Mbps → 1Gbps → 10Gbps演进。</li>
</ul></li>
</ul>
<h3 id="交换机工作原理">6.4.3 交换机工作原理</h3>
<ul>
<li><strong>自学习能力</strong>
<ul>
<li>维护交换表（MAC地址→端口）。</li>
</ul></li>
<li><strong>转发决策</strong>
<ul>
<li>根据目的MAC查找端口转发。</li>
</ul></li>
<li><strong>广播与泛洪</strong>
<ul>
<li>未知MAC地址时广播帧。</li>
</ul></li>
</ul>
<h3 id="vlan虚拟局域网">6.4.4 VLAN虚拟局域网</h3>
<ul>
<li><strong>逻辑隔离</strong>
<ul>
<li>同一物理网络中划分不同广播域。</li>
</ul></li>
<li><strong>VLAN标签</strong>
<ul>
<li>IEEE 802.1Q标准定义VLAN ID字段。</li>
</ul></li>
<li><strong>跨交换机通信</strong>
<ul>
<li>Trunk链路携带多个VLAN信息。</li>
</ul></li>
</ul>
<h3 id="数据中心网络">6.4.5 数据中心网络</h3>
<ul>
<li><strong>高性能需求</strong>
<ul>
<li>高带宽、低延迟、可扩展性。</li>
</ul></li>
<li><strong>结构设计</strong>
<ul>
<li>Fat Tree、Clos架构支持大规模并行通信。</li>
</ul></li>
<li><strong>SDN集成</strong>
<ul>
<li>控制平面集中化，提升灵活性与管理效率。## 6.4 交换式局域网</li>
</ul></li>
</ul>
<h3 id="链路层寻址与arp">6.4.1 链路层寻址与ARP</h3>
<h4 id="mac地址">MAC地址</h4>
<ul>
<li>每个网络接口（适配器）具有唯一的MAC地址，长度为6字节（48位），全球唯一。</li>
<li>MAC地址结构扁平化，不随位置变化而改变。</li>
<li>IEEE负责管理MAC地址空间，分配前24位给厂商，后24位由厂商自定义。</li>
</ul>
<h4 id="arp协议">ARP协议</h4>
<ul>
<li><strong>作用</strong>：将IP地址解析为对应的MAC地址。</li>
<li><strong>工作原理</strong>：
<ul>
<li>主机维护ARP表，包含IP地址与MAC地址的映射关系及TTL（生存时间）。</li>
<li>若ARP表中没有目标IP对应的MAC地址，则发送ARP广播请求。</li>
<li>接收方回应其MAC地址，发送方更新ARP表并继续发送数据帧。</li>
</ul></li>
<li><strong>广播机制</strong>：
<ul>
<li>ARP请求使用广播MAC地址 FF-FF-FF-FF-FF-FF 发送。</li>
</ul></li>
<li><strong>跨子网通信</strong>：
<ul>
<li>数据包需先发送到路由器接口，再由路由器转发至目标子网。</li>
<li>路由器通过ARP获取下一跳MAC地址。</li>
</ul></li>
</ul>
<h3 id="以太网技术-1">6.4.2 以太网技术</h3>
<h4 id="以太网帧格式">以太网帧格式</h4>
<ul>
<li><strong>字段说明</strong>：
<ul>
<li>目标MAC地址（6字节）</li>
<li>源MAC地址（6字节）</li>
<li>类型字段（2字节）：指示上层协议（如IP、ARP等）</li>
<li>数据字段（46–1500字节）</li>
<li>CRC校验码（4字节）</li>
</ul></li>
<li><strong>最大传输单元（MTU）</strong>：1500字节，超过则需分片。</li>
<li><strong>最小数据字段长度</strong>：46字节，不足时填充。</li>
</ul>
<h4 id="以太网发展">以太网发展</h4>
<ul>
<li><strong>速率演进</strong>：
<ul>
<li>10 Mbps → 100 Mbps → 1 Gbps → 10 Gbps → 40 Gbps</li>
</ul></li>
<li><strong>物理介质支持</strong>：
<ul>
<li>双绞线（如100BASE-TX、10GBASE-T）</li>
<li>光纤（如1000BASE-LX）</li>
</ul></li>
<li><strong>拓扑结构演变</strong>：
<ul>
<li>总线型拓扑（早期）</li>
<li>集线器星型拓扑（Hub-based）</li>
<li>交换机星型拓扑（Switched Ethernet）</li>
</ul></li>
</ul>
<h4 id="csmacd机制">CSMA/CD机制</h4>
<ul>
<li><strong>适用场景</strong>：共享总线或集线器连接的以太网。</li>
<li><strong>冲突检测与退避</strong>：
<ul>
<li>发送过程中持续监听信道状态。</li>
<li>冲突发生时立即停止发送，并发出拥塞信号。</li>
<li>使用二进制指数退避算法重传。</li>
</ul></li>
</ul>
<h3 id="链路层交换机工作原理">6.4.3 链路层交换机工作原理</h3>
<h4 id="转发与过滤">转发与过滤</h4>
<ul>
<li><strong>交换机功能</strong>：
<ul>
<li><strong>转发</strong>：确定数据帧应从哪个端口输出。</li>
<li><strong>过滤</strong>：判断是否丢弃数据帧。</li>
</ul></li>
<li><strong>交换表（Switch Table）</strong>：
<ul>
<li>包含MAC地址、对应端口、记录时间。</li>
<li>初始为空，通过自学习动态构建。</li>
<li>老化机制：若某MAC地址在设定时间内未出现，则删除该条目。</li>
</ul></li>
</ul>
<h4 id="自学习机制">自学习机制</h4>
<ul>
<li><strong>过程</strong>：
<ol type="1">
<li>接收到数据帧后，记录源MAC地址与输入端口。</li>
<li>更新交换表。</li>
<li>查找目标MAC地址：
<ul>
<li>若存在，转发至指定端口。</li>
<li>若不存在，向除输入端口外的所有端口广播。</li>
</ul></li>
</ol></li>
</ul>
<h4 id="交换机优势">交换机优势</h4>
<ul>
<li><strong>消除冲突</strong>：每个端口独立通信，无需竞争带宽。</li>
<li><strong>异构链路支持</strong>：不同速率和介质可共存。</li>
<li><strong>易管理性</strong>：
<ul>
<li>支持流量监控、统计信息收集。</li>
<li>可隔离故障设备（如异常发送大量帧的适配器）。</li>
</ul></li>
</ul>
<h3 id="虚拟局域网vlan">6.4.4 虚拟局域网（VLAN）</h3>
<h4 id="vlan概念">VLAN概念</h4>
<ul>
<li><strong>目的</strong>：在同一物理网络中划分多个逻辑广播域。</li>
<li><strong>实现方式</strong>：
<ul>
<li><strong>基于端口的VLAN</strong>：交换机端口被分配到不同VLAN。</li>
<li><strong>广播域隔离</strong>：仅同VLAN内的设备可接收到广播帧。</li>
</ul></li>
</ul>
<h4 id="vlan配置示例">VLAN配置示例</h4>
<ul>
<li>单一交换机划分为EE（电气工程）与CS（计算机科学）两个VLAN。</li>
<li>端口2–8属于EE VLAN；端口9–15属于CS VLAN。</li>
</ul>
<h4 id="vlan间通信">VLAN间通信</h4>
<ul>
<li><strong>解决方案</strong>：
<ul>
<li>连接外部路由器，使不同VLAN之间通过路由器通信。</li>
<li>使用三层交换机（集成路由功能的交换机）。</li>
</ul></li>
</ul>
<h4 id="vlan-trunking干线连接">VLAN Trunking（干线连接）</h4>
<ul>
<li><strong>用途</strong>：连接多个支持VLAN的交换机。</li>
<li><strong>机制</strong>：
<ul>
<li>使用Trunk端口承载多个VLAN的数据。</li>
<li>使用IEEE 802.1Q协议，在以太网帧中插入4字节的VLAN标签。
<ul>
<li>标签包括：TPID（固定值8100）、VLAN
ID（12位）、优先级字段（3位）。</li>
</ul></li>
</ul></li>
</ul>
<h4 id="vlan类型扩展">VLAN类型扩展</h4>
<ul>
<li><strong>基于MAC地址的VLAN</strong>：根据设备MAC地址划分VLAN。</li>
<li><strong>基于网络协议的VLAN</strong>：如IPv4、IPv6、AppleTalk等。</li>
<li><strong>跨IP路由器的VLAN扩展</strong>：实现广域范围的虚拟局域网。##
6.6 数据中心网络</li>
</ul>
<h3 id="数据中心架构">6.6.1 数据中心架构</h3>
<ul>
<li><strong>数据中心的三大作用</strong>
<ul>
<li>提供内容（如网页、邮件、视频）</li>
<li>支持大规模并行计算（如搜索引擎索引）</li>
<li>提供云计算服务（如AWS、Azure）</li>
</ul></li>
<li><strong>成本构成</strong>
<ul>
<li>主机：45%</li>
<li>基础设施（UPS、冷却）：25%</li>
<li>电力：15%</li>
<li>网络设备与带宽：15%</li>
</ul></li>
<li><strong>主机结构</strong>
<ul>
<li>使用标准化“刀片服务器”</li>
<li>每机架20–40个主机</li>
<li>TOR交换机连接机架内主机与其他网络设备</li>
<li>主机通常具有40/100 Gbps以太网连接</li>
</ul></li>
<li><strong>拓扑结构</strong>
<ul>
<li>分层设计（接入路由器 → Tier-1交换机 → Tier-2交换机 →
TOR交换机）</li>
<li>所有链路使用以太网协议（铜缆或光纤）</li>
<li>支持扩展至数十万主机</li>
</ul></li>
<li><strong>负载均衡器</strong>
<ul>
<li>接收外部请求并分发至合适主机</li>
<li>实现NAT功能，隐藏内部IP结构</li>
<li>又称“四层交换机”，基于IP+端口进行转发决策</li>
</ul></li>
<li><strong>冗余设计</strong>
<ul>
<li>所有关键设备和链路均支持冗余配置</li>
<li>每个TOR可连接多个Tier-2交换机</li>
<li>每个子网进一步划分为VLAN（每个包含数百台主机）</li>
</ul></li>
<li><strong>通信瓶颈问题</strong>
<ul>
<li>不同机架间通信受限于共享链路容量</li>
<li>例如：100G链路被40个流共享 → 每流仅2.5G</li>
<li>解决方案：
<ul>
<li>升级高速交换设备（成本高）</li>
<li>同构部署相关服务（灵活性差）</li>
<li>多路径互联（如图6.31）</li>
</ul></li>
</ul></li>
<li><strong>多路径路由</strong>
<ul>
<li>ECMP（等价多路径）实现流量随机分配</li>
<li>高级方案支持更细粒度负载均衡</li>
<li>个别方案支持包级多路径路由</li>
</ul></li>
</ul>
<h3 id="数据中心网络发展趋势">6.6.2 数据中心网络发展趋势</h3>
<ul>
<li><strong>层级化互连网络</strong>
<ul>
<li>采用Clos网络结构（源自电话交换理论）</li>
<li>支持任意主机间通信</li>
<li>多路径提高容量与可靠性</li>
</ul></li>
<li><strong>SDN集中控制</strong>
<ul>
<li>Google、Microsoft、Facebook等采用逻辑集中式控制</li>
<li>明确划分数据平面（简单交换设备）与控制平面（软件定义）</li>
</ul></li>
<li><strong>虚拟化支持</strong>
<ul>
<li>VM迁移需保持网络连接一致性</li>
<li>数据中心统一为扁平二层网络</li>
<li>修改ARP机制为DNS式查询系统</li>
</ul></li>
<li><strong>物理约束优化</strong>
<ul>
<li>极低延迟环境（微秒级）</li>
<li>TCP等拥塞控制协议难以适应</li>
<li>引入数据中心专用TCP变种、RDMA技术、调度理论优化</li>
</ul></li>
<li><strong>模块化与定制化</strong>
<ul>
<li>集装箱式模块数据中心（MDC）</li>
<li>支持快速部署与替换</li>
<li>核心网络设计挑战大</li>
<li>自研网络设备、协议、软件成为趋势</li>
</ul></li>
<li><strong>可用区（Availability Zone）</strong>
<ul>
<li>Amazon提出的数据中心异地备份方案</li>
<li>多个数据中心位于附近建筑，实现数据同步与容错</li>
</ul></li>
</ul>
<h2 id="回顾一次网页请求的一生">6.7 回顾：一次网页请求的一生</h2>
<h3 id="初始阶段dhcpudpip以太网">6.7.1
初始阶段：DHCP、UDP、IP、以太网</h3>
<ul>
<li><strong>获取IP地址</strong>
<ul>
<li>发送广播DHCP请求</li>
<li>路由器回复DHCP ACK</li>
<li>获取IP、默认网关、DNS服务器信息</li>
</ul></li>
<li><strong>封装过程</strong>
<ul>
<li>DHCP消息 → UDP段 → IP数据报 → 以太网帧</li>
</ul></li>
<li><strong>学习交换机</strong>
<ul>
<li>第一次发送后交换机记录MAC地址位置</li>
<li>后续单播帧直接转发至目标端口</li>
</ul></li>
</ul>
<h3 id="dns与arp">6.7.2 DNS与ARP</h3>
<ul>
<li><strong>域名解析</strong>
<ul>
<li>浏览器发起HTTP请求前需通过DNS解析域名</li>
<li>创建DNS查询消息 → UDP段 → IP数据报 → 以太网帧</li>
</ul></li>
<li><strong>获取网关MAC地址</strong>
<ul>
<li>已知IP但未知MAC → 发送ARP请求</li>
<li>网关回应ARP应答 → 获取MAC地址</li>
</ul></li>
<li><strong>帧发送</strong>
<ul>
<li>帧目的MAC为网关</li>
<li>数据报目的IP为DNS服务器</li>
</ul></li>
</ul>
<h3 id="域内路由至dns服务器">6.7.3 域内路由至DNS服务器</h3>
<ul>
<li><strong>路由转发</strong>
<ul>
<li>学校路由器根据转发表将DNS请求转发至Comcast网络</li>
<li>Comcast内部路由器使用RIP/OSPF/IS-IS+BGP决定下一跳</li>
</ul></li>
<li><strong>DNS响应返回</strong>
<ul>
<li>DNS服务器查找缓存中的www.google.com记录</li>
<li>返回IP地址64.233.169.105</li>
<li>响应数据报经原路径返回Bob的电脑</li>
</ul></li>
</ul>
<h3 id="web客户端-服务器交互tcp与http">6.7.4
Web客户端-服务器交互：TCP与HTTP</h3>
<ul>
<li><strong>建立TCP连接</strong>
<ul>
<li>发送SYN段 → 目标端口80（HTTP）</li>
<li>经学校、Comcast、Google网络到达目标服务器</li>
<li>服务器响应SYNACK段 → 客户端完成三次握手</li>
</ul></li>
<li><strong>发送HTTP请求</strong>
<ul>
<li>浏览器创建GET请求 → 封装进TCP段 → IP数据报 → 以太网帧</li>
<li>请求最终送达www.google.com服务器</li>
</ul></li>
<li><strong>接收HTTP响应</strong>
<ul>
<li>服务器生成HTML响应内容 → 封装发送回客户端</li>
<li>客户端浏览器接收响应 → 解析HTML → 展示网页</li>
</ul></li>
<li><strong>涉及协议总结</strong>
<ul>
<li>DHCP：动态获取IP</li>
<li>DNS：域名解析</li>
<li>ARP：IP→MAC映射</li>
<li>TCP：可靠传输</li>
<li>HTTP：应用层协议</li>
<li>IP：路由寻址</li>
<li>以太网：链路层协议## 6.8 总结</li>
</ul></li>
<li><strong>链路层基本服务</strong>
<ul>
<li>将网络层数据报从一个节点传输到相邻节点。</li>
<li>数据封装为帧，包含头部和数据部分。</li>
</ul></li>
<li><strong>链路类型多样性</strong>
<ul>
<li>点对点链路：单发送者与单接收者。</li>
<li>多路访问链路：多个发送者与接收者共享信道。</li>
<li>MPLS链路：逻辑“链路”可能本身是一个网络。</li>
</ul></li>
<li><strong>链路层关键技术</strong>
<ul>
<li><strong>错误检测与纠正</strong>
<ul>
<li>奇偶校验、校验和、CRC（循环冗余校验）。</li>
</ul></li>
<li><strong>多路访问协议</strong>
<ul>
<li>信道划分（TDM、FDM）、随机访问（ALOHA、CSMA）、轮流机制（轮询、令牌传递）。</li>
</ul></li>
<li><strong>链路层地址</strong>
<ul>
<li>MAC地址用于局域网内唯一标识设备。</li>
<li>ARP协议实现IP地址到MAC地址的映射。</li>
</ul></li>
<li><strong>虚拟化技术</strong>
<ul>
<li>VLAN（虚拟局域网）实现广播域逻辑隔离。</li>
</ul></li>
<li><strong>交换式网络构建</strong>
<ul>
<li>局域网扩展、数据中心网络设计。</li>
</ul></li>
</ul></li>
<li><strong>以太网的发展</strong>
<ul>
<li>从10Mbps逐步演进至10Gbps。</li>
<li>使用CSMA/CD机制（现代全双工环境下已不常用）。</li>
</ul></li>
<li><strong>MPLS与数据中心网络</strong>
<ul>
<li>MPLS提供链路层服务，支持流量工程。</li>
<li>数据中心网络采用高性能架构（如Fat
Tree、Clos结构）并集成SDN技术。</li>
</ul></li>
<li><strong>协议栈学习总结</strong>
<ul>
<li>完成物理层、链路层、网络层、传输层、应用层的学习。</li>
<li>后续章节将探讨无线网络、网络安全和多媒体网络等跨层主题。###
Wireshark实验：802.11与以太网</li>
</ul></li>
<li>提供Wireshark实验用于分析IEEE 802.3以太网协议。</li>
<li>实验包括观察Wireshark中的帧格式。</li>
<li>另一个实验分析家庭网络环境下的数据包轨迹。</li>
</ul>
<h3 id="人物访谈albert-greenberg微软azure网络负责人">人物访谈：Albert
Greenberg（微软Azure网络负责人）</h3>
<h4 id="职业背景-2">职业背景</h4>
<ul>
<li>现任微软Azure网络副总裁。</li>
<li>负责微软数据中心与边缘网络、全球光纤与海底网络、FPGA与SmartNIC卸载、容器网络、CDN、边缘网络等。</li>
<li>曾发表VL2论文，推动云计算网络发展。</li>
<li>早年任职于贝尔实验室与AT&amp;T实验室，是SDN架构先驱之一。</li>
<li>拥有达特茅斯学院数学学士与华盛顿大学计算机科学博士。</li>
</ul>
<h4 id="学术与荣誉">学术与荣誉</h4>
<ul>
<li>美国国家工程院院士、ACM会士。</li>
<li>获IEEE Koji Kobayashi计算机与通信奖、ACM Sigcomm奖、Test of
Time论文奖。</li>
</ul>
<h4 id="为何选择网络领域">为何选择网络领域</h4>
<ul>
<li>热爱解决实际问题并结合数学建模。</li>
<li>受Ed Lazowska（系统方向）与Richard Ladner、Martin
Tompa（理论方向）影响。</li>
</ul>
<h4 id="对网络专业学生的建议">对网络专业学生的建议</h4>
<ul>
<li>网络领域正变得更加多样化、包容和开放。</li>
<li>鼓励更多女性与技术少数群体加入。</li>
<li>技术背景多样化：架构、编程语言、光学、形式化方法、数据科学、AI、容错系统等。</li>
<li>开源系统如SONiC正在改变网络生态。</li>
<li>推崇SDN与硬件解耦（Disaggregation）带来的开放性。</li>
</ul>
<h4 id="职业生涯中最激动人心的项目">职业生涯中最激动人心的项目</h4>
<ul>
<li>云计算是近年来最具挑战性的领域。</li>
<li>涉及操作系统、分布式系统、性能、安全、机器学习、数据科学、管理等全栈技术。</li>
<li>SDN在构建大规模软件定义数据中心中起核心作用。</li>
</ul>
<h4 id="对未来网络的展望">对未来网络的展望</h4>
<ul>
<li>云计算尚处于10%的发展阶段。</li>
<li>端到端系统中的计算与存储分配将变得更加关键。</li>
<li>边缘计算将推动“横向”扩展，形成更丰富的端到端生态系统。</li>
<li>5G将成为未来网络的重要组成部分。</li>
</ul>
<h4 id="职业生涯中的启发来源">职业生涯中的启发来源</h4>
<ul>
<li>来自客户与实际网络运维的反馈。</li>
<li>与工程师和研究人员的合作带来深刻洞察。</li>
<li>尤其赞赏那些精通系统全生命周期的技术人员。</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://fyind.de">Fyind</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://fyind.de/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/">http://fyind.de/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/pic1.PNG" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/12/%E6%88%91%E4%BB%AC%E5%9C%A8AI%E6%97%B6%E4%BB%A3%E8%AF%A5%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0/" title="我们在AI时代该如何学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">我们在AI时代该如何学习</div></div><div class="info-2"><div class="info-item-1">我们在AI时代该如何学习 作者: Fyind, ChatGPT 随着人工智能的迅猛发展，特别是大语言模型（LLM）的广泛应用，我们已经步入了一个学习方式正被深刻改变的新时代。这篇文章将探讨AI如何改变我们的学习效率，以及我们应该如何使用AI来提升个人学习效能。  AI使得效率爆炸式提升 传统学习方式往往依赖于反复阅读、听讲和做笔记，而这一切都需要耗费大量时间和精力。而现在，AI的出现正在彻底改变这一局面。特别是具备自然语言处理能力的大语言模型，使得人与知识之间的距离被极大缩短。 例如，一位大学生在准备期末考试时，不再需要花几个小时翻阅教科书、做笔记或上网搜索疑难点。他只需将考纲、教材甚至笔记内容交给AI，AI就能在几分钟内生成一份系统的知识梳理、重点总结，甚至可以为他设计模拟练习题和错题分析。这种以往几小时的任务被压缩到几分钟完成，大幅度提升了学习效率和精力利用率。 不仅是学生，职场人士学习新技能、准备演讲、汇报时，也可以通过AI快速获取相关内容要点、生成演讲草稿，甚至进行模拟提问训练。  传统的学习模式的问题 尽管过去的学习方式曾被广泛认可，但在当今知识快速更新、时间碎片化的社...</div></div></div></a><a class="pagination-related" href="/2025/07/12/%E7%A7%91%E7%A0%94%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88/" title="科研工具集合"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">科研工具集合</div></div><div class="info-2"><div class="info-item-1">科研工具集合 搜索工具 paperdigest 自动文献综述 phind/perplexity AI 搜索网站总结 google scholar/open alex 论文搜索 Elict 深度文献搜索总结 PDF UPDF 可以自动总结PDF 自动生成思维导图，很好用 ChatPDF AI读取PDF内容，进行提问 文献管理工具 Zotero 文献数据库，支持多端同步  浏览器插件，支持在浏览的同时加入文献集合  网站 浏览器 Print成PDF，然后使用PDF工具 代码Project AI阅读代码 https://github.com/sourcegraph/cody </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/pic1.PNG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Fyind</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">85</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">83</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Fyind"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Fyind" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:tarjan0025@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://jq.qq.com/?_wv=1027&amp;k=d0kMY0nN" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">欢迎来逛逛我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">1.</span> <span class="toc-text">计算机网络与因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 因特网是什么？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1.1 组成结构描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%A7%86%E8%A7%92%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.1.2 服务视角描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.1.3 协议是什么？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 网络边缘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E7%BD%91%E7%BB%9C"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.2.1 接入网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B6%E5%BA%AD%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">家庭接入方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E4%B8%8E%E5%AE%B6%E5%BA%ADlan%E6%8E%A5%E5%85%A5"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">企业与家庭LAN接入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E5%B9%BF%E5%9F%9F%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A5"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">移动广域无线接入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2.2 物理媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BB%8B%E8%B4%A8"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">引导型介质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BB%8B%E8%B4%A8%E6%97%A0%E7%BA%BF"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">非引导型介质（无线）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2packet-switching"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.3.1 分组交换Packet Switching</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E4%BC%A0%E8%BE%93"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">存储转发传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E5%BB%B6%E8%BF%9F%E4%B8%8E%E4%B8%A2%E5%8C%85"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">排队延迟与丢包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%A8%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">转发表与路由协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.4.</span> <span class="toc-text">1.3.2 电路交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">多路复用技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2-vs-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">分组交换 vs 电路交换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.5.</span> <span class="toc-text">1.3.3 网络的网络结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E6%BC%94%E8%BF%9B"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">网络结构演进</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E4%BA%92%E8%81%94%E4%B8%8E-ixps"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">对等互联与 IXPs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E6%8F%90%E4%BE%9B%E5%95%86%E7%BD%91%E7%BB%9C"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">内容提供商网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%BB%B6%E8%BF%9F%E4%B8%A2%E5%8C%85%E4%B8%8E%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.3.</span> <span class="toc-text">1.4
分组交换网络中的延迟、丢包与吞吐量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%BB%B6%E8%BF%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.4.1 分组交换网络中的延迟概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">延迟类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E8%8A%82%E7%82%B9%E5%BB%B6%E8%BF%9F%E5%85%AC%E5%BC%8F"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">总节点延迟公式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E6%AF%94%E7%90%86%E8%A7%A3"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">类比理解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E5%BB%B6%E8%BF%9F%E4%B8%8E%E4%B8%A2%E5%8C%85-1"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.4.2 排队延迟与丢包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E5%BB%B6%E8%BF%9F%E7%89%B9%E6%80%A7"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">排队延迟特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A2%E5%8C%85%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">丢包机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%88%B0%E7%AB%AF%E5%BB%B6%E8%BF%9F"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.4.3 端到端延迟</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E5%BB%B6%E8%BF%9F%E8%AE%A1%E7%AE%97"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">总延迟计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#traceroute-%E5%B7%A5%E5%85%B7"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">Traceroute 工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.4.4 网络吞吐量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%AE%A1%E7%AE%97"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">定义与计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">示例分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%B0%E5%AE%9E%E7%BD%91%E7%BB%9C%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">现实网络影响因素</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">1.3.5.</span> <span class="toc-text">1.5.1 分层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%88%AA%E7%A9%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%B1%BB%E6%AF%94"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">航空系统的类比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%88%86%E5%B1%82"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">网络协议的分层</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E5%8D%8F%E8%AE%AE%E6%A0%88"><span class="toc-number">1.3.6.</span> <span class="toc-text">1.5.2 因特网协议栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">五层模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.7.</span> <span class="toc-text">1.5.3 封装过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB"><span class="toc-number">1.4.</span> <span class="toc-text">1.6 网络攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%AE%89%E5%85%A8%E5%A8%81%E8%83%81"><span class="toc-number">1.4.1.</span> <span class="toc-text">常见安全威胁</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6%E6%84%9F%E6%9F%93"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">恶意软件感染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BBdosddos"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">拒绝服务攻击（DoS&#x2F;DDoS）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8C%85%E5%97%85%E6%8E%A2"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">数据包嗅探</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AC%BA%E9%AA%97%E6%94%BB%E5%87%BB"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">欺骗攻击</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="toc-number">1.5.</span> <span class="toc-text">1.7
计算机网络与因特网的发展历史</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF%E7%9A%84%E8%AF%9E%E7%94%9F19611972"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.7.1
分组交换技术的诞生（1961–1972）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E7%94%A8%E7%BD%91%E7%BB%9C%E4%B8%8E%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C19721980"><span class="toc-number">1.5.2.</span> <span class="toc-text">1.7.2
专用网络与互联网络（1972–1980）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%A4%A7%E7%88%86%E5%8F%9119801990"><span class="toc-number">1.5.3.</span> <span class="toc-text">1.7.3 网络大爆发（1980–1990）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E7%88%86%E7%82%B8%E6%80%A7%E5%8F%91%E5%B1%951990%E5%B9%B4%E4%BB%A3"><span class="toc-number">1.5.4.</span> <span class="toc-text">1.7.4
因特网爆炸性发展（1990年代）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E4%B8%96%E7%BA%AA%E7%9A%84%E5%8F%91%E5%B1%952000%E5%B9%B4%E8%87%B3%E4%BB%8A"><span class="toc-number">1.5.5.</span> <span class="toc-text">1.7.5 新世纪的发展（2000年至今）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.6.</span> <span class="toc-text">网络组成与结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5"><span class="toc-number">1.5.7.</span> <span class="toc-text">核心网络概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%AB%A0%E8%8A%82%E5%AE%89%E6%8E%92"><span class="toc-number">1.5.8.</span> <span class="toc-text">学习路径与章节安排</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E4%B9%A6%E8%B7%AF%E7%BA%BF%E5%9B%BE"><span class="toc-number">1.5.8.1.</span> <span class="toc-text">本书路线图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%99%E5%AD%A6%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E"><span class="toc-number">1.5.8.2.</span> <span class="toc-text">教学方法说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E8%8A%82%E7%82%B9%E8%A1%A5%E5%85%85"><span class="toc-number">1.6.</span> <span class="toc-text">思维导图节点补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E4%B8%9A%E4%B8%8E%E7%BB%83%E4%B9%A0%E9%A2%98%E6%A6%82%E8%A7%88"><span class="toc-number">1.6.1.</span> <span class="toc-text">作业与练习题概览</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.1%E8%8A%82"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">第1.1节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.2%E8%8A%82"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">第1.2节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.3%E8%8A%82"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">第1.3节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.4%E8%8A%82"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">第1.4节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.5%E8%8A%82"><span class="toc-number">1.6.1.5.</span> <span class="toc-text">第1.5节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC1.6%E8%8A%82"><span class="toc-number">1.6.1.6.</span> <span class="toc-text">第1.6节</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%8E%E7%BB%83%E4%B9%A0%E6%91%98%E8%A6%81"><span class="toc-number">1.7.</span> <span class="toc-text">问题与练习摘要</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.7.1.</span> <span class="toc-text">应用层协议设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E4%B8%8E%E5%90%9E%E5%90%90%E9%87%8F%E5%88%86%E6%9E%90"><span class="toc-number">1.7.2.</span> <span class="toc-text">延迟与吞吐量分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E4%B8%8E%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E6%AF%94%E8%BE%83"><span class="toc-number">1.7.3.</span> <span class="toc-text">分组交换与电路交换比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0"><span class="toc-number">1.7.4.</span> <span class="toc-text">网络性能评估</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F%E9%80%89%E6%8B%A9"><span class="toc-number">1.7.5.</span> <span class="toc-text">数据传输方式选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%AB%E6%98%9F%E9%80%9A%E4%BF%A1%E4%B8%8E%E5%B8%A6%E5%AE%BD%E5%BB%B6%E8%BF%9F%E7%A7%AF"><span class="toc-number">1.7.6.</span> <span class="toc-text">卫星通信与带宽延迟积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%88%86%E6%AE%B5%E4%B8%8E%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.7.</span> <span class="toc-text">消息分段与网络性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.8.</span> <span class="toc-text">实际应用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E8%A7%82%E5%AF%9F%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.8.1.</span> <span class="toc-text">网络协议观察工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84%E4%B8%8E%E6%96%B9%E6%B3%95"><span class="toc-number">1.7.8.2.</span> <span class="toc-text">实验目的与方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.7.8.3.</span> <span class="toc-text">实验内容示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E8%B0%88leonard-kleinrock-%E7%9A%84%E4%BA%92%E8%81%94%E7%BD%91%E6%84%BF%E6%99%AF"><span class="toc-number">1.7.9.</span> <span class="toc-text">访谈：Leonard Kleinrock
的互联网愿景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E4%B8%9A%E8%83%8C%E6%99%AF"><span class="toc-number">1.7.9.1.</span> <span class="toc-text">职业背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%BA%92%E8%81%94%E7%BD%91%E8%AF%9E%E7%94%9F%E7%9A%84%E5%9B%9E%E5%BF%86"><span class="toc-number">1.7.9.2.</span> <span class="toc-text">对互联网诞生的回忆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AA%E6%9D%A5%E7%BD%91%E7%BB%9C%E6%84%BF%E6%99%AF"><span class="toc-number">1.7.9.3.</span> <span class="toc-text">未来网络愿景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E5%AD%A6%E7%94%9F%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.7.9.4.</span> <span class="toc-text">对学生的建议</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%8E%9F%E7%90%86"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 网络应用原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.1.</span> <span class="toc-text">2.1.1 网络应用架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">客户端-服务器架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E7%BD%91%E7%BB%9Cp2p%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">对等网络（P2P）架构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.1.2 进程通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%A5%97%E6%8E%A5%E5%AD%97"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">进程与套接字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">客户端与服务器进程定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E6%A0%87%E8%AF%86"><span class="toc-number">2.1.2.3.</span> <span class="toc-text">地址标识</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%8F%AF%E8%8E%B7%E5%BE%97%E7%9A%84%E4%BC%A0%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.3.</span> <span class="toc-text">2.1.3 应用可获得的传输服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">2.1.3.1.</span> <span class="toc-text">可靠数据传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">2.1.3.2.</span> <span class="toc-text">吞吐量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%BB%B6%E8%BF%9F"><span class="toc-number">2.1.3.3.</span> <span class="toc-text">时间延迟</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">2.1.3.4.</span> <span class="toc-text">安全性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internet-%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BC%A0%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.4.</span> <span class="toc-text">2.1.4 Internet 提供的传输服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%89%B9%E6%80%A7"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">TCP 特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-%E7%89%B9%E6%80%A7"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">UDP 特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">不提供的服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.1.5.</span> <span class="toc-text">2.1.5 应用层协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E4%B9%A6%E6%B6%B5%E7%9B%96%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">2.1.6.</span> <span class="toc-text">2.1.6 本书涵盖的应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web-%E4%B8%8E-http"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Web 与 HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http-%E6%A6%82%E8%BF%B0"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 HTTP 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2 HTTP 请求方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3 HTTP 响应状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%8C%81%E7%BB%AD%E4%B8%8E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4 非持续与持续连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie"><span class="toc-number">2.2.5.</span> <span class="toc-text">2.2.5 Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web-%E7%BC%93%E5%AD%98%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.6.</span> <span class="toc-text">2.2.6 Web 缓存（代理服务器）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9Ccdn"><span class="toc-number">2.2.7.</span> <span class="toc-text">内容分发网络（CDN）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6-get"><span class="toc-number">2.2.8.</span> <span class="toc-text">2.2.7 条件 GET</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6-get-%E6%B5%81%E7%A8%8B"><span class="toc-number">2.2.8.1.</span> <span class="toc-text">条件 GET 流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http2"><span class="toc-number">2.2.9.</span> <span class="toc-text">2.2.7 HTTP&#x2F;2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#http2-%E7%9A%84%E7%9B%AE%E6%A0%87"><span class="toc-number">2.2.9.1.</span> <span class="toc-text">HTTP&#x2F;2 的目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http2-%E7%9A%84%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF"><span class="toc-number">2.2.9.2.</span> <span class="toc-text">HTTP&#x2F;2 的核心技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http2-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">2.2.9.3.</span> <span class="toc-text">HTTP&#x2F;2 的优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http3"><span class="toc-number">2.2.10.</span> <span class="toc-text">2.2.8 HTTP&#x2F;3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#http3-%E7%9A%84%E5%9F%BA%E7%A1%80"><span class="toc-number">2.2.10.1.</span> <span class="toc-text">HTTP&#x2F;3 的基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http3-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.10.2.</span> <span class="toc-text">HTTP&#x2F;3 的特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#smtp"><span class="toc-number">2.2.11.</span> <span class="toc-text">2.3.1 SMTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.2.12.</span> <span class="toc-text">2.3.2 邮件消息格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.2.13.</span> <span class="toc-text">2.3.3 邮件访问协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dns-%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.3.</span> <span class="toc-text">2.4 DNS — 因特网的目录服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dns-%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.4.1 DNS 提供的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dns-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.4.2 DNS 工作原理概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dns-%E7%BC%93%E5%AD%98"><span class="toc-number">2.3.3.</span> <span class="toc-text">2.4.3 DNS 缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dns-%E8%AE%B0%E5%BD%95%E4%B8%8E%E6%B6%88%E6%81%AF"><span class="toc-number">2.3.4.</span> <span class="toc-text">2.4.4 DNS 记录与消息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dns-%E8%AE%B0%E5%BD%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.4.1.</span> <span class="toc-text">DNS 记录类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dns-%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.3.4.2.</span> <span class="toc-text">DNS 消息格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91-dns-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95"><span class="toc-number">2.3.5.</span> <span class="toc-text">2.4.5 向 DNS 数据库插入记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dns-%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.3.6.</span> <span class="toc-text">2.4.6 DNS 安全漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#p2p-%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">2.3.7.</span> <span class="toc-text">P2P 架构的可扩展性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E4%B8%8E-p2p-%E6%9E%B6%E6%9E%84%E5%AF%B9%E6%AF%94"><span class="toc-number">2.3.7.1.</span> <span class="toc-text">客户端-服务器架构与 P2P
架构对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bittorrent-%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.7.2.</span> <span class="toc-text">BitTorrent 协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E6%B5%81%E4%B8%8E%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C"><span class="toc-number">2.4.</span> <span class="toc-text">2.6 视频流与内容分发网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E8%A7%86%E9%A2%91%E5%9F%BA%E7%A1%80"><span class="toc-number">2.4.1.</span> <span class="toc-text">互联网视频基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-%E6%B5%81%E5%AA%92%E4%BD%93%E4%B8%8E-dash"><span class="toc-number">2.4.2.</span> <span class="toc-text">HTTP 流媒体与 DASH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9Ccdn-1"><span class="toc-number">2.4.3.</span> <span class="toc-text">内容分发网络（CDN）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B%E5%88%9B%E5%BB%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.7 套接字编程：创建网络应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#udp-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B"><span class="toc-number">2.5.1.</span> <span class="toc-text">UDP 套接字编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B"><span class="toc-number">2.5.2.</span> <span class="toc-text">TCP 套接字编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.6.</span> <span class="toc-text">2.8 总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E6%A0%B8%E5%BF%83%E5%86%85%E5%AE%B9%E5%9B%9E%E9%A1%BE"><span class="toc-number">2.6.1.</span> <span class="toc-text">本章核心内容回顾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84-1"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">网络应用架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE-1"><span class="toc-number">2.6.1.2.</span> <span class="toc-text">应用层协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#socket%E7%BC%96%E7%A8%8B"><span class="toc-number">2.6.1.3.</span> <span class="toc-text">Socket编程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E7%90%86%E8%A7%A3%E6%B7%B1%E5%8C%96"><span class="toc-number">2.6.2.</span> <span class="toc-text">协议理解深化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%BB%AD%E7%AB%A0%E8%8A%82%E5%B1%95%E6%9C%9B"><span class="toc-number">2.6.3.</span> <span class="toc-text">后续章节展望</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%80web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.6.3.1.</span> <span class="toc-text">实验一：Web 服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BA%8Cudp-pinger"><span class="toc-number">2.6.3.2.</span> <span class="toc-text">实验二：UDP Pinger</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%89%E9%82%AE%E4%BB%B6%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">2.6.3.3.</span> <span class="toc-text">实验三：邮件客户端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%9B%9Bweb-%E4%BB%A3%E7%90%86"><span class="toc-number">2.6.3.4.</span> <span class="toc-text">实验四：Web 代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wireshark-%E5%AE%9E%E9%AA%8C"><span class="toc-number">2.6.4.</span> <span class="toc-text">Wireshark 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#wireshark-lab-http"><span class="toc-number">2.6.4.1.</span> <span class="toc-text">Wireshark Lab: HTTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wireshark-lab-dns"><span class="toc-number">2.6.4.2.</span> <span class="toc-text">Wireshark Lab: DNS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E7%89%A9%E8%AE%BF%E8%B0%88tim-berners-lee"><span class="toc-number">2.6.5.</span> <span class="toc-text">人物访谈：Tim Berners-Lee</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.6.5.1.</span> <span class="toc-text">背景介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E4%B8%8E%E7%89%A9%E7%90%86%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.6.5.2.</span> <span class="toc-text">网络与物理的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BD%95%E9%80%89%E6%8B%A9%E7%BD%91%E7%BB%9C%E6%96%B9%E5%90%91"><span class="toc-number">2.6.5.3.</span> <span class="toc-text">为何选择网络方向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E6%8C%91%E6%88%98"><span class="toc-number">2.6.5.4.</span> <span class="toc-text">工作中的挑战</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8F%91%E4%BB%96%E7%9A%84%E4%BA%BA"><span class="toc-number">2.6.5.5.</span> <span class="toc-text">启发他的人</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80%E4%B8%8E%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 引言与传输层服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 传输层与网络层的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internet%E4%B8%AD%E7%9A%84%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 Internet中的传输层概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E8%A7%A3%E5%A4%8D%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 多路复用与解复用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E8%A7%A3%E5%A4%8D%E7%94%A8"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 UDP多路复用与解复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E8%A7%A3%E5%A4%8D%E7%94%A8"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 TCP多路复用与解复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 安全相关：端口扫描</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93udp"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 无连接传输：UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1 UDP段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E6%A0%A1%E9%AA%8C%E5%92%8C"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 UDP校验和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8udp%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3 使用UDP的原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4 应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86rdt"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 可靠数据传输原理（RDT）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rdt%E5%9F%BA%E7%A1%80"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1 RDT基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%90%E6%AD%A5%E6%9E%84%E5%BB%BArdt%E6%96%B9%E6%A1%88"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2 逐步构建RDT方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%ACrdt1.0"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">版本rdt1.0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%ACrdt2.0"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">版本rdt2.0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%ACrdt2.1"><span class="toc-number">3.4.2.3.</span> <span class="toc-text">版本rdt2.1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%ACrdt2.2"><span class="toc-number">3.4.2.4.</span> <span class="toc-text">版本rdt2.2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%ACrdt3.0"><span class="toc-number">3.4.2.5.</span> <span class="toc-text">版本rdt3.0</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%BC%A0%E8%BE%93tcp"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 面向连接的传输：TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%A6%82%E8%BF%B0"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1 TCP概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2 TCP段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rtt%E4%BC%B0%E8%AE%A1%E4%B8%8E%E8%B6%85%E6%97%B6"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3 RTT估计与超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93-1"><span class="toc-number">3.5.4.</span> <span class="toc-text">3.5.4 可靠数据传输</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E6%8E%A5%E6%94%B6%E7%AA%97%E5%8F%A3%E4%B8%BA%E9%9B%B6"><span class="toc-number">3.5.4.1.</span> <span class="toc-text">特殊情况：接收窗口为零</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">3.5.5.</span> <span class="toc-text">3.5.6 连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">3.5.5.1.</span> <span class="toc-text">三次握手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">3.5.5.2.</span> <span class="toc-text">四次挥手</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 拥塞控制原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E5%8E%9F%E5%9B%A0%E4%B8%8E%E5%BD%B1%E5%93%8D"><span class="toc-number">3.6.1.</span> <span class="toc-text">3.6.1 拥塞原因与影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">3.6.2.</span> <span class="toc-text">3.6.2 拥塞控制方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 TCP拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">3.7.1.</span> <span class="toc-text">3.7.1 控制机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">3.7.2.</span> <span class="toc-text">3.7.2 性能优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quic%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="toc-number">3.8.</span> <span class="toc-text">3.8 QUIC协议简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.8.1.</span> <span class="toc-text">3.4.1 构建可靠数据传输协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E9%80%9A%E9%81%93%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93rdt1.0"><span class="toc-number">3.8.1.1.</span> <span class="toc-text">可靠通道上的数据传输：rdt1.0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E6%AF%94%E7%89%B9%E9%94%99%E8%AF%AF%E7%9A%84%E9%80%9A%E9%81%93rdt2.0"><span class="toc-number">3.8.1.2.</span> <span class="toc-text">带比特错误的通道：rdt2.0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8F%B7%E4%B8%8E%E9%87%8D%E5%A4%8D%E5%8C%85%E5%A4%84%E7%90%86rdt2.1"><span class="toc-number">3.8.1.3.</span> <span class="toc-text">序列号与重复包处理：rdt2.1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A2%E5%8C%85%E9%80%9A%E9%81%93rdt3.0"><span class="toc-number">3.8.1.4.</span> <span class="toc-text">丢包通道：rdt3.0</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%BC%8F%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.8.2.</span> <span class="toc-text">3.4.2 流水线式可靠数据传输协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"><span class="toc-number">3.8.2.1.</span> <span class="toc-text">性能问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-number">3.8.2.2.</span> <span class="toc-text">解决方案：流水线</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E9%80%80n%E6%AD%A5go-back-n-gbn"><span class="toc-number">3.8.3.</span> <span class="toc-text">3.4.3 回退N步（Go-Back-N, GBN）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%9C%BA%E5%88%B6"><span class="toc-number">3.8.3.1.</span> <span class="toc-text">协议机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E4%BA%8B%E4%BB%B6%E4%B8%8E%E5%8A%A8%E4%BD%9C"><span class="toc-number">3.8.3.2.</span> <span class="toc-text">发送方事件与动作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9%E8%A1%8C%E4%B8%BA"><span class="toc-number">3.8.3.3.</span> <span class="toc-text">接收方行为</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0selective-repeat-sr"><span class="toc-number">3.8.4.</span> <span class="toc-text">3.4.4 选择重传（Selective Repeat,
SR）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%9C%BA%E5%88%B6-1"><span class="toc-number">3.8.4.1.</span> <span class="toc-text">协议机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E4%BA%8B%E4%BB%B6%E4%B8%8E%E5%8A%A8%E4%BD%9C-1"><span class="toc-number">3.8.4.2.</span> <span class="toc-text">发送方事件与动作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9%E4%BA%8B%E4%BB%B6%E4%B8%8E%E5%8A%A8%E4%BD%9C"><span class="toc-number">3.8.4.3.</span> <span class="toc-text">接收方事件与动作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8F%B7%E7%A9%BA%E9%97%B4%E9%99%90%E5%88%B6"><span class="toc-number">3.8.4.4.</span> <span class="toc-text">序列号空间限制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.8.5.</span> <span class="toc-text">3.5.1 TCP 连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">3.8.6.</span> <span class="toc-text">3.5.2 TCP 段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rtt-%E4%BC%B0%E8%AE%A1%E4%B8%8E%E8%B6%85%E6%97%B6"><span class="toc-number">3.8.7.</span> <span class="toc-text">3.5.3 RTT 估计与超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93-2"><span class="toc-number">3.8.8.</span> <span class="toc-text">3.5.4 可靠数据传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">3.8.9.</span> <span class="toc-text">3.5.5 流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">3.8.10.</span> <span class="toc-text">3.5.6 TCP 连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">3.8.10.1.</span> <span class="toc-text">三次握手（连接建立）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD"><span class="toc-number">3.8.10.2.</span> <span class="toc-text">四次挥手（连接关闭）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3syn-%E6%B3%9B%E6%B4%AA%E6%94%BB%E5%87%BB"><span class="toc-number">3.8.10.3.</span> <span class="toc-text">安全相关：SYN 泛洪攻击</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E7%9A%84%E5%8E%9F%E5%9B%A0%E4%B8%8E%E4%BB%A3%E4%BB%B7"><span class="toc-number">3.8.11.</span> <span class="toc-text">3.6.1 拥塞的原因与代价</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF1%E4%B8%A4%E4%B8%AA%E5%8F%91%E9%80%81%E7%AB%AF%E6%97%A0%E9%99%90%E7%BC%93%E5%86%B2%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">3.8.11.1.</span> <span class="toc-text">场景1：两个发送端，无限缓冲的路由器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF2%E4%B8%A4%E4%B8%AA%E5%8F%91%E9%80%81%E7%AB%AF%E6%9C%89%E9%99%90%E7%BC%93%E5%86%B2%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">3.8.11.2.</span> <span class="toc-text">场景2：两个发送端，有限缓冲的路由器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF3%E5%9B%9B%E4%B8%AA%E5%8F%91%E9%80%81%E7%AB%AF%E5%A4%9A%E8%B7%B3%E8%B7%AF%E5%BE%84%E6%9C%89%E9%99%90%E7%BC%93%E5%86%B2"><span class="toc-number">3.8.11.3.</span> <span class="toc-text">场景3：四个发送端，多跳路径，有限缓冲</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95-1"><span class="toc-number">3.8.12.</span> <span class="toc-text">3.6.2 拥塞控制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%88%B0%E7%AB%AF%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.8.12.1.</span> <span class="toc-text">端到端拥塞控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%85%E5%8A%A9%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.8.12.2.</span> <span class="toc-text">网络辅助拥塞控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6-1"><span class="toc-number">3.9.</span> <span class="toc-text">3.7 TCP拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.9.1.</span> <span class="toc-text">3.7.1 经典TCP拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3cwnd%E6%9C%BA%E5%88%B6"><span class="toc-number">3.9.1.1.</span> <span class="toc-text">拥塞窗口（cwnd）机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%85%A2%E5%90%AF%E5%8A%A8slow-start"><span class="toc-number">3.9.1.2.</span> <span class="toc-text">慢启动（Slow Start）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8Dcongestion-avoidance"><span class="toc-number">3.9.1.3.</span> <span class="toc-text">拥塞避免（Congestion
Avoidance）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8Dfast-recovery"><span class="toc-number">3.9.1.4.</span> <span class="toc-text">快速恢复（Fast Recovery）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#aimd%E8%A1%8C%E4%B8%BA%E4%B8%8E%E6%80%A7%E8%83%BD"><span class="toc-number">3.9.1.5.</span> <span class="toc-text">AIMD行为与性能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%85%E5%8A%A9ecn%E4%B8%8E%E5%9F%BA%E4%BA%8E%E5%BB%B6%E8%BF%9F%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.9.2.</span> <span class="toc-text">3.7.2
网络辅助ECN与基于延迟的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E6%8B%A5%E5%A1%9E%E9%80%9A%E7%9F%A5ecn"><span class="toc-number">3.9.2.1.</span> <span class="toc-text">显式拥塞通知（ECN）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%BB%B6%E8%BF%9F%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.9.2.2.</span> <span class="toc-text">基于延迟的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#tcp-vegas"><span class="toc-number">3.9.2.2.1.</span> <span class="toc-text">TCP Vegas</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bbr"><span class="toc-number">3.9.2.2.2.</span> <span class="toc-text">BBR</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AC%E5%B9%B3%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-number">3.10.</span> <span class="toc-text">3.7.3 公平性问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%85%AC%E5%B9%B3%E6%80%A7"><span class="toc-number">3.10.1.</span> <span class="toc-text">TCP公平性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E4%B8%8E%E5%85%AC%E5%B9%B3%E6%80%A7"><span class="toc-number">3.10.2.</span> <span class="toc-text">UDP与公平性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8Ctcp%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.10.3.</span> <span class="toc-text">并行TCP连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B6%E5%BA%AD%E4%BD%9C%E4%B8%9A%E9%97%AE%E9%A2%98%E4%B8%8E%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">3.10.4.</span> <span class="toc-text">家庭作业问题与思考题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E7%AD%94%E9%A2%98-r1-r19"><span class="toc-number">3.10.4.1.</span> <span class="toc-text">简答题 R1-R19</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-p1-p58"><span class="toc-number">3.10.4.2.</span> <span class="toc-text">练习题 P1-P58</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.10.4.3.</span> <span class="toc-text">可靠传输协议实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wireshark-%E5%AE%9E%E9%AA%8C%E6%8E%A2%E7%B4%A2-tcp"><span class="toc-number">3.10.4.4.</span> <span class="toc-text">Wireshark 实验：探索 TCP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wireshark-%E5%AE%9E%E9%AA%8C%E6%8E%A2%E7%B4%A2-udp"><span class="toc-number">3.10.4.5.</span> <span class="toc-text">Wireshark 实验：探索 UDP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E7%89%A9%E8%AE%BF%E8%B0%88van-jacobson"><span class="toc-number">3.10.5.</span> <span class="toc-text">人物访谈：Van Jacobson</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E8%B4%A1%E7%8C%AE"><span class="toc-number">3.10.5.1.</span> <span class="toc-text">主要贡献</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%8C%91%E6%88%98%E4%B8%8E%E9%97%AE%E9%A2%98%E5%AE%9A%E4%B9%89"><span class="toc-number">3.10.5.2.</span> <span class="toc-text">关于挑战与问题定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%BD%91%E7%BB%9C%E6%9C%AA%E6%9D%A5%E7%9A%84%E7%9C%8B%E6%B3%95"><span class="toc-number">3.10.5.3.</span> <span class="toc-text">对网络未来的看法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8F%91%E4%BB%96%E7%9A%84%E4%BA%BA-1"><span class="toc-number">3.10.5.4.</span> <span class="toc-text">启发他的人</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%AD%A6%E7%94%9F%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.10.5.5.</span> <span class="toc-text">给学生的建议</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="toc-number">4.</span> <span class="toc-text">网络层：数据平面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 网络层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E4%B8%8E%E8%B7%AF%E7%94%B1%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E4%B8%8E%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1
转发与路由：数据平面与控制平面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.1.1.1.</span> <span class="toc-text">转发表的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E7%9A%84%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.1.2.</span> <span class="toc-text">控制平面的传统方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sdn%E6%96%B9%E5%BC%8F%E4%B8%8B%E7%9A%84%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">4.1.1.3.</span> <span class="toc-text">SDN方式下的控制平面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2 网络服务模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 路由器内部结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 输入端口处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 交换结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.3 输出端口处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E8%B0%83%E5%BA%A6"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.4 分组调度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9Fip%E8%BD%AC%E5%8F%91"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 传统IP转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E5%9F%BA%E7%A1%80"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1 IP地址基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2 子网划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%A8%E6%9E%84%E5%BB%BA"><span class="toc-number">4.3.3.</span> <span class="toc-text">4.3.3 转发表构建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv4%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.3.4.</span> <span class="toc-text">4.3.4 IPv4协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.3.5.</span> <span class="toc-text">4.3.5 IPv6协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E8%BD%AC%E5%8F%91"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 通用转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#openflow%E7%AE%80%E4%BB%8B"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1 OpenFlow简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E8%A1%A8flow-table"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.4.2 流表（Flow Table）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%8C%E4%B8%BA%E6%89%A9%E5%B1%95"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.4.3 转发行为扩展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E7%9B%92middleboxes"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 中间盒（Middleboxes）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB"><span class="toc-number">4.5.1.</span> <span class="toc-text">4.5.1 功能分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">4.5.2.</span> <span class="toc-text">4.5.2 对网络架构的影响</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E6%A6%82%E8%A7%88"><span class="toc-number">4.6.</span> <span class="toc-text">本章概览</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86%E4%B8%8E%E5%9F%BA%E4%BA%8E%E7%9B%AE%E7%9A%84%E7%9A%84%E8%BD%AC%E5%8F%91"><span class="toc-number">4.6.1.</span> <span class="toc-text">4.2.1
输入端口处理与基于目的的转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84-1"><span class="toc-number">4.6.2.</span> <span class="toc-text">4.2.2 交换结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E4%B8%BB%E8%A6%81%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">三种主要交换方式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86-1"><span class="toc-number">4.6.3.</span> <span class="toc-text">4.2.3 输出端口处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E4%B8%8E%E6%8E%92%E9%98%9F%E7%8E%B0%E8%B1%A1"><span class="toc-number">4.6.4.</span> <span class="toc-text">4.2.4 缓存与排队现象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E5%8F%91%E7%94%9F%E5%9C%A8%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3"><span class="toc-number">4.6.4.1.</span> <span class="toc-text">排队发生在输入和输出端口：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8C%85%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5"><span class="toc-number">4.6.5.</span> <span class="toc-text">4.2.5 数据包调度策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E8%B0%83%E5%BA%A6%E6%9C%BA%E5%88%B6"><span class="toc-number">4.6.5.1.</span> <span class="toc-text">常见调度机制：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv4%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE"><span class="toc-number">4.6.5.2.</span> <span class="toc-text">4.3.2 IPv4地址配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat"><span class="toc-number">4.6.5.3.</span> <span class="toc-text">4.3.3 网络地址转换（NAT）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv6%E5%8D%8F%E8%AE%AE-1"><span class="toc-number">4.6.5.4.</span> <span class="toc-text">4.3.4 IPv6协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6"><span class="toc-number">4.6.5.5.</span> <span class="toc-text">地址分配机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dhcp%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.6.5.6.</span> <span class="toc-text">DHCP动态主机配置协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8Dmatch"><span class="toc-number">4.6.6.</span> <span class="toc-text">4.4.1 匹配（Match）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#openflow-1.0%E4%B8%AD%E7%9A%84%E5%8C%B9%E9%85%8D%E5%AD%97%E6%AE%B5"><span class="toc-number">4.6.6.1.</span> <span class="toc-text">OpenFlow 1.0中的匹配字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">4.6.6.2.</span> <span class="toc-text">抽象设计原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E4%BD%9Caction"><span class="toc-number">4.6.7.</span> <span class="toc-text">4.4.2 动作（Action）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%8A%A8%E4%BD%9C%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.6.7.1.</span> <span class="toc-text">常见动作类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E4%BD%9C%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">4.6.7.2.</span> <span class="toc-text">动作执行顺序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#openflow-%E5%AE%9E%E4%BE%8B%E5%BA%94%E7%94%A8"><span class="toc-number">4.6.8.</span> <span class="toc-text">4.4.3 OpenFlow 实例应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80%E7%AE%80%E5%8D%95%E8%BD%AC%E5%8F%91"><span class="toc-number">4.6.8.1.</span> <span class="toc-text">示例一：简单转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">4.6.8.2.</span> <span class="toc-text">示例二：负载均衡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">4.6.8.3.</span> <span class="toc-text">示例三：防火墙</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%81%B5%E6%B4%BB%E6%80%A7%E4%B8%8E%E4%BC%98%E5%8A%BF"><span class="toc-number">4.6.8.4.</span> <span class="toc-text">灵活性与优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E7%9B%92middleboxes-1"><span class="toc-number">4.6.9.</span> <span class="toc-text">4.5 中间盒（Middleboxes）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E7%9B%92%E5%88%86%E7%B1%BB"><span class="toc-number">4.6.9.1.</span> <span class="toc-text">中间盒分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nfv%E4%B8%8E%E4%BA%91%E5%A4%96%E5%8C%85"><span class="toc-number">4.6.9.2.</span> <span class="toc-text">NFV与云外包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E4%BA%89%E8%AE%AE"><span class="toc-number">4.6.9.3.</span> <span class="toc-text">架构争议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E6%B2%99%E6%BC%8F%E6%A8%A1%E5%9E%8Bhourglass-model"><span class="toc-number">4.6.9.4.</span> <span class="toc-text">IP沙漏模型（Hourglass Model）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%88%B0%E7%AB%AF%E8%AE%BA%E8%AF%81end-to-end-argument"><span class="toc-number">4.6.9.5.</span> <span class="toc-text">端到端论证（End-to-End
Argument）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81ls%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">4.6.10.</span> <span class="toc-text">5.2.1 链路状态（LS）路由算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8Fdv%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">4.6.11.</span> <span class="toc-text">5.2.2 距离向量（DV）路由算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ls%E4%B8%8Edv%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94"><span class="toc-number">4.6.12.</span> <span class="toc-text">LS与DV算法对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#internet%E5%86%85%E9%83%A8as%E8%B7%AF%E7%94%B1ospf"><span class="toc-number">4.7.</span> <span class="toc-text">5.3 Internet内部AS路由：OSPF</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ospf%E6%A6%82%E8%BF%B0"><span class="toc-number">4.7.1.</span> <span class="toc-text">OSPF概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">4.7.2.</span> <span class="toc-text">核心功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E4%B8%8E%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">4.7.3.</span> <span class="toc-text">安全与扩展性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="toc-number">4.7.4.</span> <span class="toc-text">应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bgp%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.7.5.</span> <span class="toc-text">5.4.1 BGP的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bgp%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8F%91%E5%B8%83"><span class="toc-number">4.7.6.</span> <span class="toc-text">5.4.2 BGP路由信息发布</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84"><span class="toc-number">4.7.6.1.</span> <span class="toc-text">示例网络结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bgp%E8%BF%9E%E6%8E%A5%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.7.6.2.</span> <span class="toc-text">BGP连接类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E6%92%AD%E8%BF%87%E7%A8%8B"><span class="toc-number">4.7.6.3.</span> <span class="toc-text">路由传播过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E8%B7%AF%E5%BE%84%E9%80%89%E6%8B%A9"><span class="toc-number">4.7.7.</span> <span class="toc-text">5.4.3 最佳路径选择</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bgp%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%AE%9A%E4%B9%89"><span class="toc-number">4.7.7.1.</span> <span class="toc-text">BGP属性与路由定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">4.7.7.2.</span> <span class="toc-text">路由选择算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E5%88%86%E6%9E%90-1"><span class="toc-number">4.7.7.3.</span> <span class="toc-text">示例分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E4%BB%BB%E6%92%ADip-anycast"><span class="toc-number">4.7.8.</span> <span class="toc-text">5.4.4 IP任播（IP-Anycast）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5"><span class="toc-number">4.7.9.</span> <span class="toc-text">5.4.5 路由策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A5%E5%85%A5"><span class="toc-number">4.7.10.</span> <span class="toc-text">5.4.6 构建互联网接入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sdn%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">4.8.</span> <span class="toc-text">5.5 SDN控制平面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sdn%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E7%BB%84%E6%88%90"><span class="toc-number">4.8.1.</span> <span class="toc-text">5.5.1 SDN控制平面组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sdn%E6%8E%A7%E5%88%B6%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">4.8.1.1.</span> <span class="toc-text">SDN控制器架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sdn%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E5%BA%94%E7%94%A8"><span class="toc-number">4.8.1.2.</span> <span class="toc-text">SDN网络控制应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#openflow%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.8.2.</span> <span class="toc-text">5.5.2 OpenFlow协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%8E%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E4%BA%A4%E4%BA%92%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.8.3.</span> <span class="toc-text">5.5.3 数据与控制平面交互示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8F%98%E6%9B%B4"><span class="toc-number">4.8.3.1.</span> <span class="toc-text">场景：链路状态变更</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sdn%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B%E4%B8%8E%E6%9C%AA%E6%9D%A5"><span class="toc-number">4.8.4.</span> <span class="toc-text">5.5.4 SDN的发展历程与未来</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#icmp%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.9.</span> <span class="toc-text">5.6 ICMP：互联网控制报文协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E4%BD%9C%E7%94%A8"><span class="toc-number">4.9.1.</span> <span class="toc-text">5.6.1 ICMP作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.9.2.</span> <span class="toc-text">5.6.2 ICMP报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8"><span class="toc-number">4.9.3.</span> <span class="toc-text">5.6.3 ICMP常见应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86snmp"><span class="toc-number">4.10.</span> <span class="toc-text">5.7 网络管理：SNMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#snmp%E6%A6%82%E8%BF%B0"><span class="toc-number">4.10.1.</span> <span class="toc-text">5.7.1 SNMP概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#snmp%E6%93%8D%E4%BD%9C"><span class="toc-number">4.10.2.</span> <span class="toc-text">5.7.2 SNMP操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mib%E7%BB%93%E6%9E%84"><span class="toc-number">4.10.3.</span> <span class="toc-text">5.7.3 MIB结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#snmp%E7%89%88%E6%9C%AC%E6%BC%94%E8%BF%9B"><span class="toc-number">4.10.4.</span> <span class="toc-text">5.7.4 SNMP版本演进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">4.10.5.</span> <span class="toc-text">5.6.1 ICMP的基本功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81icmp%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.10.6.</span> <span class="toc-text">5.6.2 常见ICMP消息类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ping%E4%B8%8Etraceroute%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.10.7.</span> <span class="toc-text">5.6.3 Ping与Traceroute的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6%E4%B8%AD%E7%9A%84icmpv6"><span class="toc-number">4.10.8.</span> <span class="toc-text">5.6.4 IPv6中的ICMPv6</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E4%B8%8Esnmpnetconfyang"><span class="toc-number">4.11.</span> <span class="toc-text">5.7 网络管理与SNMP、NETCONF&#x2F;YANG</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">4.11.1.</span> <span class="toc-text">5.7.1 网络管理框架概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AEsnmp%E4%B8%8E%E7%AE%A1%E7%90%86%E4%BF%A1%E6%81%AF%E5%BA%93mib"><span class="toc-number">4.11.2.</span> <span class="toc-text">5.7.2
简单网络管理协议（SNMP）与管理信息库（MIB）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#snmpv3%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">4.11.2.1.</span> <span class="toc-text">SNMPv3协议概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E4%BF%A1%E6%81%AF%E5%BA%93mib"><span class="toc-number">4.11.2.2.</span> <span class="toc-text">管理信息库（MIB）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEnetconf%E4%B8%8Eyang"><span class="toc-number">4.11.3.</span> <span class="toc-text">5.7.3
网络配置协议（NETCONF）与YANG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#netconf%E5%8D%8F%E8%AE%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.3.1.</span> <span class="toc-text">NETCONF协议功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#netconf%E6%93%8D%E4%BD%9C%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.11.3.2.</span> <span class="toc-text">NETCONF操作示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yang%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80"><span class="toc-number">4.11.3.3.</span> <span class="toc-text">YANG数据建模语言</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F%E6%AF%94%E8%BE%83"><span class="toc-number">4.11.4.</span> <span class="toc-text">5.7.4 网络管理方式比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E4%B8%9A%E4%B8%8E%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">4.12.</span> <span class="toc-text">作业与思考题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E4%B9%A0%E9%A2%98"><span class="toc-number">4.12.1.</span> <span class="toc-text">复习题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82"><span class="toc-number">4.12.1.1.</span> <span class="toc-text">5.1 节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82-1"><span class="toc-number">4.12.1.2.</span> <span class="toc-text">5.2 节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82-2"><span class="toc-number">4.12.1.3.</span> <span class="toc-text">5.3–5.4 节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82-3"><span class="toc-number">4.12.1.4.</span> <span class="toc-text">5.5 节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82-4"><span class="toc-number">4.12.1.5.</span> <span class="toc-text">5.6–5.7 节</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.13.</span> <span class="toc-text">编程实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp-ping-%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.13.1.</span> <span class="toc-text">ICMP Ping 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.13.2.</span> <span class="toc-text">路由协议模拟实验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wireshark-%E5%AE%9E%E9%AA%8Cicmp"><span class="toc-number">4.14.</span> <span class="toc-text">Wireshark 实验：ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E7%89%A9%E8%AE%BF%E8%B0%88jennifer-rexford"><span class="toc-number">4.14.1.</span> <span class="toc-text">人物访谈：Jennifer Rexford</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E4%B8%9A%E8%83%8C%E6%99%AF-1"><span class="toc-number">4.14.1.1.</span> <span class="toc-text">职业背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E8%A1%A8%E9%A1%B9%E7%9B%AE%E4%B8%8E%E6%8C%91%E6%88%98"><span class="toc-number">4.14.1.2.</span> <span class="toc-text">代表项目与挑战</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9sdn%E6%9C%AA%E6%9D%A5%E7%9A%84%E7%9C%8B%E6%B3%95"><span class="toc-number">4.14.1.3.</span> <span class="toc-text">对SDN未来的看法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%BD%91%E7%BB%9C%E4%B8%8E%E4%BA%92%E8%81%94%E7%BD%91%E6%9C%AA%E6%9D%A5%E7%9A%84%E5%B1%95%E6%9C%9B"><span class="toc-number">4.14.1.4.</span> <span class="toc-text">对网络与互联网未来的展望</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%97%E5%90%AF%E5%8F%91%E7%9A%84%E4%BA%BA%E7%89%A9"><span class="toc-number">4.14.1.5.</span> <span class="toc-text">受启发的人物</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%AD%A6%E7%94%9F%E7%9A%84%E5%BB%BA%E8%AE%AE-1"><span class="toc-number">4.14.1.6.</span> <span class="toc-text">给学生的建议</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E4%B8%8E%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.</span> <span class="toc-text">链路层与局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">6.1 链路层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.1.</span> <span class="toc-text">6.1.1 链路层的基本服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AE%9E%E7%8E%B0%E4%BD%8D%E7%BD%AE"><span class="toc-number">5.1.2.</span> <span class="toc-text">6.1.2 链路层实现位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E4%B8%8E%E7%BA%A0%E6%AD%A3%E6%8A%80%E6%9C%AF"><span class="toc-number">5.2.</span> <span class="toc-text">6.2 错误检测与纠正技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">5.2.1.</span> <span class="toc-text">6.2.1 奇偶校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.2.</span> <span class="toc-text">6.2.2 校验和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8Ccrc"><span class="toc-number">5.2.3.</span> <span class="toc-text">6.2.3 循环冗余校验（CRC）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E4%B8%8E%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.</span> <span class="toc-text">6.3 多路访问链路与协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.1.</span> <span class="toc-text">6.3.1 信道划分协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%88%92%E5%88%86tdm"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">时间划分（TDM）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%91%E7%8E%87%E5%88%92%E5%88%86fdm"><span class="toc-number">5.3.1.2.</span> <span class="toc-text">频率划分（FDM）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A0%81%E5%88%86%E5%A4%9A%E5%9D%80cdma"><span class="toc-number">5.3.1.3.</span> <span class="toc-text">码分多址（CDMA）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.2.</span> <span class="toc-text">6.3.2 随机访问协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#aloha-%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">ALOHA 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#csma%E8%BD%BD%E6%B3%A2%E4%BE%A6%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE"><span class="toc-number">5.3.2.2.</span> <span class="toc-text">CSMA（载波侦听多路访问）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E6%B5%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.3.</span> <span class="toc-text">6.3.3 轮流协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AE%E8%AF%A2%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.3.1.</span> <span class="toc-text">轮询协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.3.2.</span> <span class="toc-text">令牌传递协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docsis%E5%8D%8F%E8%AE%AE%E6%9C%89%E7%BA%BF%E7%BD%91%E7%BB%9C%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">5.3.4.</span> <span class="toc-text">6.3.4
DOCSIS协议（有线网络链路层）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E5%BC%8F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.4.</span> <span class="toc-text">6.4 交换式局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E5%AF%BB%E5%9D%80%E4%B8%8Earp"><span class="toc-number">5.4.1.</span> <span class="toc-text">6.4.1 局域网寻址与ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%8A%80%E6%9C%AF"><span class="toc-number">5.4.2.</span> <span class="toc-text">6.4.2 以太网技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.4.3.</span> <span class="toc-text">6.4.3 交换机工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vlan%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.4.4.</span> <span class="toc-text">6.4.4 VLAN虚拟局域网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E7%BD%91%E7%BB%9C"><span class="toc-number">5.4.5.</span> <span class="toc-text">6.4.5 数据中心网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AF%BB%E5%9D%80%E4%B8%8Earp"><span class="toc-number">5.4.6.</span> <span class="toc-text">6.4.1 链路层寻址与ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%9C%B0%E5%9D%80"><span class="toc-number">5.4.6.1.</span> <span class="toc-text">MAC地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.6.2.</span> <span class="toc-text">ARP协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%8A%80%E6%9C%AF-1"><span class="toc-number">5.4.7.</span> <span class="toc-text">6.4.2 以太网技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.4.7.1.</span> <span class="toc-text">以太网帧格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8F%91%E5%B1%95"><span class="toc-number">5.4.7.2.</span> <span class="toc-text">以太网发展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#csmacd%E6%9C%BA%E5%88%B6"><span class="toc-number">5.4.7.3.</span> <span class="toc-text">CSMA&#x2F;CD机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.4.8.</span> <span class="toc-text">6.4.3 链路层交换机工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E4%B8%8E%E8%BF%87%E6%BB%A4"><span class="toc-number">5.4.8.1.</span> <span class="toc-text">转发与过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AD%A6%E4%B9%A0%E6%9C%BA%E5%88%B6"><span class="toc-number">5.4.8.2.</span> <span class="toc-text">自学习机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BC%98%E5%8A%BF"><span class="toc-number">5.4.8.3.</span> <span class="toc-text">交换机优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91vlan"><span class="toc-number">5.4.9.</span> <span class="toc-text">6.4.4 虚拟局域网（VLAN）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E6%A6%82%E5%BF%B5"><span class="toc-number">5.4.9.1.</span> <span class="toc-text">VLAN概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.4.9.2.</span> <span class="toc-text">VLAN配置示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">5.4.9.3.</span> <span class="toc-text">VLAN间通信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan-trunking%E5%B9%B2%E7%BA%BF%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.4.9.4.</span> <span class="toc-text">VLAN Trunking（干线连接）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E7%B1%BB%E5%9E%8B%E6%89%A9%E5%B1%95"><span class="toc-number">5.4.9.5.</span> <span class="toc-text">VLAN类型扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E6%9E%B6%E6%9E%84"><span class="toc-number">5.4.10.</span> <span class="toc-text">6.6.1 数据中心架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E7%BD%91%E7%BB%9C%E5%8F%91%E5%B1%95%E8%B6%8B%E5%8A%BF"><span class="toc-number">5.4.11.</span> <span class="toc-text">6.6.2 数据中心网络发展趋势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BE%E4%B8%80%E6%AC%A1%E7%BD%91%E9%A1%B5%E8%AF%B7%E6%B1%82%E7%9A%84%E4%B8%80%E7%94%9F"><span class="toc-number">5.5.</span> <span class="toc-text">6.7 回顾：一次网页请求的一生</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E9%98%B6%E6%AE%B5dhcpudpip%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.5.1.</span> <span class="toc-text">6.7.1
初始阶段：DHCP、UDP、IP、以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dns%E4%B8%8Earp"><span class="toc-number">5.5.2.</span> <span class="toc-text">6.7.2 DNS与ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%86%85%E8%B7%AF%E7%94%B1%E8%87%B3dns%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.5.3.</span> <span class="toc-text">6.7.3 域内路由至DNS服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%AE%A2%E6%88%B7%E7%AB%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BA%A4%E4%BA%92tcp%E4%B8%8Ehttp"><span class="toc-number">5.5.4.</span> <span class="toc-text">6.7.4
Web客户端-服务器交互：TCP与HTTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E7%89%A9%E8%AE%BF%E8%B0%88albert-greenberg%E5%BE%AE%E8%BD%AFazure%E7%BD%91%E7%BB%9C%E8%B4%9F%E8%B4%A3%E4%BA%BA"><span class="toc-number">5.5.5.</span> <span class="toc-text">人物访谈：Albert
Greenberg（微软Azure网络负责人）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E4%B8%9A%E8%83%8C%E6%99%AF-2"><span class="toc-number">5.5.5.1.</span> <span class="toc-text">职业背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E6%9C%AF%E4%B8%8E%E8%8D%A3%E8%AA%89"><span class="toc-number">5.5.5.2.</span> <span class="toc-text">学术与荣誉</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BD%95%E9%80%89%E6%8B%A9%E7%BD%91%E7%BB%9C%E9%A2%86%E5%9F%9F"><span class="toc-number">5.5.5.3.</span> <span class="toc-text">为何选择网络领域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%BD%91%E7%BB%9C%E4%B8%93%E4%B8%9A%E5%AD%A6%E7%94%9F%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="toc-number">5.5.5.4.</span> <span class="toc-text">对网络专业学生的建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF%E4%B8%AD%E6%9C%80%E6%BF%80%E5%8A%A8%E4%BA%BA%E5%BF%83%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="toc-number">5.5.5.5.</span> <span class="toc-text">职业生涯中最激动人心的项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%9C%AA%E6%9D%A5%E7%BD%91%E7%BB%9C%E7%9A%84%E5%B1%95%E6%9C%9B"><span class="toc-number">5.5.5.6.</span> <span class="toc-text">对未来网络的展望</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF%E4%B8%AD%E7%9A%84%E5%90%AF%E5%8F%91%E6%9D%A5%E6%BA%90"><span class="toc-number">5.5.5.7.</span> <span class="toc-text">职业生涯中的启发来源</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/17/C-%E9%AB%98%E6%80%A7%E8%83%BD%E7%BC%96%E7%A8%8B/" title="C++高性能编程">C++高性能编程</a><time datetime="2025-07-17T19:47:19.000Z" title="Created 2025-07-17 19:47:19">2025-07-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/16/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%BF%B5/" title="操作系统概念">操作系统概念</a><time datetime="2025-07-16T20:55:14.000Z" title="Created 2025-07-16 20:55:14">2025-07-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/15/Kubuntu%E9%85%8D%E7%BD%AE/" title="Kubuntu配置">Kubuntu配置</a><time datetime="2025-07-15T05:25:37.000Z" title="Created 2025-07-15 05:25:37">2025-07-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/12/%E6%88%91%E4%BB%AC%E5%9C%A8AI%E6%97%B6%E4%BB%A3%E8%AF%A5%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0/" title="我们在AI时代该如何学习">我们在AI时代该如何学习</a><time datetime="2025-07-12T23:12:19.000Z" title="Created 2025-07-12 23:12:19">2025-07-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9CA-Top-Down-Approach/" title="计算机网络A Top Down Approach">计算机网络A Top Down Approach</a><time datetime="2025-07-12T22:02:58.000Z" title="Created 2025-07-12 22:02:58">2025-07-12</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By Fyind</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'all',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>